<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="/resources/spdi-openaccess-jats.xsl"?>
<!DOCTYPE response [
	
<!ENTITY % article SYSTEM "http://jats.nlm.nih.gov/archiving/1.2/JATS-archivearticle1.dtd">
<!ENTITY % book-part-wrapper SYSTEM "http://jats.nlm.nih.gov/extensions/bits/2.0/BITS-book2.dtd">
	]><response><apiMessage>This XML was provided by Springer Nature</apiMessage><query>doi:10.1186/s13639-016-0055-5</query><apiKey>87ba7cb21f89ce78154df796840621f4</apiKey><result><total>1</total><start>1</start><pageLength>2</pageLength><recordsDisplayed>1</recordsDisplayed></result><records><article dtd-version="1.2" article-type="research-article" xml:lang="en" specific-use="web-only" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink"><front><journal-meta><journal-id journal-id-type="publisher-id">13639</journal-id><journal-id journal-id-type="doi">10.1007/13639.1687-3963</journal-id><journal-title-group><journal-title>EURASIP Journal on Embedded Systems</journal-title><abbrev-journal-title abbrev-type="publisher">J Embedded Systems</abbrev-journal-title></journal-title-group><issn pub-type="epub">1687-3963</issn><publisher><publisher-name>Springer International Publishing</publisher-name><publisher-loc>Cham</publisher-loc></publisher></journal-meta><article-meta><article-id pub-id-type="publisher-id">s13639-016-0055-5</article-id><article-id pub-id-type="manuscript">55</article-id><article-id pub-id-type="doi">10.1186/s13639-016-0055-5</article-id><article-categories><subj-group subj-group-type="heading"><subject>Research</subject></subj-group></article-categories><title-group><article-title xml:lang="en">A fast and accurate energy source emulator for wireless sensor networks</article-title></title-group><contrib-group><contrib contrib-type="author" corresp="yes"><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-6568-8470</contrib-id><name><surname>Lattanzi</surname><given-names>Emanuele</given-names></name><address><email>emanuele.lattanzi@uniurb.it</email></address><xref ref-type="aff" rid="Aff1">1</xref><xref ref-type="corresp" rid="IDs1363901600555_cor1">a</xref></contrib><contrib contrib-type="author"><name><surname>Freschi</surname><given-names>Valerio</given-names></name><address><email>valerio.freschi@uniurb.it</email></address><xref ref-type="aff" rid="Aff1">1</xref></contrib><contrib contrib-type="author"><name><surname>Dromedari</surname><given-names>Matteo</given-names></name><address><email>matteo.dromedari@gmail.com</email></address><xref ref-type="aff" rid="Aff1">1</xref></contrib><contrib contrib-type="author"><name><surname>Lorello</surname><given-names>Luca Salvatore</given-names></name><address><email>l.lorello@campus.uniurb.it</email></address><xref ref-type="aff" rid="Aff1">1</xref></contrib><contrib contrib-type="author"><name><surname>Peruzzini</surname><given-names>Roberto</given-names></name><address><email>roberto.peruzzini@gmail.com</email></address><xref ref-type="aff" rid="Aff1">1</xref></contrib><contrib contrib-type="author"><name><surname>Bogliolo</surname><given-names>Alessandro</given-names></name><address><email>alessandro.bogliolo@uniurb.it</email></address><xref ref-type="aff" rid="Aff1">1</xref></contrib><aff id="Aff1"><label>1</label><institution-wrap><institution-id institution-id-type="GRID">grid.12711.34</institution-id><institution-id institution-id-type="ISNI">0000000123697670</institution-id><institution content-type="org-division">DiSPeA, Department of Pure and Applied Sciences</institution><institution content-type="org-name">University of Urbino</institution></institution-wrap><addr-line content-type="street">Piazza della Repubblica</addr-line><addr-line content-type="city">Urbino</addr-line><country country="IT">Italy</country></aff></contrib-group><author-notes><corresp id="IDs1363901600555_cor1"><label>a</label><email>emanuele.lattanzi@uniurb.it</email></corresp></author-notes><pub-date date-type="pub" publication-format="electronic"><day>3</day><month>10</month><year>2016</year></pub-date><pub-date date-type="collection" publication-format="electronic"><month>1</month><year>2017</year></pub-date><volume>2016</volume><issue seq="18">1</issue><elocation-id>18</elocation-id><history><date date-type="registration"><day>22</day><month>9</month><year>2016</year></date><date date-type="received"><day>29</day><month>6</month><year>2016</year></date><date date-type="accepted"><day>22</day><month>9</month><year>2016</year></date><date date-type="online"><day>3</day><month>10</month><year>2016</year></date></history><permissions><copyright-statement content-type="compact">© The Author(s) 2016</copyright-statement><copyright-year>2016</copyright-year><copyright-holder>The Author(s)</copyright-holder><license license-type="open-access" xlink:href="http://creativecommons.org/licenses/by/4.0/"><license-p><bold>Open Access</bold> This article is distributed under the terms of the Creative Commons Attribution 4.0 International License (<ext-link xlink:href="http://creativecommons.org/licenses/by/4.0/" ext-link-type="uri">http://creativecommons.org/licenses/by/4.0/</ext-link>), which permits unrestricted use, distribution, and reproduction in any medium, provided you give appropriate credit to the original author(s) and the source, provide a link to the Creative Commons license, and indicate if changes were made.</license-p></license></permissions><abstract xml:lang="en" id="Abs1"><title>Abstract</title><p>The capability to either minimize energy consumption in battery-operated devices, or to adequately exploit energy harvesting from various ambient sources, is central to the development and engineering of energy-neutral wireless sensor networks. However, the design of effective networked embedded systems targeting unlimited lifetime poses several challenges at different architectural levels. In particular, the heterogeneity, the variability, and the unpredictability of many energy sources, combined to changes in energy required by powered devices, make it difficult to obtain reproducible testing conditions, thus prompting the need of novel solutions addressing these issues. This paper introduces a novel embedded hardware-software solution aimed at emulating a wide spectrum of energy sources usually exploited to power sensor networks motes. The proposed system consists of a modular architecture featuring small factor form, low power requirements, and limited cost. An extensive experimental characterization confirms the validity of the embedded emulator in terms of flexibility, accuracy, and latency while a case study about the emulation of a lithium battery shows that the hardware-software platform does not introduce any measurable reduction of the accuracy of the model. The presented solution represents therefore a convenient solution for testing large-scale testbeds under realistic energy supply scenarios for wireless sensor networks.</p></abstract><kwd-group xml:lang="en"><title>Keywords</title><kwd>Energy emulator</kwd><kwd>Wireless sensor networks</kwd><kwd>Energy harvesting</kwd></kwd-group><funding-group><award-group><funding-source><institution-wrap><institution>Department of Pure and Applied Sciences, University of Urbino</institution></institution-wrap></funding-source></award-group></funding-group><custom-meta-group><custom-meta><meta-name>publisher-imprint-name</meta-name><meta-value>Springer</meta-value></custom-meta><custom-meta><meta-name>volume-issue-count</meta-name><meta-value>1</meta-value></custom-meta><custom-meta><meta-name>issue-article-count</meta-name><meta-value>14</meta-value></custom-meta><custom-meta><meta-name>issue-toc-levels</meta-name><meta-value>0</meta-value></custom-meta><custom-meta><meta-name>issue-pricelist-year</meta-name><meta-value>2016</meta-value></custom-meta><custom-meta><meta-name>issue-copyright-holder</meta-name><meta-value>The Author(s)</meta-value></custom-meta><custom-meta><meta-name>issue-copyright-year</meta-name><meta-value>2016</meta-value></custom-meta><custom-meta><meta-name>article-contains-esm</meta-name><meta-value>No</meta-value></custom-meta><custom-meta><meta-name>article-numbering-style</meta-name><meta-value>ContentOnly</meta-value></custom-meta><custom-meta><meta-name>article-registration-date-year</meta-name><meta-value>2016</meta-value></custom-meta><custom-meta><meta-name>article-registration-date-month</meta-name><meta-value>9</meta-value></custom-meta><custom-meta><meta-name>article-registration-date-day</meta-name><meta-value>22</meta-value></custom-meta><custom-meta><meta-name>article-toc-levels</meta-name><meta-value>0</meta-value></custom-meta><custom-meta><meta-name>toc-levels</meta-name><meta-value>0</meta-value></custom-meta><custom-meta><meta-name>volume-type</meta-name><meta-value>Regular</meta-value></custom-meta><custom-meta><meta-name>journal-product</meta-name><meta-value>ArchiveJournal</meta-value></custom-meta><custom-meta><meta-name>numbering-style</meta-name><meta-value>ContentOnly</meta-value></custom-meta><custom-meta><meta-name>article-grants-type</meta-name><meta-value>OpenChoice</meta-value></custom-meta><custom-meta><meta-name>metadata-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>abstract-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>bodypdf-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>bodyhtml-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>bibliography-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>esm-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>online-first</meta-name><meta-value>false</meta-value></custom-meta><custom-meta><meta-name>pdf-file-reference</meta-name><meta-value>BodyRef/PDF/13639_2016_Article_55.pdf</meta-value></custom-meta><custom-meta><meta-name>target-type</meta-name><meta-value>OnlinePDF</meta-value></custom-meta><custom-meta><meta-name>issue-type</meta-name><meta-value>Regular</meta-value></custom-meta><custom-meta><meta-name>article-type</meta-name><meta-value>OriginalPaper</meta-value></custom-meta><custom-meta><meta-name>journal-subject-primary</meta-name><meta-value>Engineering</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Signal,Image and Speech Processing</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Circuits and Systems</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Control Structures and Microprogramming</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Electronic Circuits and Devices</meta-value></custom-meta><custom-meta><meta-name>journal-subject-collection</meta-name><meta-value>SC8</meta-value></custom-meta><custom-meta><meta-name>open-access</meta-name><meta-value>true</meta-value></custom-meta></custom-meta-group></article-meta></front><body><sec id="Sec1" sec-type="introduction"><title>Introduction</title><p>Wireless sensor networks (WSNs) consist of a set of communicating nodes (motes) capable of sensing, processing, and storing physical quantities. One of the most critical issue in designing and developing WSNs is the limited amount of energy usually available in the nodes. The typical way of addressing this issue is by means of dynamic power management (DPM) strategies exploiting multiple low-power states of the motes. In such states, consumption drops from tens of milliwatts to a fraction of a microwatt increasing the system lifetime [<xref ref-type="bibr" rid="CR1">1</xref>–<xref ref-type="bibr" rid="CR3">3</xref>]. Recent advances in energy harvesting (EH) have introduced the opportunity of granting unbounded lifetime to sensor nodes, thus overcoming the limitations of battery-operated WSNs and introducing a new class of WSNs, called EH wireless sensor network (EH-WSNs), made of motes powered by renewable energy sources (RESs). This new opportunity has begun to shift the research paradigm from energy-constrained lifetime maximization (typical of battery-operated systems) to power-constrained workload maximization. EH motes can be deployed in remote environments and they can run potentially for an unlimited amount of time by gathering solar, kinetic, radio frequencies, or thermal energy [<xref ref-type="bibr" rid="CR4">4</xref>, <xref ref-type="bibr" rid="CR5">5</xref>].</p><p>However, designing hardware and software solutions for EH-WSNs is a difficult task due to the main characteristics of RESs. In particular, RESs show a high degree of unpredictability while EH devices provide an extremely variable efficiency. In fact, the amount of energy harvested depends not only on environmental conditions, which can vary in a rapid and uncontrolled way, but also on the energy drawn at runtime by the powered device. The combination of these two main factors makes practically impossible to produce repeatable experiments while testing a EH-WSN hardware-software platform using traditional strategies. For instance, the same node with a particular hardware-software configuration can generate extremely different results while EH conditions change. Furthermore, even when it is possible to accurately reproduce in lab the behavior of an energy harvester, replicating it over a testing network of tens or hundreds of nodes can be unfeasible for complexity and economic reasons.</p><p>A viable alternative can be represented by simulating the network and the energy harvester to predict the behavior of motes possibly using real-world traces. In WSNs, the use of simulation has been deeply explored by several authors in the last ten years [<xref ref-type="bibr" rid="CR6">6</xref>–<xref ref-type="bibr" rid="CR12">12</xref>]. However, realistic simulation requires an accurate model not only of the EH device but also of every hardware component involved in the system plus a fast and accurate model of the communication channel. In fact, the actual energy efficiency of communication protocols in WSNs depends on many factors which are very difficult to model and simulate, like interferences, collisions, re-transmissions, and over-hearing. Handling these issues requires to trade off realism (and accuracy) for simulation time and complexity, so that accurate energy simulations of large WSNs is still to be regarded as an open research problem. Emulation provides a viable alternative.</p><p>In this paper, we present an embedded hardware-software platform implementing an energy source emulator capable to run different energy source models for WSNs. The general architecture of the emulator allows the designer to model any energy source and to connect it to any physical mote. The emulator adjusts the voltage levels of the power supply according to the model of choice, while also measuring the actual current drawn by the mote in order both to collect a trace, and to provide a real-time feedback to the energy source model. Models can be changed in the field either by loading them from the on-board non volatile memory or by uploading them through the network.</p><p>Finally, the small size of the platform (about 73×57 millimeters), together with its low cost (less than $50) and power consumption (about 100 mA at 12 V) make it ideal to be used in large testbeds.</p><p>In summary, the proposed system <italic>(i)</italic> represents a flexible solution for emulating a set of heterogeneous energy sources, targeting WSN motes’ power supply, <italic>(ii)</italic> provides a tunable level of realism through a model-agnostic architecture, and <italic>(iii)</italic> features low-power consumption levels, a small factor form and reduced production costs, which make it particularly suitable for emulation of many real-world application scenarios even in large prototyping testbeds.</p><p>Extensive characterization experiments confirm the validity of the proposed emulator both in terms of accuracy and in terms of computational performance. A representative case study regarding the emulation of a lithium battery shows that the hardware-software platform does not introduce any measurable reduction of the accuracy of the model.</p><p>The rest of the paper is organized as follows: Section <xref rid="Sec2" ref-type="sec">2</xref> provides a survey of existing approaches to the energy source modeling and emulation; Section <xref rid="Sec5" ref-type="sec">3</xref> provides a description of the proposed modeling framework; Section <xref rid="Sec9" ref-type="sec">4</xref> presents the hardware-software emulation platform; Section <xref rid="Sec13" ref-type="sec">5</xref> reports and discusses experimental results; Section <xref rid="Sec18" ref-type="sec">6</xref> concludes the work.</p></sec><sec id="Sec2"><title>Related work</title><sec id="Sec3"><title>Modeling</title><p>While the fastest and most accurate way to model an energy source is to sample (with the sampling rate determining the accuracy of the model) the <italic>I</italic>−<italic>V</italic> curve and store these samples on main memory, this approach cannot be implemented in embedded systems for most energy sources due to the high number of parameters which do not fit the main memory. In fact, the memory footprint of the model increases as <italic>O</italic>(<italic>n</italic><sup><italic>m</italic>+1</sup>), where <italic>n</italic> is the number of samples and <italic>m</italic> is the number of independent parameters.</p><p>A second approach, which has both memory footprint and execution time bounded by <italic>O</italic>(1), can be represented by analytically <italic>modeling</italic> the <italic>I-V</italic> curve. This approach is well suited for an embedded device providing a good trade-off between fast execution time, model accuracy, and memory footprint.</p><p>Moreover, there are mainly two methods used to create an analytic model of an energy source behavior: (i) curve fitting and (ii) modeling the equivalent circuit of the energy source.</p><p>Curve fitting is the process of interpolating a set of experimental data taken from the energy source’s <italic>I-V</italic> characteristic in a curve which approximates it. When this curve can be described analytically, evaluating it is significantly faster than interpolating at run-time a set of points.</p><p>An equivalent circuit model (ECM) is an ideal circuit which describes the energy source in terms of an ideal voltage (by applying Thevenin’s theorem) or current (using Norton’s theorem) generator and passive components. Solving the equivalent circuit by using Kirchhoff’s laws gives the energy source’s behavior in terms of tension and current (<italic>v</italic>(<italic>t</italic>) and <italic>i</italic>(<italic>t</italic>)). The <italic>I-V</italic> curve can be obtained by manipulating these two functions. Since solving the equivalent circuit requires to solve a system of differential equations, it might not be possible to obtain exact solutions.</p><p>Analytical models are often parameterized (e.g., a battery output voltage depends also on its internal resistance) and determining these parameters might take more effort than determining the <italic>I-V</italic> characteristic itself. In fact, while the <italic>I-V</italic> curve and parameters depending on the energy source itself can be determined once, before the emulation starts, parameters depending on environmental factors (e.g., temperature, incident light, and load resistance) require a new evaluation every time the parameter changes.</p><p>Some authors describe a direct relation between measured variables and <italic>I-V</italic> curve’s parameters (e.g., the <italic>I-V</italic> curve of a thermoelectric cell can be described as a function of heat absorbed by the cold side, temperature of the cold side and the slope of the experimental <italic>V</italic>(<italic>I</italic>) curve at <italic>Δ</italic><italic>T</italic>=0), while others suggest an iterative approach (e.g., many models of solar panels try to fit the manufacturer <italic>I-V</italic> curve by varying iteratively a set of parameters of the ECM). The first approach can still be computed in <italic>O</italic>(1) while the second one depends on the approximation algorithm used and on the desired degree of accuracy.</p></sec><sec id="Sec4"><title>Emulation</title><p>Despite its enormous potential, the energy source emulation for wireless sensor networks is a relatively unexplored field of research. Currently, there are several projects on designing emulation hardware for batteries and solar cells but only few contributions address the problem in a general way or are portable and intended for a massive distribution in a wide testbed.</p><p>For instance, B# [<xref ref-type="bibr" rid="CR13">13</xref>] is a battery emulator based on an adjustable linear regulator which emulates the output battery voltages. It works in the range of 1.0–4.5 V and it can source a maximum current of 800 mA. The emulation board is controlled by means of a desktop computer running the Dualfoil electrochemical simulator for lithium-ion battery cells [<xref ref-type="bibr" rid="CR14">14</xref>]. The main computer takes in input the current draw by the powered system and finds the corresponding voltage using a look-up table. S# [<xref ref-type="bibr" rid="CR15">15</xref>] extends the B# architecture by adding a new front-end which allows the user to emulate a solar panel. In particular, S# can run either in the simulation mode or the emulation mode. In the simulation mode, it takes a current profile and a sunlight trace as inputs and generates a simulated power profile on the host computer. In the emulation mode, a real load is connected to the output of the emulation circuit and the solar model is written to the memory of the microcontroller which generates at run-time an appropriate voltage to drive the load. A similar approach is also presented by other authors which introduce solar panel emulation circuits controlled by means of a LabView PC [<xref ref-type="bibr" rid="CR16">16</xref>–<xref ref-type="bibr" rid="CR18">18</xref>].</p><p>The SunaPlayer photovoltaic emulator should be mentioned for its distinctive feature of using a Darlington transistor as the last circuit stage to build a non-linear model of a solar panel [<xref ref-type="bibr" rid="CR19">19</xref>]. SunaPlayer is based on a microcontroller and can be battery powered. It supports a wide operating range, spanning output currents from 430 <italic>μ</italic>A to 1.89 A and output voltages from 0.02 to 9.8 V with a measured accuracy of about 99 %. At run-time, the microcontroller needs to choose between several stored <italic>I-V</italic> curves in order to determine the appropriate tension value to be applied to the Darlington transistor gate. This task is very time expensive so that the major drawback highlighted by the authors is the extremely high latency which, in the worst case, has been measured in about 10 s.</p><p>Finally, in the photovoltaic domain, there are a plethora of emulators for high power (up to 3000 W) solar panels such as [<xref ref-type="bibr" rid="CR20">20</xref>, <xref ref-type="bibr" rid="CR21">21</xref>] which are basically designed for industrial applications.</p><p>More close to a generic energy source emulator targeted for wireless sensor networks, we can report the Ekho project which is a generic energy harvesting emulator designed for small currents [<xref ref-type="bibr" rid="CR22">22</xref>, <xref ref-type="bibr" rid="CR23">23</xref>]. In particular, Ekho uses a simple design where first of all each energy harvester needs to be characterized by recording its distinguishing <italic>I-V</italic> curves using a high-precision acquisition instrument. Then, the appropriate <italic>I-V</italic> curve is replayed at run-time by means of a dedicate board. The Ekho replaying board uses a capacitor to power the load and a sensing resistor (10 <italic>Ω</italic>) to estimate the supplied current. At run-time, the corresponding operating point on the <italic>I-V</italic> curve is calculated and the appropriate output tension is set. The system uses a FPGA to speed up the <italic>I-V</italic> calculation in the first release while the more recent implementation is based on a 32 Mhz ATMEL microcontroller. While the system shows a satisfactory emulation accuracy of about 77.4 <italic>μ</italic> A during a solar panel emulation its latency, measured in 7.4 ms, can negatively impair the ability to emulate a generic energy source for wireless sensor networks.</p><p>Another generic approach can be represented by the simulation/emulation framework described by De Mil et al. [<xref ref-type="bibr" rid="CR24">24</xref>] where a generic energy harvester is simulated/emulated as a complex energy source which is composed by a harvester always connected to a energy storage such as an ultracapacitor. The energy harvester and the storage element are virtual, and implemented in software. The voltage drop across this virtual capacitor is calculated using a static model and a feedback is applied by means of a DAQ plus a voltage follower. Authors do not report accuracy or time latency but the entity of the microcontroller (a Texas Instrument MSP430 running up to 20 Mhz) reveals a high response time.</p><p>For reasons of completeness, a generic energy source emulator can also be represented by programmable power supplies such as those produced by National Instruments which are capable of simulating different energy sources with a wide range of operations [<xref ref-type="bibr" rid="CR25">25</xref>]. These power supplies offer fine-grained measurement and a high degree of programmability but they are not portable and they can not be used in a massive installation because of their cost that exceeds $4000.</p></sec></sec><sec id="Sec5"><title>Modeling framework</title><p>The effective design of an embedded emulation device crucially depends on the capability of accurately and efficiently modeling the target energy source. In fact, the accuracy of the model impacts the capability of the emulator to mimic real-world sources, while the computational efficiency of the algorithm that implements the model directly affects the latency of the overall system and the possibility to emulate real time operating conditions.</p><p>A high-level abstraction of the modeling framework is provided in Fig. <xref rid="Fig1" ref-type="fig">1</xref>, which schematically represents the main functional blocks and relationships to be taken into account. In particular, the energy source can be summarized by means of the functional dependence of the produced output voltage from several input parameters: 
<list list-type="bullet"><list-item><p><italic>t</italic> represents time;
<fig id="Fig1"><label>Fig. 1</label><caption xml:lang="en"><p>Modeling framework diagram</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2016_55_Fig1_HTML.gif" id="MO1"/></fig></p></list-item><list-item><p><italic>i</italic><sub>load</sub> represents the current drained by the load at the given operating point;</p></list-item><list-item><p><italic>x</italic><sub>1</sub>,<italic>x</italic><sub>2</sub>,⋯<italic>x</italic><sub><italic>n</italic></sub> represent general parameters inherent to the modeled source (e.g., the solar irradiance and ambient temperature for a photovoltaic cell, the state of charge of a battery);</p></list-item><list-item><p><italic>S</italic> represents the state of the system.</p></list-item></list></p><p>Modifications of the load impedance, for instance because of dynamic power management policies or, in general, because of different tasks performed by the powered system during its activity, result into changes of the load current. This variation, in turn, affects the output voltage provided by the source according to the functional relationship summarized by the current-voltage curve. This interplay can be represented by means of a loop through which the load current is fed back as input to the system. The other loop represented in Fig. <xref rid="Fig1" ref-type="fig">1</xref> highlights the possibility of taking into account some form of memory, formalized by means of the state variable <italic>S</italic> in the diagram. For instance, when emulating a battery, the state of charge of the battery represents the state of the system whose current value clearly depends on the dynamic evolution up to the current time.</p><p>The adoption of such a general framework enables in principle to emulate any type of energy source, from batteries to renewable energy scavengers. To exemplify this concept, we introduce in the following some basic features of models which can be accommodated in the architecture of the proposed emulator. Needless to say, this brief excursus is far from being exhaustive. Other models of the same sources could be implemented, and other sources could be modeled within the presented framework, thus making the proposed emulator a flexible tool for system designers to emulate a wide range of different scenarios. However, it is worthwhile to notice that the aim of this work is not a thorough implementation and discussion of different energy source models, rather the description of the emulator architecture, including its experimental validation on specific case studies as provided in Section <xref rid="Sec13" ref-type="sec">5</xref>.</p><sec id="Sec6"><title>A battery model</title><p>Battery modeling is an active research area due to the widespread diffusion of battery-powered devices in several application fields. As a consequence, many possible methodologies and models are available [<xref ref-type="bibr" rid="CR26">26</xref>]. Again, the exploration of this design space implies the evaluation of the trade-off between accuracy and computational complexity of the model. To evaluate the performance of the proposed emulator platform we implemented an analytical model suitable for rechargeable batteries of different types [<xref ref-type="bibr" rid="CR27">27</xref>]. The methodology is based on curve fitting of the <italic>V</italic>(<italic>Q</italic>) discharge curve (at constant load) taken from the manufacturer’s datasheet.</p><p>The model discriminates between charge and discharge curves and describes them separately to take into account the fact that the <italic>I-V</italic> curve of a battery presents an hysteresis phenomenon. The discharge curve is described by a single equation valid for lead-acid, Li-ion and NiCd/NiMH batteries, while the charge curve is slightly different for each kind of battery. These curves are parameterized by maximum voltage, state of charge, internal resistance, polarization voltage, polarization resistance, instantaneous drawn current, and low-pass filtered current (which models the slow response of the battery to a change in load).</p><p>Every parameter but state of charge and current (both unfiltered and filtered<sup>1</sup>) can be obtained from a typical manufacturer’s datasheet by applying a set of equations on three points of the experimental discharge curve. The state of charge is computed as the drawn current integrated with respect to time. In order to reduce model complexity the authors make several assumptions, namely: battery capacity does not change at different discharge rate (no Peukert effect), no effect of temperature on the model, no memory effect, same parameters for both charge and discharge, constant internal resistance, and negligible self discharge.</p><p>This approach results into a model with the following features: <italic>(i)</italic> parameters can be easily derived (only three points are required) from the battery discharge curve or even from its datasheet; <italic>(ii)</italic> the computational complexity to evaluate the model is <italic>O</italic>(1), the most expensive operation being a single floating point exponentiation for the discharge <italic>I-V</italic> curve; <italic>(iii)</italic> maximum relative error on the <italic>I-V</italic> curve has been estimated to be 10 <italic>%</italic> in the worst case (state of charge of 0−20 <italic>%</italic> with highly dynamic load).</p></sec><sec id="Sec7"><title>Energy harvesters</title><p>A generic energy harvester is typically composed of the following elements: <italic>(i)</italic> a <italic>transducer</italic> that transforms some form of energy available from the environment into electrical power; <italic>(ii)</italic> an energy <italic>buffer</italic>, used to provide energy storage capabilities to the system; <italic>(iii)</italic> an <italic>input regulator</italic>, which provides any signal conditioning (i.e., DC-AC, DC-DC conversion) required to adjust any mismatch between the operating range of the transducer and that if the buffer; <italic>(iv)</italic> an <italic>output regulator</italic> in charge of adapting the signal provided by the energy buffer to the operating range required by the load. Some components can be optionally included/excluded in the scheme described so far, in some cases. For instance, the scavenger could be directly coupled to the load without any buffering or output regulator, depending on the features of the target application.</p><p>To provide a more comprehensive view of the wide range of possible sources that can be implemented within the proposed architecture, we introduce in the following two models representative of a wide number of possible energy scavenging sources, namely photovoltaic and thermoelectric cells.</p><p>Solar cells exploit the <italic>photovoltaic effect</italic> (PV) to transform solar energy into electrical energy. The electrical power delivered by a PV panel (an array of interconnected solar cells) depends on several parameters, namely, solar radiance, incidence angle, working temperature, and load impedance. Different production technologies (monocrystalline, polycristalline, and amorphous silicon) result into different <italic>I-V</italic> curves, whose accurate modeling represents an issue to be addressed in order to gain insight about the amount of energy flow produced under different working conditions [<xref ref-type="bibr" rid="CR28">28</xref>].</p><p>A common modeling approach entails the description of a PV module through an equivalent circuit with lumped components, the most commonly adopted being a circuit containing a current generator (accounting for the light generated current), a diode (used to shape the knee of a typical <italic>I-V</italic> characteristic), a series, and a shunt resistor (to account for connection losses). To fully characterize the working points of a cell, the extraction of parameters from these circuit representations is carried on by means of numerical nonlinear methods [<xref ref-type="bibr" rid="CR28">28</xref>–<xref ref-type="bibr" rid="CR30">30</xref>]. The computational requirements posed by these numerical models are critical for their implementation on embedded real-time systems. The inherent trade-off between convergence speed and accuracy of the emulated model is therefore an issue to be explored for the emulation of this type of energy source.</p><p>Thermoelectric cells (also known as thermoelectric generators, TEG for short) are devices capable of converting heat (given a thermal gradient across the plates) into electrical energy, exploiting the Seebeck effect. In particular, the voltage generated by a given cell is proportional to the temperature difference <italic>Δ</italic><italic>T</italic> through a proportionality coefficient <italic>S</italic> (the Seebeck coefficient). The converse physical process may also be observed, namely, the heat transfer between the two sides of a TEG (Peltier effect). In order to design accurate models for analyzing both transient and steady conditions and encompassing non-linear electrical and thermal coupled effects, several methods have been proposed, leading to SPICE [<xref ref-type="bibr" rid="CR31">31</xref>, <xref ref-type="bibr" rid="CR32">32</xref>] or Matlab/Simulink models [<xref ref-type="bibr" rid="CR33">33</xref>, <xref ref-type="bibr" rid="CR34">34</xref>]. Other models, describing the interaction of a TEG with heat generated by CPUs (e.g., in a server farm monitoring application), have been derived by regression on the empirical relationship between temperature gradients and TEG output power (when the TEG is coupled to a DC-DC boost converter) [<xref ref-type="bibr" rid="CR35">35</xref>]. Again, the complexity of computing the model output needs to be carefully evaluated, since it may severely affect its applicability in real-time environments and its implementation on embedded platforms. Moreover, circuit models need to take into account a model of the load to be powered, which might be particularly difficult to obtain in certain cases.</p></sec><sec id="Sec8"><title>Compositional models</title><p>The proposed modeling framework allows to smoothly integrate and compose different building blocks representative of a cascade of devices. Indeed, in some applications, the energy flow provided by a given harvester needs to be properly shaped for compatibility with the load to be powered. For example, voltage limiters or output stage regulators (DC-DC converters) could be used to couple a photovoltaic scavenger to an embedded device equipped with integrated circuits requiring to be powered with stable voltage [<xref ref-type="bibr" rid="CR28">28</xref>]. Another example could be represented by chips used to drive battery recharging according to optimized policies [<xref ref-type="bibr" rid="CR36">36</xref>]. The composition of the <italic>I-V</italic> curves of each single block into a suitable <italic>I-V</italic> characteristic representative of the whole cascade allows us to emulate modular scavenging systems, providing a twofold benefit: on the one side we extend the emulation process to a wider spectrum of possible power source behaviors, on the other side we decouple and isolate the contribution of each single block (e.g. the photovoltaic cell and the recharge chip are separately characterized and composed) thus enabling to perform significant fine-grain emulations.</p></sec></sec><sec id="Sec9"><title>The energy emulator</title><p>In this paper, we present an hardware-software embedded device which can be used to emulate an energy source for wireless sensor nodes. The device, hereafter called <italic>emulator</italic>, is built starting from off-the-shelf hardware components on top of which it is possible to run different energy source models thanks to a dedicated software layer.</p><p>The main idea of the energy source emulation is to control the voltage and the current supplied to the powered device by means of a digital system in an attempt to follow a modeled energy source. A possible architecture capable to digitally control the voltage and the current supplied to a generic load can be represented by a system which continuously measures the supplied current and immediately acts in feedback to the generated voltage following any predefined policy. To this purpose in our emulator prototype a main microcontroller equipped with both and ADC, which measures the supplied current, and a DAC, used to impose a particular output voltage, has been used.</p><sec id="Sec10"><title>Hardware</title><p>Figure <xref rid="Fig2" ref-type="fig">2</xref> shows an actual picture of the emulator prototype which highlights its relative small size (73 ×57 mm) while Fig. <xref rid="Fig3" ref-type="fig">3</xref> shows the main architectural characteristics. The emulator core consists of the ATSAM4E16E microcontroller provided by Atmel corporation which is based on a high-performance 32-bit ARM®;Cortex®;-M4 RISC processor running at a maximum speed of 120 MHz and features up to 1024 kB of Flash and 128 kB of RAM [<xref ref-type="bibr" rid="CR37">37</xref>].
<fig id="Fig2"><label>Fig. 2</label><caption xml:lang="en"><p>Actual picture of the emulator prototype with highlighted its small dimensions (73 ×57 mm)</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2016_55_Fig2_HTML.gif" id="MO2"/></fig><fig id="Fig3"><label>Fig. 3</label><caption xml:lang="en"><p>Schematic representation of the energy source emulator</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2016_55_Fig3_HTML.gif" id="MO3"/></fig></p><p>This microcontroller family offers a rich set of advanced connectivity peripherals including an Ethernet port, a full-speed USB, and an high-speed MCI for SD and MMC memories. From the analog point of view, the microcontroller is equipped with two 16-bit ADC, one 12-bit DAC (2-channels), and an analog comparator which allow us to build the emulation interface described later in Section <xref rid="Sec11" ref-type="sec">4.2</xref>. The power supply unit consists of two low-dropout (LDO) voltage regulators designed to provide up to 1.5-A output current which receive the power through the ethernet connector using the Power over Ethernet (PoE) standard technology [<xref ref-type="bibr" rid="CR38">38</xref>, <xref ref-type="bibr" rid="CR39">39</xref>]. Moreover, a precise analog reference has been provided to the microcontroller by means of an LM4132 precision voltage references chip in order to provide stable and accurate analog measures [<xref ref-type="bibr" rid="CR40">40</xref>].</p></sec><sec id="Sec11"><title>The emulation interface</title><p>The emulation interface refers to the particular schema and components used to build a complete feedback system starting from the microcontroller. In particular, Fig. <xref rid="Fig4" ref-type="fig">4</xref> shows the adopted emulation interface which powers a generic sensor node represented into the right by a dashed rectangle. The DAC of the microcontroller can output a voltage signal with 12-bits of resolution mapped into an analog range starting from <inline-formula id="IEq1"><alternatives><mml:math id="IEq1_Math"><mml:mfrac><mml:mrow><mml:mn>1</mml:mn></mml:mrow><mml:mrow><mml:mn>6</mml:mn></mml:mrow></mml:mfrac></mml:math><tex-math id="IEq1_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$\frac {1}{6}$\end{document}</tex-math><inline-graphic specific-use="web" mime-subtype="GIF" xlink:href="13639_2016_55_Article_IEq1.gif"/></alternatives></inline-formula>ADVREF up to <inline-formula id="IEq2"><alternatives><mml:math id="IEq2_Math"><mml:mfrac><mml:mrow><mml:mn>5</mml:mn></mml:mrow><mml:mrow><mml:mn>6</mml:mn></mml:mrow></mml:mfrac><mml:mtext>ADVREF</mml:mtext><mml:mo>]</mml:mo></mml:math><tex-math id="IEq2_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$\frac {5}{6} \text {ADVREF}]$\end{document}</tex-math><inline-graphic specific-use="web" mime-subtype="GIF" xlink:href="13639_2016_55_Article_IEq2.gif"/></alternatives></inline-formula>. Because of the standard power supply voltage of several consumer devices is 3.3 V which corresponds to our ADVREF, the <italic>A</italic><sub>1</sub> operational amplifier (MAX4239) is provided to boost the DAC output (DACC<sub>out</sub>) to 3.3-V level [<xref ref-type="bibr" rid="CR41">41</xref>]. Moreover, the boosted DAC output is used to drive the <italic>A</italic><sub>2</sub> (AD8397) operational amplifier which is working as a voltage buffer and decouples the supplied current from the DAC output signal [<xref ref-type="bibr" rid="CR42">42</xref>].
<fig id="Fig4"><label>Fig. 4</label><caption xml:lang="en"><p>The current emulation interface powering a generic sensor node</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2016_55_Fig4_HTML.gif" id="MO4"/></fig></p><p>In order to measure the current supplied to the generic load, a resistor (<italic>R</italic><sub>sense</sub>) has been placed between the load and the ground and the resulting voltage drop (<italic>V</italic><sub>sense</sub>) is amplified by <italic>A</italic><sub>3</sub> (MAX4239) and then measured by an ADC channel. <italic>R</italic><sub>sense</sub> has been opportunely dimensioned to obtain a good compromise between the current measurement resolution and the voltage drop which unavoidably affects the voltage perceived by the generic load. In particular, in our tests we use a sensing resistor of 6.22 <italic>Ω</italic> and a precision differential amplifiers with a gain of 10 [<xref ref-type="bibr" rid="CR43">43</xref>]. Thus, for a value of 3.3 V (the max readable value for the ADC), we obtain a measurable current in the range from about 0.05 up to about 53 mA (considering a resolution of the ADC set to 16 bits).</p><p>Due to the voltage drop across the sensing resistor, a generic load is supplied by a voltage difference (<italic>V</italic><sub>load</sub>) which is reduced with respect to the boosted DAC output imposed by the emulator. In order to compensate this reduction, a nominal voltage restoring mechanism has been implemented which consists on overloading the output of the DAC by the same voltage drop measured on the <italic>R</italic><sub>sense</sub> as soon as the voltage drop has been read. This hardware-software loop guarantees a <italic>V</italic><sub>load</sub> compliant to the nominal expected conditions with a delay equal at least to the hardware-software latency.</p><p>Finally, a second ADC channel (ADC<sub><italic>V</italic></sub>) has been used to constantly monitor the real output value of the voltage buffer (<italic>A</italic><sub>2</sub>) for debugging purpose.</p></sec><sec id="Sec12"><title>Software</title><p>The software architecture has been designed to achieve high performance and at the same time to allow the execution of different source models. Moreover, the emulator firmware has been developed to simplify the simulation parameter initialization and management in real conditions of utilization.</p><p>The software architecture has been designed in a modular way to guarantee the easy maintenance and the reuse of the source code. In particular, the overall architecture can be represented by the following six elements: (i) processor; (ii) communication; (iii) measuring; (iv) model; (v) output; (vi) data storage.</p><p>The processor element consists of the main loop function which manages the remaining elements. The main function loop iterates at the maximum achievable speed while executing the main instruction chain. In particular, at each iteration, a communication element, which is designed to manage the emulator via Telnet, is polled to handle potential incoming ethernet packets. If no commands have been issued by the Telnet channel a start measuring command is triggered to the measuring element. When the measure has been completed, the control is passed to the model element which executes the current model and produces output values. The calculated output values are then passed to the output element which properly configures the DAC output also including the nominal voltage restoring mechanism described in the previous section. Finally, a data storage element is also provided to optionally log system events and emulation data to an external SD memory card.</p><p>The main loop contained in the processor element is the major contributor to the emulator performance.</p><p>In fact, each stage of the loop is executed sequentially because of the single execution unit provided by the microcontroller so that the delay of each element is added to the others. For this reason, minimizing the execution time of each element is a crucial task which directly impacts the emulator performance. The optimization of the execution time of the element containing the energy source models should be treated separately since there is a trade-off between computational complexity and accuracy of each model which can impacts the emulator performance in different ways. This treatment is out of the scope of this paper and it will be discussed in a future work.</p><p>Basically, the period of time that elapses between two consecutive measurements is a phase in which the emulator is insensible to the variations of the supplied current and it can not react by setting a proper output value. This period of time can be named <italic>emulator latency</italic> and it should be minimized and properly characterized. In order to reduce the emulator latency, several expedients have been played out, such as disabling configuration Telnet commands when the emulation is running, or selecting among different level of the logger verbosity in order to reduce the time spent to save data to the SD card.</p></sec></sec><sec id="Sec13"><title>Experimental results</title><p>This section reports and discusses the results of extensive experiment and measurements performed on the emulator prototype described in the previous section. In order to provide a comprehensive characterization of the proposed system, two types of experiments have been conceived. The first set of experiments provides a characterization independent from the type of energy source emulated and is aimed at the following: <italic>(i)</italic> evaluating the accuracy of the emulator when it measures the current supplied to the load device; <italic>(ii)</italic> empirically characterizing the latency of the emulation platform. The second set of experiments concerns a real-world energy source emulation, namely, a battery discharge process which is taken as a representative case study of the emulation capabilities of the system.</p><p>In particular, Section <xref rid="Sec14" ref-type="sec">5.1</xref> outlines the experimental setup, Section <xref rid="Sec15" ref-type="sec">5.2</xref> reports the characterization of the error obtained during current measurement, Section <xref rid="Sec16" ref-type="sec">5.3</xref> describes the measured emulator latency, while Section <xref rid="Sec17" ref-type="sec">5.4</xref> shows the results obtained while emulating the discharge of a 550-mAh lithium battery.</p><sec id="Sec14"><title>Experimental setup</title><p>The current consumption of the device powered by the emulator was measured and sampled by means of a National Instruments PXI-4071 digital multimeter with a sensitivity down to 1 pA [<xref ref-type="bibr" rid="CR44">44</xref>] while digital waveforms were sampled by means of a National Instruments NI-DAQmx PCI-6251 16-channel data acquisition board connected to a BNC-2120 shielded connector block [<xref ref-type="bibr" rid="CR45">45</xref>, <xref ref-type="bibr" rid="CR46">46</xref>]. Square waves were produced using a TG2000 Aim-TTi analogue and digital function generators [<xref ref-type="bibr" rid="CR47">47</xref>]. During the experiments, the emulator prototype was powered at 12 V by a NGMO2 Rohde &amp; Schwarz dual-channel power supply [<xref ref-type="bibr" rid="CR48">48</xref>]. The emulator was tested with constant load by connecting it to simple static resistors while an ad-hoc designed DC electronic load was used in constant current experiments. Finally, more realistic operating conditions have been experimented by using the emulator as a power source for a real VirtualSense sensor node [<xref ref-type="bibr" rid="CR49">49</xref>].</p></sec><sec id="Sec15"><title>Supplied current measurement error</title><p>The first set of experiments was carried out to deeply characterize the capability of the emulator to measure the current supplied to the powered device. For this purpose the emulator was programmed to generate a constant output in terms of voltage and, at the same time, to measure the supplied current. Understanding the capability to measure the supplied current is crucial because an error on its determination will introduce an obvious approximation on the model computation which results on a gap between emulation and reality regardless of the approximation of the implemented model.</p><p>The measurement error of the supplied current essentially derives from two different factors: (i) the characteristics of the ADC integrated into the microcontroller unit and (ii) the noise, introduced by the analog circuit which amplifies the signal collected from the sensing resistor (<italic>R</italic><sub>sense</sub> in Fig. <xref rid="Fig4" ref-type="fig">4</xref>). While the ADC channel performance is well known and documented by the microcontroller manufacturer, the amplifier circuit should be properly characterized together with the ADC coupling.</p><p>Figure <xref rid="Fig5" ref-type="fig">5</xref> shows the measurement error obtained while measuring the current supplied by the emulator to constant loads powered at different voltages. In particular, a set of resistors, with different values of resistance, were connected to the emulator output and the corresponding current flowing into the circuit has been measured, at the same time, with the high sensitivity digital multimeter and with the emulator sensing circuit. The difference between the real current (the current measured with the high sensitivity multimeter) and the current measured by the emulator prototype is reported on the figure for different current level obtained, both changing the resistor load, that changing the voltage supply level. As expected, the error increases while the supplied current increases, and it shows an absolute error ranging from about 0.05 to about 1.3 mA which can be considered satisfactory for an embedded device. However, the particular distribution of the measured errors suggests a strong predictability and repeatability, also confirmed by the high coefficient of determination (about 0.993) obtained while fitting this error distribution using a linear model (the black solid line in Fig. <xref rid="Fig5" ref-type="fig">5</xref>).
<fig id="Fig5"><label>Fig. 5</label><caption xml:lang="en"><p>Error obtained while self-measuring the current supplied by the emulator to constant loads powered at different voltages</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2016_55_Fig5_HTML.gif" id="MO5"/></fig></p><p>Thanks to the high confidence of the linear fitting described above an error compensation based on the regression curve has been introduced in order to increase the current measurement accuracy. In particular, Fig. <xref rid="Fig6" ref-type="fig">6</xref> shows the percentage of error in current estimation, obtained while varying a resistive load supplied at 3 V, with the error compensation mechanism both enabled and disabled. Notice that for each resistive load the compensation mechanism decreases the measurement error which, in the worst case, does not exceed 7 %, for a measured current of about 300 <italic>μ</italic>A, against about 24 % without the error compensation.
<fig id="Fig6"><label>Fig. 6</label><caption xml:lang="en"><p>Percentage of error in current estimation obtained while varying the resistive load with and without the error compensation mechanism</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2016_55_Fig6_HTML.gif" id="MO6"/></fig></p><p>The last set of experiments has been carried out to investigate the capability of the emulator to measure the supplied current to a highly variable load. A VirtualSense sensor node, which was sensing the radio channel for incoming packets and blinking a led, has been powered at a constant voltage of 3.3 V by means of the emulator prototype [<xref ref-type="bibr" rid="CR49">49</xref>]. Figure <xref rid="Fig7" ref-type="fig">7</xref> contains the waveforms of the supplied current collected by the emulator, with and without the error compensation mechanism, compared with that collected by the National Instruments PXI-4071 digital multimeter. As expected the uncompensated curve (the blue line) underestimates the real supplied current (the black line) while the compensated ones (the red line) is almost coinciding. The emulator collected curves also denote that rapid state transitions, such as a channel clear assessment (CCA), which determine a rapid increase in the current consumption, have been appropriately sampled end measured (see the zoomed curve plotted in the rectangle of Fig. <xref rid="Fig7" ref-type="fig">7</xref>).
<fig id="Fig7"><label>Fig. 7</label><caption xml:lang="en"><p>Waveforms of the supplied current collected by the emulator with and without the error compensation mechanism compared with that collected by the digital multimeter</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2016_55_Fig7_HTML.gif" id="MO7"/></fig></p></sec><sec id="Sec16"><title>Latency estimation</title><p>The emulator latency has been accurately characterized by means of a set of dedicated experiments. In particular the goal of these experiments was the measurement of the minimum latency without considering the contribution of any particular model. The minimum latency can be measured by taking into account the time that elapses between a variation of the load, which determines a variation of <italic>V</italic><sub>load</sub> due to a different current flowing through the <italic>R</italic><sub>sense</sub> (see Fig. <xref rid="Fig4" ref-type="fig">4</xref>), and the restoring of the nominal condition by means of the emulator nominal voltage restore mechanism.</p><p>To accurately measure this time, the emulator was connected to a static resistive load which was instantly changed by means of an electromechanical relay which switches between two different resistor. The relay was driven by a square wave generated through the TG2000 Aim-TTi digital function generators [<xref ref-type="bibr" rid="CR47">47</xref>]. Figure <xref rid="Fig8" ref-type="fig">8</xref> shows four different plots illustrating the results of the latency measurements. In particular, the black line represents the current drawn through the load which instantly decreases from 28 to 15 mA as the result of the relay activation, while the value of the <italic>V</italic><sub>load</sub>, the blue line in the figure, grows accordingly until the emulator restores the nominal condition. The figure also shows a square wave (the red line) which represents the start and the end of the reading of <italic>V</italic><sub>sense</sub> by means of the ADC channel. In particular, the rising edge corresponds to the start of the reading procedure while the falling edge is the end of it. As soon as the emulator finishes reading the <italic>V</italic><sub>sense</sub> value it applies the new DACC<sub>out</sub> value to neutralize the effect of the voltage drop on <italic>R</italic><sub>sense</sub>. Therefore, starting from the plot of Fig. <xref rid="Fig8" ref-type="fig">8</xref>, the latency can be measured by taking into account the two points of variation of the <italic>V</italic><sub>load</sub>. The four plots of the figure show four different conditions which lead to different latency values. In particular, the subplot (<xref rid="Fig8" ref-type="fig">a</xref>) represents the worst case in which the ADC reading starts just few microseconds before the relay activation, so that we need to wait the succeeding ADC reading to realize the variation in the <italic>V</italic><sub>sense</sub>. In this case, the measured latency is about 210 <italic>μ</italic>s while it decreases in plots (<xref rid="Fig8" ref-type="fig">b</xref>), (<xref rid="Fig8" ref-type="fig">c</xref>), and (<xref rid="Fig8" ref-type="fig">d</xref>) due to the different relative positions between the relay activation and the ADC reading. For instance, the (<xref rid="Fig8" ref-type="fig">d</xref>) plot represents the best case, which is due to the perfect synchronization between the relay activation and the ADC reading, with a latency of only about 145 <italic>μ</italic>s. In conclusion, given the peculiarity of the described mechanism, the emulator latency can be estimated as an average value between the four represented conditions which lead to an average latency of about 172 <italic>μ</italic>s.
<fig id="Fig8"><label>Fig. 8</label><caption xml:lang="en"><p>Latency measurement results. In <bold>a</bold>, the ADC reading starts just few microseconds before the current variation. In this case, the measured latency is about 210 <italic>μ</italic>s while it decreases in plots <bold>b</bold>, <bold>c</bold>, and <bold>d</bold> due to the different relative positions between the current variation and the ADC reading</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2016_55_Fig8_HTML.gif" id="MO8"/></fig></p></sec><sec id="Sec17"><title>Emulating a battery discharge</title><p>As a case study to support the suitability of the proposed platform in emulating an energy source for wireless sensor networks, the battery model proposed by Tremblay and Dessaint has been implemented and tested on the emulator [<xref ref-type="bibr" rid="CR27">27</xref>].</p><p>In particular, in a first set of experiments a real 550-mAh lithium battery has been discharged through an electronic load at a constant rate of 24 mA and the so obtained discharge curve has been used to obtain the model parameters. The emulator running the battery model has been initialized using the measured parameters and then connected to the same electronic load to emulate the battery discharge. Figure <xref rid="Fig9" ref-type="fig">9</xref> shows the comparison between the real discharge curve and the corresponding curves obtained by the emulator with and without the error compensation mechanism. In particular, the real discharge curve (the black line in the figure) shows a typical lithium battery discharge behavior with a discharge time of about 24 h and 28 min, while the emulated battery (the red line in the figure) exhausts its charge in about 24 h and 5 min. The uncompensated experiment, as expected, suffers of the underestimation of the supplied current so that the emulated battery needs about 25 h and 12 min to discharge itself.
<fig id="Fig9"><label>Fig. 9</label><caption xml:lang="en"><p>Comparison between the real battery discharge curve and the corresponding curves obtained by the emulator with and without the error compensation mechanism</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2016_55_Fig9_HTML.gif" id="MO9"/></fig></p><p>In order to increase realism to the testing conditions, the emulated battery has been used to power a VirtualSense node which has been programmed to continuously send broadcast packets to the wireless channel. During the execution, VirtualSense passes from a current consumption of about 24 mA, which corresponds to a packet transmission, to about 10 <italic>μ</italic>A in the standby state, in few milliseconds. Figure <xref rid="Fig10" ref-type="fig">10</xref> shows the real discharge curve (the black line) obtained by powering VirtualSense by means of a 550-mAh lithium battery compared with the emulated discharge curve. The real battery took about 31 h and 15 min to completely discharge while the emulated battery sustained the VirtualSense activity only for about 29 h and 43 min resulting in a gap of about 1 h and 32 min. Despite the sizable gap between the real and the emulated battery, the obtained results are completely in line with the performance of the battery model which declares an average error of about 10 %.
<fig id="Fig10"><label>Fig. 10</label><caption xml:lang="en"><p>Comparison between the discharge curve of a 550 mAh lithium battery and the emulated curve. The discharge has been made by powering a VirtualSense node programmed to continuously send broadcast packets to the wireless channel</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2016_55_Fig10_HTML.gif" id="MO10"/></fig></p></sec></sec><sec id="Sec18" sec-type="conclusion"><title>Conclusions</title><p>The design of effective networked embedded systems powered by energy harvesters poses several challenges at different architectural levels due to the variability and the unpredictability of the energy sources combined with the non-linear behavior of the powered devices. The combination of these two main factors makes it difficult to obtain reproducible testing conditions, thus prompting the need of novel solutions addressing these issues.</p><p>In this paper, we present a novel embedded hardware-software platform implementing an energy source emulator capable to run different energy source models for WSNs. The proposed device is characterized by a portable low-power, low-cost modular architecture that provides designers with a realistic, flexible, and repeatable testing solution.</p><p>Extensive experimental characterization confirms the validity of the proposed embedded emulator both from the accuracy point of view, showing a supplying current error which, in the worst case, does not exceed 7 %, and from the latency point of view which has been estimated on about 172 <italic>μ</italic>s. Realistic experiments conducted on a representative case study regarding the emulation of a lithium battery demonstrate that the hardware-software platform does not introduce any measurable reduction of the accuracy of the implemented model.</p></sec><sec id="Sec19"><title>Endnotes</title><p><sup>1</sup> The manufacturer does not give information which can be used to determine the cutoff frequency of the filter, but it has been determined experimentally to be about 1/30 Hz.</p></sec></body><back><ack><sec><title>Competing interests</title><p>The authors declare that they have no competing interests.</p></sec></ack><ref-list id="Bib1"><title>References</title><ref-list><ref id="CR1"><label>1</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Bogliolo</surname><given-names>A</given-names></name><name><surname>Lattanzi</surname><given-names>E</given-names></name><name><surname>Freschi</surname><given-names>V</given-names></name></person-group><article-title xml:lang="en">Idleness as a resource in energy-neutral WSNs</article-title><source><italic>ENSSys ’13: Proceedings of the 1st International Workshop on Energy Neutral Sensing Systems</italic></source><year>2013</year><publisher-loc>New York</publisher-loc><publisher-name>ACM</publisher-name><fpage>1</fpage><lpage>6</lpage><pub-id pub-id-type="doi">10.1145/2534208.2534214</pub-id></mixed-citation></ref><ref id="CR2"><label>2</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Bogliolo</surname><given-names>A</given-names></name><name><surname>Freschi</surname><given-names>V</given-names></name><name><surname>Lattanzi</surname><given-names>E</given-names></name><name><surname>Murphy</surname><given-names>AL</given-names></name><name><surname>Raza</surname><given-names>U</given-names></name></person-group><article-title xml:lang="en">Towards a true energetically sustainable WSN: a case study with prediction-based data collection and a wake-up receiver</article-title><source><italic>Proceedings of 9th IEEE International Symposium on Industrial Embedded Systems, SIES 2014</italic></source><year>2014</year><publisher-loc>New York</publisher-loc><publisher-name>IEEE</publisher-name><fpage>21</fpage><lpage>28</lpage></mixed-citation></ref><ref id="CR3"><label>3</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Raza</surname><given-names>U</given-names></name><name><surname>Bogliolo</surname><given-names>A</given-names></name><name><surname>Freschi</surname><given-names>V</given-names></name><name><surname>Lattanzi</surname><given-names>E</given-names></name><name><surname>Murphy</surname><given-names>AL</given-names></name></person-group><article-title xml:lang="en">A two-prong approach to energy-efficient WSNs: wake-up receivers plus dedicated, model-based sensing</article-title><source>Ad Hoc Netw</source><year>2016</year><volume>45</volume><fpage>1</fpage><lpage>12</lpage><pub-id pub-id-type="doi">10.1016/j.adhoc.2016.03.005</pub-id></mixed-citation></ref><ref id="CR4"><label>4</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Paradiso</surname><given-names>JA</given-names></name><name><surname>Starner</surname><given-names>T</given-names></name></person-group><article-title xml:lang="en">Energy scavenging for mobile and wireless electronics</article-title><source>IEEE Pervasive Comput</source><year>2005</year><volume>4</volume><issue>1</issue><fpage>18</fpage><lpage>27</lpage><pub-id pub-id-type="doi">10.1109/MPRV.2005.9</pub-id></mixed-citation></ref><ref id="CR5"><label>5</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Basagni</surname><given-names>S</given-names></name><name><surname>Naderi</surname><given-names>MY</given-names></name><name><surname>Petrioli</surname><given-names>C</given-names></name><name><surname>Spenza</surname><given-names>D</given-names></name></person-group><person-group person-group-type="editor"><name><surname>Basagni</surname><given-names>S</given-names></name><name><surname>Conti</surname><given-names>M</given-names></name><name><surname>Giordano</surname><given-names>S</given-names></name><name><surname>Stojmenovic</surname><given-names>I</given-names></name></person-group><article-title xml:lang="en">Wireless Sensor Networks with Energy Harvesting</article-title><source><italic>Mobile Ad Hoc Networking: Cutting Edge Directions, Second Edition</italic></source><year>2013</year><publisher-loc>Hoboken</publisher-loc><publisher-name>Wiley</publisher-name><fpage>701</fpage><lpage>736</lpage><pub-id pub-id-type="doi">10.1002/9781118511305.ch20</pub-id></mixed-citation></ref><ref id="CR6"><label>6</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Kansal</surname><given-names>A</given-names></name><name><surname>Srivastava</surname><given-names>MB</given-names></name></person-group><article-title xml:lang="en">An environmental energy harvesting framework for sensor networks</article-title><source><italic>Low Power Electronics and Design, 2003. ISLPED’03. Proceedings of the 2003 International Symposium On</italic></source><year>2003</year><publisher-loc>New York</publisher-loc><publisher-name>IEEE</publisher-name><fpage>481</fpage><lpage>486</lpage></mixed-citation></ref><ref id="CR7"><label>7</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Levis</surname><given-names>P</given-names></name><name><surname>Lee</surname><given-names>N</given-names></name><name><surname>Welsh</surname><given-names>M</given-names></name><name><surname>Culler</surname><given-names>D</given-names></name></person-group><article-title xml:lang="en">Tossim: accurate and scalable simulation of entire TinyOS applications</article-title><source><italic>Proceedings of the 1st International Conference on Embedded Networked Sensor Systems. SenSys ’03</italic></source><year>2003</year><publisher-loc>New York</publisher-loc><publisher-name>ACM</publisher-name><fpage>126</fpage><lpage>137</lpage><pub-id pub-id-type="doi">10.1145/958491.958506</pub-id><comment>http://doi.acm.org/10.1145/958491.958506</comment></mixed-citation></ref><ref id="CR8"><label>8</label><mixed-citation publication-type="other">F Österlind, A sensor network simulator for the contiki OS. Swedish Institute of Computer Science SICS Report (2009).</mixed-citation></ref><ref id="CR9"><label>9</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Sobeih</surname><given-names>A</given-names></name><name><surname>Hou</surname><given-names>JC</given-names></name><name><surname>Kung</surname><given-names>L-C</given-names></name><name><surname>Li</surname><given-names>N</given-names></name><name><surname>Zhang</surname><given-names>H</given-names></name><name><surname>Chen</surname><given-names>W-P</given-names></name><name><surname>Tyan</surname><given-names>H-Y</given-names></name><name><surname>Lim</surname><given-names>H</given-names></name></person-group><article-title xml:lang="en">J-sim: a simulation and emulation environment for wireless sensor networks</article-title><source>IEEE Wirel. Commun</source><year>2006</year><volume>13</volume><issue>4</issue><fpage>104</fpage><lpage>119</lpage><pub-id pub-id-type="doi">10.1109/MWC.2006.1678171</pub-id></mixed-citation></ref><ref id="CR10"><label>10</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Dondi</surname><given-names>D</given-names></name><name><surname>Bertacchini</surname><given-names>A</given-names></name><name><surname>Brunelli</surname><given-names>D</given-names></name><name><surname>Larcher</surname><given-names>L</given-names></name><name><surname>Benini</surname><given-names>L</given-names></name></person-group><article-title xml:lang="en">Modeling and optimization of a solar energy harvester system for self-powered wireless sensor networks</article-title><source>IEEE Trans. Ind. Electron</source><year>2008</year><volume>55</volume><issue>7</issue><fpage>2759</fpage><lpage>2766</lpage><pub-id pub-id-type="doi">10.1109/TIE.2008.924449</pub-id></mixed-citation></ref><ref id="CR11"><label>11</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Merrett</surname><given-names>GV</given-names></name><name><surname>White</surname><given-names>NM</given-names></name><name><surname>Harris</surname><given-names>NR</given-names></name><name><surname>Al-Hashimi</surname><given-names>BM</given-names></name></person-group><article-title xml:lang="en">Energy-aware simulation for wireless sensor networks</article-title><source><italic>Sensor, Mesh and Ad Hoc Communications and Networks, 2009. SECON’09. 6th Annual IEEE Communications Society Conference On</italic></source><year>2009</year><publisher-loc>New York</publisher-loc><publisher-name>IEEE</publisher-name><fpage>1</fpage><lpage>8</lpage><pub-id pub-id-type="doi">10.1109/SAHCN.2009.5168932</pub-id></mixed-citation></ref><ref id="CR12"><label>12</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Climent</surname><given-names>S</given-names></name><name><surname>Sanchez</surname><given-names>A</given-names></name><name><surname>Blanc</surname><given-names>S</given-names></name><name><surname>Capella</surname><given-names>JV</given-names></name><name><surname>Ors</surname><given-names>R</given-names></name></person-group><article-title xml:lang="en">Wireless sensor network with energy harvesting: modeling and simulation based on a practical architecture using real radiation levels</article-title><source>Concurr. Comput. Pract. Exper.</source><year>2016</year><volume>28</volume><fpage>1812</fpage><lpage>1830</lpage><pub-id pub-id-type="doi">10.1002/cpe.3151</pub-id></mixed-citation></ref><ref id="CR13"><label>13</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Chou</surname><given-names>PH</given-names></name><name><surname>Park</surname><given-names>C</given-names></name><name><surname>Park</surname><given-names>J</given-names></name><name><surname>Pham</surname><given-names>K</given-names></name><name><surname>Liu</surname><given-names>J</given-names></name></person-group><article-title xml:lang="en">B#: a battery emulator and power profiling instrument</article-title><source><italic>Proceedings of the 2003 International Symposium on Low Power Electronics and Design</italic></source><year>2003</year><publisher-loc>New York</publisher-loc><publisher-name>ACM</publisher-name><fpage>288</fpage><lpage>293</lpage></mixed-citation></ref><ref id="CR14"><label>14</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Doyle</surname><given-names>M</given-names></name><name><surname>Fuller</surname><given-names>T</given-names></name><name><surname>Newman</surname><given-names>J</given-names></name></person-group><article-title xml:lang="en">Modeling of galvanostatic charge and discharge of the lithium/ polymer/insertion cell</article-title><source>J. Electrochem. Soc.</source><year>1993</year><volume>140</volume><issue>6</issue><fpage>1526</fpage><lpage>1533</lpage><pub-id pub-id-type="doi">10.1149/1.2221597</pub-id></mixed-citation></ref><ref id="CR15"><label>15</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Li</surname><given-names>D-J</given-names></name><name><surname>Chou</surname><given-names>PH</given-names></name></person-group><article-title xml:lang="en">Maximizing efficiency of solar-powered systems by load matching</article-title><source><italic>Low Power Electronics and Design, 2004. ISLPED’04. Proceedings of the 2004 International Symposium On</italic></source><year>2004</year><publisher-loc>New York</publisher-loc><publisher-name>IEEE</publisher-name><fpage>162</fpage><lpage>167</lpage></mixed-citation></ref><ref id="CR16"><label>16</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Atia</surname><given-names>Y</given-names></name><name><surname>Zahran</surname><given-names>M</given-names></name><name><surname>Al-Hossain</surname><given-names>A</given-names></name></person-group><article-title xml:lang="en">Solar cell emulator and solar cell characteristics measurements in dark and illuminated conditions</article-title><source>WSEAS Trans Syst. Control</source><year>2011</year><volume>6</volume><issue>4</issue><fpage>125</fpage><lpage>135</lpage></mixed-citation></ref><ref id="CR17"><label>17</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Lee</surname><given-names>W</given-names></name><name><surname>Kim</surname><given-names>Y</given-names></name><name><surname>Wang</surname><given-names>Y</given-names></name><name><surname>Chang</surname><given-names>N</given-names></name><name><surname>Pedram</surname><given-names>M</given-names></name><name><surname>Han</surname><given-names>S</given-names></name></person-group><article-title xml:lang="en">Versatile high-fidelity photovoltaic module emulation system</article-title><source><italic>Proceedings of the International Symposium on Low Power Electronics and Design</italic></source><year>2011</year><publisher-loc>New York</publisher-loc><publisher-name>IEEE</publisher-name><fpage>91</fpage><lpage>96</lpage><pub-id pub-id-type="doi">10.1109/ISLPED.2011.5993613</pub-id></mixed-citation></ref><ref id="CR18"><label>18</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Thale</surname><given-names>S</given-names></name><name><surname>Wandhare</surname><given-names>R</given-names></name><name><surname>Agarwal</surname><given-names>V</given-names></name></person-group><article-title xml:lang="en">A novel low cost portable integrated solar pv, fuel cell and battery emulator with fast tracking algorithm</article-title><source><italic>Photovoltaic Specialist Conference (PVSC), 2014 IEEE 40th</italic></source><year>2014</year><publisher-loc>New York</publisher-loc><publisher-name>IEEE</publisher-name><fpage>3138</fpage><lpage>3143</lpage><pub-id pub-id-type="doi">10.1109/PVSC.2014.6925602</pub-id></mixed-citation></ref><ref id="CR19"><label>19</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Bobovych</surname><given-names>S</given-names></name><name><surname>Banerjee</surname><given-names>N</given-names></name><name><surname>Robucci</surname><given-names>R</given-names></name><name><surname>Parkerson</surname><given-names>JP</given-names></name><name><surname>Schmandt</surname><given-names>J</given-names></name><name><surname>Patel</surname><given-names>C</given-names></name></person-group><article-title xml:lang="en">SunaPlayer</article-title><source><italic>Proceedings of the 14th International Conference on Information Processing in Sensor Networks - IPSN ’15</italic></source><year>2015</year><publisher-loc>New York</publisher-loc><publisher-name>ACM Press</publisher-name><fpage>59</fpage><lpage>70</lpage><comment>http://dl.acm.org/citation.cfm?doid=2737095.2737110</comment></mixed-citation></ref><ref id="CR20"><label>20</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Chen</surname><given-names>C-C</given-names></name><name><surname>Chang</surname><given-names>H-C</given-names></name><name><surname>Kuo</surname><given-names>C-C</given-names></name><name><surname>Lin</surname><given-names>C-C</given-names></name></person-group><article-title xml:lang="en">Programmable energy source emulator for photovoltaic panels considering partial shadow effect</article-title><source>Energy</source><year>2013</year><volume>54</volume><fpage>174</fpage><lpage>183</lpage><pub-id pub-id-type="doi">10.1016/j.energy.2013.01.060</pub-id></mixed-citation></ref><ref id="CR21"><label>21</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>González-Medina</surname><given-names>R</given-names></name><name><surname>Patrao</surname><given-names>I</given-names></name><name><surname>Garcerá</surname><given-names>G</given-names></name><name><surname>Figueres</surname><given-names>E</given-names></name></person-group><article-title xml:lang="en">A low-cost photovoltaic emulator for static and dynamic evaluation of photovoltaic power converters and facilities</article-title><source>Prog. Photovolt. Res. Appl</source><year>2014</year><volume>22</volume><issue>2</issue><fpage>227</fpage><lpage>241</lpage><pub-id pub-id-type="doi">10.1002/pip.2243</pub-id></mixed-citation></ref><ref id="CR22"><label>22</label><mixed-citation publication-type="other">H Zhang, M Salajegheh, K Fu, J Sorber, in <italic>Proceedings of the 4th Workshop on Power-Aware Computing and Systems - HotPower ’11</italic>. Ekho: bridging the gap between simulation and reality in tiny energy-harvesting sensors, (2011), pp. 1–5. <ext-link xlink:href="http://dl.acm.org/citation.cfm?doid=2039252.2039261" ext-link-type="uri">http://dl.acm.org/citation.cfm?doid=2039252.2039261</ext-link>. Accessed Sept 2016.</mixed-citation></ref><ref id="CR23"><label>23</label><mixed-citation publication-type="other">J Hester, T Scott, J Sorber, in <italic>Proceedings of the 12th ACM Conference on Embedded Network Sensor Systems - SenSys ’14</italic>. Ekho: realistic and repeatable experimentation for tiny energy-harvesting sensors, (2014), pp. 1–15. <ext-link xlink:href="http://dl.acm.org/citation.cfm?doid=2668332.2668336" ext-link-type="uri">http://dl.acm.org/citation.cfm?doid=2668332.2668336</ext-link>. Accessed Sept 2016.</mixed-citation></ref><ref id="CR24"><label>24</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>De Mil</surname><given-names>P</given-names></name><name><surname>Jooris</surname><given-names>B</given-names></name><name><surname>Tytgat</surname><given-names>L</given-names></name><name><surname>Catteeuw</surname><given-names>R</given-names></name><name><surname>Moerman</surname><given-names>I</given-names></name><name><surname>Demeester</surname><given-names>P</given-names></name><name><surname>Kamerman</surname><given-names>A</given-names></name></person-group><article-title xml:lang="en">Design and implementation of a generic energy-harvesting framework applied to the evaluation of a large-scale electronic shelf-labeling wireless sensor network</article-title><source>EURASIP J. Wirel. Commun. Netw</source><year>2010</year><volume>2010</volume><fpage>7:1</fpage><lpage>7:12</lpage><pub-id pub-id-type="doi">10.1155/2010/343690</pub-id></mixed-citation></ref><ref id="CR25"><label>25</label><mixed-citation publication-type="other">Source Measure Unit. Natl. Instrum. <ext-link xlink:href="http://www.ni.com/pdf/products/us/cat_Ni_4130.pdf" ext-link-type="uri">http://www.ni.com/pdf/products/us/cat_Ni_4130.pdf</ext-link>. Accessed 23 June 2016.</mixed-citation></ref><ref id="CR26"><label>26</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Petricca</surname><given-names>M</given-names></name><name><surname>Shin</surname><given-names>D</given-names></name><name><surname>Bocca</surname><given-names>A</given-names></name><name><surname>Macii</surname><given-names>A</given-names></name><name><surname>Macii</surname><given-names>E</given-names></name><name><surname>Poncino</surname><given-names>M</given-names></name></person-group><article-title xml:lang="en">An automated framework for generating variable-accuracy battery models from datasheet information</article-title><source><italic>IEEE International Symposium on Low Power Electronics and Design (ISLPED), 2013</italic></source><year>2013</year><publisher-loc>New York</publisher-loc><publisher-name>IEEE</publisher-name><fpage>365</fpage><lpage>370</lpage></mixed-citation></ref><ref id="CR27"><label>27</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Tremblay</surname><given-names>O</given-names></name><name><surname>Dessaint</surname><given-names>L-A</given-names></name></person-group><article-title xml:lang="en">Experimental validation of a battery dynamic model for EV applications</article-title><source>World. Electric. Veh. J</source><year>2009</year><volume>3</volume><issue>1</issue><fpage>1</fpage><lpage>10</lpage></mixed-citation></ref><ref id="CR28"><label>28</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Brunelli</surname><given-names>D</given-names></name><name><surname>Dondi</surname><given-names>D</given-names></name><name><surname>Bertacchini</surname><given-names>A</given-names></name><name><surname>Larcher</surname><given-names>L</given-names></name><name><surname>Pavan</surname><given-names>P</given-names></name><name><surname>Benini</surname><given-names>L</given-names></name></person-group><article-title xml:lang="en">Photovoltaic scavenging systems: modeling and optimization</article-title><source>Microelectron. J</source><year>2009</year><volume>40</volume><issue>9</issue><fpage>1337</fpage><lpage>1344</lpage><pub-id pub-id-type="doi">10.1016/j.mejo.2008.08.013</pub-id></mixed-citation></ref><ref id="CR29"><label>29</label><mixed-citation publication-type="other">S Bal, A Anurag, M Nanda, S Sourav, Comprehensive analysis and experimental validation of an improved mathematical modeling of photovoltaic array. Adv. Power Electron. <bold>2015:</bold> (2015).</mixed-citation></ref><ref id="CR30"><label>30</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Ishaque</surname><given-names>K</given-names></name><name><surname>Salam</surname><given-names>Z</given-names></name><name><surname>Taheri</surname><given-names>H</given-names></name></person-group><article-title xml:lang="en">Simple, fast and accurate two-diode model for photovoltaic modules</article-title><source>Sol. Energy Mater. Sol. Cells</source><year>2011</year><volume>95</volume><issue>2</issue><fpage>586</fpage><lpage>594</lpage><pub-id pub-id-type="doi">10.1016/j.solmat.2010.09.023</pub-id></mixed-citation></ref><ref id="CR31"><label>31</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Chen</surname><given-names>M</given-names></name><name><surname>Rosendahl</surname><given-names>LA</given-names></name><name><surname>Condra</surname><given-names>TJ</given-names></name><name><surname>Pedersen</surname><given-names>JK</given-names></name></person-group><article-title xml:lang="en">Numerical modeling of thermoelectric generators with varing material properties in a circuit simulator</article-title><source>IEEE Trans. Energy Convers</source><year>2009</year><volume>24</volume><issue>1</issue><fpage>112</fpage><lpage>124</lpage><pub-id pub-id-type="doi">10.1109/TEC.2008.2005310</pub-id></mixed-citation></ref><ref id="CR32"><label>32</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Kim</surname><given-names>S</given-names></name></person-group><article-title xml:lang="en">Analysis and modeling of effective temperature differences and electrical parameters of thermoelectric generators</article-title><source>Appl. Energy</source><year>2013</year><volume>102</volume><fpage>1458</fpage><lpage>1463</lpage><pub-id pub-id-type="doi">10.1016/j.apenergy.2012.09.006</pub-id></mixed-citation></ref><ref id="CR33"><label>33</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Tsai</surname><given-names>H-L</given-names></name><name><surname>Lin</surname><given-names>J-M</given-names></name></person-group><article-title xml:lang="en">Model building and simulation of thermoelectric module using MATLAB/Simulink</article-title><source>J. Elec. Materi</source><year>2010</year><volume>39</volume><issue>9</issue><fpage>2105</fpage><lpage>2111</lpage><pub-id pub-id-type="other" assigning-authority="American Mathematical Society">2751964</pub-id><pub-id pub-id-type="doi">10.1007/s11664-009-0994-x</pub-id></mixed-citation></ref><ref id="CR34"><label>34</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Montecucco</surname><given-names>A</given-names></name><name><surname>Knox</surname><given-names>AR</given-names></name></person-group><article-title xml:lang="en">Accurate simulation of thermoelectric power generating systems</article-title><source>Appl. Energy</source><year>2014</year><volume>118</volume><fpage>166</fpage><lpage>172</lpage><pub-id pub-id-type="doi">10.1016/j.apenergy.2013.12.028</pub-id></mixed-citation></ref><ref id="CR35"><label>35</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Rossi</surname><given-names>M</given-names></name><name><surname>Rizzon</surname><given-names>L</given-names></name><name><surname>Fait</surname><given-names>M</given-names></name><name><surname>Passerone</surname><given-names>R</given-names></name><name><surname>Brunelli</surname><given-names>D</given-names></name></person-group><article-title xml:lang="en">Energy neutral wireless sensing for server farms monitoring</article-title><source>IEEE J. Emerg. Sel. Top. Circ. Syst</source><year>2014</year><volume>4</volume><issue>3</issue><fpage>324</fpage><lpage>334</lpage><pub-id pub-id-type="doi">10.1109/JETCAS.2014.2337171</pub-id></mixed-citation></ref><ref id="CR36"><label>36</label><mixed-citation publication-type="other">USB-Friendly Li-Ion Battery Charger and Power-Path Management IC, Vout 200mV Above Vbat. Tex Instrum. <ext-link xlink:href="http://www.ti.com/product/bq24072?qgpn=bq24072" ext-link-type="uri">http://www.ti.com/product/bq24072?qgpn=bq24072</ext-link>. Accessed 20 June 2016.</mixed-citation></ref><ref id="CR37"><label>37</label><mixed-citation publication-type="other">Atmel SMART ARM-based Flash MCU, Atmel Corporation. <ext-link xlink:href="http://www.atmel.com/devices/ATSAM4E16E.aspx" ext-link-type="uri">http://www.atmel.com/devices/ATSAM4E16E.aspx</ext-link>. Accessed 10 May 2016.</mixed-citation></ref><ref id="CR38"><label>38</label><mixed-citation publication-type="other">5V Micropower Low-Dropout Voltage Regulator. Tex. Instrum. <ext-link xlink:href="http://www.ti.com/product/LP2954" ext-link-type="uri">http://www.ti.com/product/LP2954</ext-link>. Accessed 10 May 2016.</mixed-citation></ref><ref id="CR39"><label>39</label><mixed-citation publication-type="other">1.5A Low Dropout Positive Regulators. Linear Technol. <ext-link xlink:href="http://www.linear.com/product/LT1086" ext-link-type="uri">http://www.linear.com/product/LT1086</ext-link>. Accessed 10 May 2016.</mixed-citation></ref><ref id="CR40"><label>40</label><mixed-citation publication-type="other">Precision Low Dropout Voltage Reference. Tex. Instrum. <ext-link xlink:href="http://www.ti.com/product/LM4132" ext-link-type="uri">http://www.ti.com/product/LM4132</ext-link>. Accessed 10 May 2016.</mixed-citation></ref><ref id="CR41"><label>41</label><mixed-citation publication-type="other">Ultra-Low Offset/Drift, Low-Noise, Precision SOT23 Amplifiers. Maxim Integr. <ext-link xlink:href="https://www.maximintegrated.com/en/datasheet/index.mvp/id/3407" ext-link-type="uri">https://www.maximintegrated.com/en/datasheet/index.mvp/id/3407</ext-link>. Accessed 11 May 2016.</mixed-citation></ref><ref id="CR42"><label>42</label><mixed-citation publication-type="other">Rail-to-Rail, High Output Current Amplifier. Analog Devices. <ext-link xlink:href="http://www.analog.com/media/en/technical-documentation/data-sheets/AD8397.pdf" ext-link-type="uri">http://www.analog.com/media/en/technical-documentation/data-sheets/AD8397.pdf</ext-link>. Accessed 11 May 2016.</mixed-citation></ref><ref id="CR43"><label>43</label><mixed-citation publication-type="other">Micropower, Single-Supply, Rail-to-Rail Precision Differential Amplifiers. Maxim Integr. <ext-link xlink:href="https://www.maximintegrated.com/en/products/analog/amplifiers/MAX4199.html" ext-link-type="uri">https://www.maximintegrated.com/en/products/analog/amplifiers/MAX4199.html</ext-link>. Accessed 11 May 2016.</mixed-citation></ref><ref id="CR44"><label>44</label><mixed-citation publication-type="other">PXI-4071 Datasheet. Natl. Instrum. <ext-link xlink:href="http://www.ni.com/pdf/products/us/cat_NIPXI4071.pdf" ext-link-type="uri">http://www.ni.com/pdf/products/us/cat_NIPXI4071.pdf</ext-link>. Accessed 10 May 2016.</mixed-citation></ref><ref id="CR45"><label>45</label><mixed-citation publication-type="other">PC-6251 Datasheet. Natl. Instrum. <ext-link xlink:href="http://sine.ni.com/nips/cds/print/p/lang/en/nid/14124" ext-link-type="uri">http://sine.ni.com/nips/cds/print/p/lang/en/nid/14124</ext-link>. Accessed 10 May 2016.</mixed-citation></ref><ref id="CR46"><label>46</label><mixed-citation publication-type="other">BNC-2120 Datasheet. Natl. Instrum. <ext-link xlink:href="http://sine.ni.com/nips/cds/view/p/lang/en/nid/10712" ext-link-type="uri">http://sine.ni.com/nips/cds/view/p/lang/en/nid/10712</ext-link>. Accessed 10 May 2016.</mixed-citation></ref><ref id="CR47"><label>47</label><mixed-citation publication-type="other">TG, 2000 Datasheet. Aim i-TT. <ext-link xlink:href="http://www.aimtti.com/sites/default/files/brochure/gen-tg1000_2000-4p_0.pdf" ext-link-type="uri">http://www.aimtti.com/sites/default/files/brochure/gen-tg1000_2000-4p_0.pdf</ext-link>. Accessed 10 May 2016.</mixed-citation></ref><ref id="CR48"><label>48</label><mixed-citation publication-type="other">NGMO, 2 Datasheet. Rohde &amp; Schwarz. <ext-link xlink:href="http://www.rohde-schwarz.it/file_1800/ngmo2_21_web-LF.pdf" ext-link-type="uri">http://www.rohde-schwarz.it/file_1800/ngmo2_21_web-LF.pdf</ext-link>. Accessed 10 May 2016.</mixed-citation></ref><ref id="CR49"><label>49</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Lattanzi</surname><given-names>E</given-names></name><name><surname>Bogliolo</surname><given-names>A</given-names></name></person-group><article-title xml:lang="en">Virtualsense: a java-based open platform for ultra-low-power wireless sensor nodes</article-title><source>Int. J. Distrib. Sensor Netw</source><year>2012</year><volume>2012</volume><fpage>16</fpage><comment>Article ID 154737</comment></mixed-citation></ref></ref-list></ref-list></back></article></records><facets><facet name="subject"><facet-value count="1">Circuits and Systems</facet-value><facet-value count="1">Control Structures and Microprogramming</facet-value><facet-value count="1">Electronic Circuits and Devices</facet-value><facet-value count="1">Engineering</facet-value><facet-value count="1">Signal,Image and Speech Processing</facet-value></facet><facet name="keyword"><facet-value count="1">Energy emulator</facet-value><facet-value count="1">Energy harvesting</facet-value><facet-value count="1">Wireless sensor networks</facet-value></facet><facet name="pub"><facet-value count="1">EURASIP Journal on Embedded Systems</facet-value></facet><facet name="year"><facet-value count="1">2016</facet-value></facet><facet name="country"><facet-value count="1">Italy</facet-value></facet><facet name="type"><facet-value count="1">Journal</facet-value></facet></facets></response>
