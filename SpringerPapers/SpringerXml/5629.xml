<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="/resources/spdi-openaccess-jats.xsl"?>
<!DOCTYPE response [
	
<!ENTITY % article SYSTEM "http://jats.nlm.nih.gov/archiving/1.2/JATS-archivearticle1.dtd">
<!ENTITY % book-part-wrapper SYSTEM "http://jats.nlm.nih.gov/extensions/bits/2.0/BITS-book2.dtd">
	]><response><apiMessage>This XML was provided by Springer Nature</apiMessage><query>doi:10.1007/s40565-015-0123-1</query><apiKey>87ba7cb21f89ce78154df796840621f4</apiKey><result><total>1</total><start>1</start><pageLength>2</pageLength><recordsDisplayed>1</recordsDisplayed></result><records><article dtd-version="1.2" article-type="research-article" xml:lang="en" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink"><front><journal-meta><journal-id journal-id-type="publisher-id">40565</journal-id><journal-title-group><journal-title>Journal of Modern Power Systems and Clean Energy</journal-title><abbrev-journal-title abbrev-type="publisher">J. Mod. Power Syst. Clean Energy</abbrev-journal-title></journal-title-group><issn pub-type="ppub">2196-5625</issn><issn pub-type="epub">2196-5420</issn><publisher><publisher-name>Springer Berlin Heidelberg</publisher-name><publisher-loc>Berlin/Heidelberg</publisher-loc></publisher></journal-meta><article-meta><article-id pub-id-type="publisher-id">s40565-015-0123-1</article-id><article-id pub-id-type="manuscript">123</article-id><article-id pub-id-type="doi">10.1007/s40565-015-0123-1</article-id><article-categories><subj-group subj-group-type="heading"><subject>Special Issue on Electric Vehicles and Their Integration with Power Grid</subject></subj-group></article-categories><title-group><article-title xml:lang="en">Energy management with dual droop plus frequency dividing coordinated control strategy for electric vehicle applications</article-title></title-group><contrib-group><contrib contrib-type="author" corresp="yes"><name><surname>LI</surname><given-names>Wuhua</given-names></name><address><email>woohualee@zju.edu.cn</email></address><xref ref-type="aff" rid="Aff1">1</xref><xref ref-type="corresp" rid="IDs4056501501231_cor1">a</xref><bio><sec><title>Wuhua LI</title><p id="Par1">received the B.Sc. and Ph.D. degree in Applied Power Electronics and Electrical Engineering from Zhejiang University, Hangzhou, China, in 2002 and 2008, respectively. From September 2004 to March 2005, he was a Research Intern, and from January 2007 to June 2008, a Research Assistant in GE Global Research Center, Shanghai, China. From July 2008 to April 2010, he joined the College of Electrical Engineering, Zhejiang University as a Post doctor. In May 2010, he became a faculty member at Zhejiang University as a Lecturer. In December 2010, he was promoted as an Associate Professor. Since December 2013, he has been a Full Professor at Zhejiang University. From July 2010 to September 2011, he was a Ryerson University Postdoctoral Fellow with the Department of Electrical and Computer Engineering, Ryerson University, Toronto, ON, Canada. His research interests include high power devices, advanced power converters and system operation optimization for renewable energy based power systems. Dr. Li has published more than 100 peer-reviewed technical papers and holds over 30 issued/pending patents. Due to his excellent teaching and research contributions, Dr. Li received the 2011 TOP TEN Excellent Young Staff Award and the 2012 Distinguished Young Scholar from Zhejiang University, the 2012 Outstanding Young Researcher Award from Zhejiang Province, the 2012 Delta Young Scholar from Delta Environmental &amp; Educational Foundation and the 2012 National Outstanding Young Scholar. He received three Scientific and Technological Achievements Awards from Zhejiang Provincial Government and the State Educational Ministry of China in 2009 and 2011, respectively.</p></sec></bio></contrib><contrib contrib-type="author" id="Au2"><name><surname>XU</surname><given-names>Chi</given-names></name><xref ref-type="aff" rid="Aff1">1</xref><bio><sec><title>Chi XU</title><p id="Par2">was born in Jiangxi, China in 1990. He received the B.S. degrees from the College of Electrical and Electronic Engineering, Huazhong University of Science and Technology, Wuhan, China, in 2012. He is currently working toward the M.S. degree in the College of Electrical Engineering, Zhejiang University. His research interests include advanced power conversion and control for renewable energy systems.</p></sec></bio></contrib><contrib contrib-type="author" id="Au3"><name><surname>YU</surname><given-names>Hongbin</given-names></name><xref ref-type="aff" rid="Aff1">1</xref><bio><sec><title>Hongbin YU</title><p id="Par3">was born in Hunan, China, in 1987. He received the B.Sc. and M.Sc. degrees from the College of Electrical Engineering, Zhejiang University, Hangzhou, China, in 2010 and 2013. His current research interests include bidirectional dc–dc converter and energy storage system.</p></sec></bio></contrib><contrib contrib-type="author" id="Au4"><name><surname>GU</surname><given-names>Yunjie</given-names></name><xref ref-type="aff" rid="Aff1">1</xref><bio><sec><title>Yunjie GU</title><p id="Par4">was born in Hebei, China, in 1987. He received the B.Sc. degree from the Department of Electrical Engineering, Zhejiang University, Hangzhou, China, in 2010, where he is currently working toward the Ph.D. degree in electrical engineering. From May 2011 to January 2012, he was a Research Intern at GE Global Research Center, Shanghai, China. From July to September 2013, he was a Student Visitor at Newcastle University, Newcastle upon Tyne, U.K. His research interests include control and networking of power conversion systems.</p></sec></bio></contrib><contrib contrib-type="author" id="Au5"><name><surname>HE</surname><given-names>Xiangning</given-names></name><xref ref-type="aff" rid="Aff1">1</xref><bio><sec><title>Xiangning HE</title><p id="Par5">received the B.Sc. and M.Sc. degrees from the Nanjing University of Aeronautical and Astronautical, Nanjing, China, in 1982 and 1985, respectively, and the Ph.D. degree from Zhejiang University, Hangzhou, China, in 1989. From 1985 to 1986, he was an Assistant Engineer at the 608 Institute of Aeronautical Industrial General Company, Zhuzhou, China. From 1989 to 1991, he was a Lecturer at Zhejiang University. In 1991, he obtained a Fellowship from the Royal Society of U.K., and conducted research in the Department of Computing and Electrical Engineering, Heriot-Watt University, Edinburgh, U.K., as a Postdoctoral Research Fellow for two years. In 1994, he joined Zhejiang University as an Associate Professor. Since 1996, he has been a Full Professor in the College of Electrical Engineering, Zhejiang University. He was the Director of the Power Electronics Research Institute and the Head of the Department of Applied Electronics, and he is currently the Vice Dean of the College of Electrical Engineering, Zhejiang University. His research interests are power electronics and their industrial applications. He is the author or coauthor of more than 280 papers and one book “Theory and Applications of Multi-level Converters.” He holds 22 patents. Dr. He received the 1989 Excellent Ph.D. Graduate Award, the 1995 Elite Prize Excellence Award, the 1996 Outstanding Young Staff Member Award and 2006 Excellent Staff Award from Zhejiang University for his teaching and research contributions. He received seven Scientific and Technological Achievements Awards from Zhejiang Provincial Government and the State Educational Ministry of China in 1998, 2002, 2009 and 2011 respectively, and six Excellent Paper Awards. He is a Fellow of the IEEE and has been appointed as the IEEE Distinguished Lecturer by the IEEE Power Electronics Society, in 2011. He is also a Fellow of the Institution of Engineering and Technology (formerly IEE), U.K.</p></sec></bio></contrib><aff id="Aff1"><label>1</label><institution-wrap><institution-id institution-id-type="GRID">grid.13402.34</institution-id><institution-id institution-id-type="ISNI">000000041759700X</institution-id><institution content-type="org-name">Zhejiang University</institution></institution-wrap><addr-line content-type="postcode">310027</addr-line><addr-line content-type="city">Hangzhou</addr-line><country country="CN">China</country></aff></contrib-group><author-notes><corresp id="IDs4056501501231_cor1"><label>a</label><email>woohualee@zju.edu.cn</email></corresp></author-notes><pub-date date-type="pub" publication-format="electronic"><day>14</day><month>5</month><year>2015</year></pub-date><pub-date date-type="pub" publication-format="print"><month>6</month><year>2015</year></pub-date><volume>3</volume><issue seq="7">2</issue><issue-title>Special Issue on Electric Vehicles and Their Integration with Power Grid</issue-title><fpage>212</fpage><lpage>220</lpage><history><date date-type="registration"><day>10</day><month>4</month><year>2015</year></date><date date-type="received"><day>11</day><month>11</month><year>2014</year></date><date date-type="accepted"><day>10</day><month>4</month><year>2015</year></date><date date-type="online"><day>14</day><month>5</month><year>2015</year></date></history><permissions><copyright-statement content-type="compact">© The Author(s) 2015</copyright-statement><copyright-year>2015</copyright-year><copyright-holder>The Author(s)</copyright-holder><license license-type="open-access" xlink:href="http://creativecommons.org/licenses/by/4.0/"><license-p><bold>Open Access</bold>This article is distributed under the terms of the Creative Commons Attribution 4.0 International License (http://creativecommons.org/licenses/by/4.0/), which permits unrestricted use, distribution, and reproduction in any medium, provided you give appropriate credit to the original author(s) and the source, provide a link to the Creative Commons license, and indicate if changes were made.</license-p></license></permissions><abstract xml:lang="en" id="Abs1"><title>Abstract</title><p id="Par7">In this paper, a dual droop-frequency diving coordinated control strategy is proposed for electric vehicle (EV) applications, where the hybrid energy storage system (HESS) with supercapacitors and batteries is integrated to prolong the life time of storage elements. The dynamic power allocation between the supercapacitor and batteries are obtained through the voltage cascaded control, upon which the high and low frequency power fluctuation are absorbed by the supercapacitors and batteries respectively to fully exploit the advantages of the supercapacitors and batteries. Moreover, the power capacity is scaled up by connecting storage blocks in parallel. A dual droop control scheme for parallel-connected energy storage system and its operation principle is introduced on the aspect of current sharing characteristic and state-of-charging (SOC) management. After detailed analysis and formula derivation, the corresponding loop parameters are designed. Through this control method, the current sharing performance is ensured and each block makes the self-adaptive adjustment according to their SOC. Consequently, the load power can be shared effectively, which helps to avoid the over-charge/over-discharge operation and contributes to the life cycle of the energy storage system. Each module is autonomous controlled without the necessity of communication, which is easy, economic and effective to realize. Finally, the simulation and experimental results are exhibited to verify the effectiveness of the proposed control scheme.</p></abstract><kwd-group xml:lang="en"><title>Keywords</title><kwd>Dual droop control</kwd><kwd>Frequency diving coordinated control</kwd><kwd>Hybrid energy storage system</kwd><kwd>Electric vehicle</kwd></kwd-group><custom-meta-group><custom-meta><meta-name>publisher-imprint-name</meta-name><meta-value>Springer</meta-value></custom-meta><custom-meta><meta-name>volume-issue-count</meta-name><meta-value>4</meta-value></custom-meta><custom-meta><meta-name>issue-article-count</meta-name><meta-value>15</meta-value></custom-meta><custom-meta><meta-name>issue-toc-levels</meta-name><meta-value>0</meta-value></custom-meta><custom-meta><meta-name>issue-pricelist-year</meta-name><meta-value>2015</meta-value></custom-meta><custom-meta><meta-name>issue-copyright-holder</meta-name><meta-value>The Author(s)</meta-value></custom-meta><custom-meta><meta-name>issue-copyright-year</meta-name><meta-value>2015</meta-value></custom-meta><custom-meta><meta-name>article-contains-esm</meta-name><meta-value>No</meta-value></custom-meta><custom-meta><meta-name>article-numbering-style</meta-name><meta-value>ContentOnly</meta-value></custom-meta><custom-meta><meta-name>article-registration-date-year</meta-name><meta-value>2015</meta-value></custom-meta><custom-meta><meta-name>article-registration-date-month</meta-name><meta-value>4</meta-value></custom-meta><custom-meta><meta-name>article-registration-date-day</meta-name><meta-value>10</meta-value></custom-meta><custom-meta><meta-name>article-toc-levels</meta-name><meta-value>0</meta-value></custom-meta><custom-meta><meta-name>toc-levels</meta-name><meta-value>0</meta-value></custom-meta><custom-meta><meta-name>volume-type</meta-name><meta-value>Regular</meta-value></custom-meta><custom-meta><meta-name>journal-product</meta-name><meta-value>NonStandardArchiveJournal</meta-value></custom-meta><custom-meta><meta-name>numbering-style</meta-name><meta-value>ContentOnly</meta-value></custom-meta><custom-meta><meta-name>article-grants-type</meta-name><meta-value>OpenChoice</meta-value></custom-meta><custom-meta><meta-name>metadata-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>abstract-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>bodypdf-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>bodyhtml-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>bibliography-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>esm-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>online-first</meta-name><meta-value>false</meta-value></custom-meta><custom-meta><meta-name>pdf-file-reference</meta-name><meta-value>BodyRef/PDF/40565_2015_Article_123.pdf</meta-value></custom-meta><custom-meta><meta-name>target-type</meta-name><meta-value>OnlinePDF</meta-value></custom-meta><custom-meta><meta-name>issue-online-date-year</meta-name><meta-value>2015</meta-value></custom-meta><custom-meta><meta-name>issue-online-date-month</meta-name><meta-value>5</meta-value></custom-meta><custom-meta><meta-name>issue-online-date-day</meta-name><meta-value>21</meta-value></custom-meta><custom-meta><meta-name>issue-type</meta-name><meta-value>Regular</meta-value></custom-meta><custom-meta><meta-name>article-type</meta-name><meta-value>OriginalPaper</meta-value></custom-meta><custom-meta><meta-name>journal-subject-primary</meta-name><meta-value>Energy</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Energy Systems</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Renewable and Green Energy</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Power Electronics, Electrical Machines and Networks</meta-value></custom-meta><custom-meta><meta-name>journal-subject-collection</meta-name><meta-value>Engineering</meta-value></custom-meta><custom-meta><meta-name>open-access</meta-name><meta-value>true</meta-value></custom-meta></custom-meta-group></article-meta><notes notes-type="Misc"><p>CrossCheck date: 27 February 2015</p></notes></front><body><sec id="Sec1" sec-type="introduction"><title>Introduction</title><p id="Par8">The energy storage system (ESS) plays a key role in deciding the electric vehicle’s performance and reliability [<xref ref-type="bibr" rid="CR1">1</xref>–<xref ref-type="bibr" rid="CR3">3</xref>]. Compared with the energy storage system solely structured by only batteries or supercapacitors, a hybrid energy storage system comprising both high power density and high energy density storage units, gains better performance, such as high power rating, high energy capacity, short response time, and extended the life cycle of the ESS [<xref ref-type="bibr" rid="CR4">4</xref>–<xref ref-type="bibr" rid="CR7">7</xref>]. Control, robustness, stability, efficiency, and optimization of HESS remain an essential research area [<xref ref-type="bibr" rid="CR8">8</xref>]. How to reinforce the complementary advantages of batteries and supercapacitors, the current sharing and SOC management of battery are key issues that need to be considered [<xref ref-type="bibr" rid="CR9">9</xref>–<xref ref-type="bibr" rid="CR12">12</xref>].</p><p id="Par9">Many studies have been done upon the dynamic power sharing between batteries and supercapacitors [<xref ref-type="bibr" rid="CR13">13</xref>–<xref ref-type="bibr" rid="CR15">15</xref>]. The main control objective is to achieve the dynamic allocation of high frequency power demands and low frequency power demands to the batteries and supercapacitors respectively. In [<xref ref-type="bibr" rid="CR14">14</xref>], a piecewise linear relationship between the current of the battery and supercapacitor decides the power distribution. When the load power varies tremendously, the current of supercapacitor increases dramatically. As a result, the fluctuating power is mainly compensated by the supercapacitor with fast response. However, in the case of small variation of the load power, all the power is balanced by the battery, which leads to frequent charge and discharge cycles. This may do great harm to the battery and shorten its service life. To separate the responses in frequency between these two energy storages, the power demand are divided into low frequency and high frequency components in [<xref ref-type="bibr" rid="CR15">15</xref>]. And through the bus and supercapacitor voltage cascaded control, the converter current references are set such that the low frequency component is supplied by the battery and the high frequency component is supplied by the supercapacitor [<xref ref-type="bibr" rid="CR16">16</xref>]. However, only one battery and one supercapacitor are concerned, which limits its applications in the high power occasion.</p><p id="Par10">In [<xref ref-type="bibr" rid="CR16">16</xref>–<xref ref-type="bibr" rid="CR21">21</xref>], the total current demand is derived from the difference between the energy source and load power. Then the low-frequency component of the current, namely the total current reference for the battery interfacing power converters, is generated by passing this current reference through a low-pass filter (LPF), while the rest of the current is the reference for supercapacitors. However, the calculation of the total current demand requires the information of all energy source and load power. It relies on a wide communication bandwidth with the increasing number of interfaces, which decreases the system reliability. Meanwhile, the average current control is adopted for current sharing. Such centralized energy management system relies heavily upon the energy control center itself, resulting in inadequate system reliability and scalability, which is not suitable for systems with dynamic structure.</p><p id="Par11">On the other hand, the batteries have the operation limitations in practice. Without a proper battery management, it may come into being serious problems, such as the over-charging, over-discharging, imbalance of voltage among the cells. Therefore, it is a necessity to develop advanced control strategies for the battery equalization. In [<xref ref-type="bibr" rid="CR16">16</xref>, <xref ref-type="bibr" rid="CR18">18</xref>–<xref ref-type="bibr" rid="CR22">22</xref>], SOC is taken into account in energy control center with centralized control, whose drawback is the less flexible and not appropriate in an expandable system. An attenuation coefficient, with consideration of factors like battery terminal voltage and SOC, is multiplied by the battery current reference in the control loop to guarantee the efficient and safe operation of batteries in [<xref ref-type="bibr" rid="CR23">23</xref>]. However, the current reference restriction that no power outputs once the battery voltage exceeds the bounds is too rigorous.</p><p id="Par12">Combined with advantages of the conventional droop control, which features high expandability and reliability, the dual droop frequency dividing coordinated control is derived for HESS in this paper with consideration of power sharing between batteries and supercapacitors and SOC of batteries. By employing this control scheme, the dynamic power sharing between two energy storage mediums is ensured with the DC bus and supercapacitor voltage cascaded control. While dual droop control, as an extension of the conventional droop control, realizes the current sharing and SOC management of different power modules without requirement of communication, which increases the system reliability and flexibility.</p></sec><sec id="Sec2"><title>Proposed control strategy for HESS</title><p id="Par13">Figure <xref rid="Fig1" ref-type="fig">1</xref> shows an electric vehicle propulsion system with HESS, which contains both high energy density and high power density storage elements. The battery packs, which provide power during the intermittent of the renewable energy sources, are connected to the DC bus by modular bi-directional DC-DC converters for the convenience of battery capacity expansion. While the supercapacitors are connected to the DC bus by multiple converters because of the high power rating.<fig id="Fig1"><label>Fig. 1</label><caption xml:lang="en"><p>Modular hybrid energy storage propulsion system</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig1_HTML.gif" id="MO1"/></fig></p><p id="Par14">The detailed control block of HESS is depicted in Fig. <xref rid="Fig2" ref-type="fig">2</xref>. <italic>C</italic><sub><italic>Bus</italic></sub> is the bus capacitor, and the power fluctuation caused by the motor drive is presented by a current source <italic>i</italic><sub><italic>bus</italic></sub>. For controlling the bi-directional DC/DC converters (BDCs), a cascaded control scheme using the inner current-control loop and outer voltage-control loop is realized, where <italic>i</italic><sub><italic>L_ref</italic></sub> is the current reference and the current transfer function is defined as <italic>G</italic><sub><italic>BDC</italic></sub>(<italic>s</italic>). <italic>i</italic><sub><italic>Bat</italic></sub>, <italic>i</italic><sub><italic>SC</italic></sub> are the currents of the batteries and supercapacitors, respectively. <italic>i</italic><sub><italic>Bus_Bat</italic></sub>, <italic>i</italic><sub><italic>Bus_SC</italic></sub> are the corresponding current into the DC bus. <italic>G</italic><sub><italic>vcSC</italic></sub>(<italic>s</italic>), <italic>H</italic><sub><italic>vBus</italic></sub>, <italic>V</italic><sub><italic>Bus_ref</italic></sub> are the compensators, feedback coefficient and voltage reference of the DC bus voltage control loop. The corresponding definitions of supercapacitor voltage control loop are expressed as <italic>G</italic><sub><italic>vcBat</italic></sub>(<italic>s</italic>), <italic>H</italic><sub><italic>vSC</italic></sub>, <italic>V</italic><sub><italic>SC_ref</italic></sub>. And <italic>V</italic><sub><italic>Bus</italic></sub>, <italic>V</italic><sub><italic>SC</italic></sub>, <italic>V</italic><sub><italic>Bat</italic></sub> are the voltage of DC Bus, supercapacitor and battery. The conventional droop control is employed to realize the current sharing among the BDCs for supercapacitor, and the dual droop control is adopted for the current sharing and SOC management of the batteries. The frequency diving control method is realized through the DC bus and supercapacitor voltage cascaded control.<fig id="Fig2"><label>Fig. 2</label><caption xml:lang="en"><p>Modular hybrid energy storage propulsion system</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig2_HTML.gif" id="MO2"/></fig></p><p id="Par15">To analyze and verify the effectiveness of the control strategy, a HESS, with the combination of batteries and supercapacitor, is built with parameters listed in Table <xref rid="Tab1" ref-type="table">1</xref>.<table-wrap id="Tab1"><label>Table 1</label><caption xml:lang="en"><p>Parameters of HESS</p></caption><table frame="hsides" rules="groups"><thead><tr><th align="left"><p>Components</p></th><th align="left"><p>Parameters</p></th></tr></thead><tbody><tr><td align="left"><p>DC bus voltage feedback coefficient (<italic>H</italic><sub><italic>vBus</italic></sub>(<italic>s</italic>))</p></td><td align="left"><p>8.533</p></td></tr><tr><td align="left"><p>Supercapacitor voltage feedback coefficient (<italic>H</italic><sub><italic>vSC</italic></sub>(<italic>s</italic>))</p></td><td align="left"><p>100</p></td></tr><tr><td align="left"><p>DC Bus Capacitor (<italic>C</italic><sub><italic>Bus</italic></sub>)</p></td><td align="left"><p>3000 μF</p></td></tr><tr><td align="left"><p>Supercapacitor capacity (<italic>C</italic><sub><italic>SC</italic></sub>)</p></td><td align="left"><p>130 F</p></td></tr><tr><td align="left"><p>ESR of supercapacitor (<italic>R</italic><sub><italic>SC</italic></sub>)</p></td><td align="left"><p>8m Ω</p></td></tr><tr><td align="left"><p>Supercapacitor voltage range (<italic>V</italic><sub><italic>SC</italic></sub>)</p></td><td align="left"><p>30–60 V</p></td></tr><tr><td align="left"><p>Battery capacity</p></td><td align="left"><p>15 A h</p></td></tr><tr><td align="left"><p>Battery voltage range (<italic>V</italic><sub><italic>Bat</italic></sub>)</p></td><td align="left"><p>40–56 V</p></td></tr><tr><td align="left"><p>DC bus voltage (<italic>V</italic><sub><italic>Bus</italic></sub>)</p></td><td align="left"><p>400 V</p></td></tr><tr><td align="left"><p>Current transfer function gain (<italic>G</italic><sub><italic>BDC</italic></sub>(<italic>s</italic>))</p></td><td align="left"><p>0.0444</p></td></tr><tr><td align="left"><p>Bandwidth of current control loop</p></td><td align="left"><p>400 Hz</p></td></tr><tr><td align="left"><p>Modular converter power (<italic>P</italic><sub><italic>out</italic></sub>)</p></td><td align="left"><p>1500 W</p></td></tr></tbody></table></table-wrap></p><sec id="Sec3"><title>Control design of power modules for supercapacitor</title><p id="Par16">A DC-DC converter with droop controller can be simplified as an electric circuit with an ideal DC voltage source in series with an output resistance, as in Fig. <xref rid="Fig3" ref-type="fig">3</xref>. One promising way to realize droop control is by setting the virtual output impedance <italic>R</italic><sub><italic>droop</italic></sub> of DC-DC converter. A schematic diagram of two parallel connected converter modules and the corresponding droop curves are depicted in Fig. <xref rid="Fig3" ref-type="fig">3</xref>. The difference of output currents Δ<italic>I</italic><sub><italic>Bus</italic></sub> can be derived as<disp-formula id="Equ1"><label>1</label><alternatives><mml:math display="block" id="Equ1_Math"><mml:mrow><mml:mi mathvariant="normal">Δ</mml:mi><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:mo>-</mml:mo><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mn>2</mml:mn></mml:mrow></mml:msub></mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>r</mml:mi><mml:mi>o</mml:mi><mml:mi>o</mml:mi><mml:mi>p</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ1_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \Delta I_{Bus} = \frac{{V_{Bus1} - V_{Bus2} }}{{R_{droop} }} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ1.gif"/></alternatives></disp-formula>where <italic>V</italic><sub><italic>Bat</italic>1</sub> and <italic>V</italic><sub><italic>Bat</italic>2</sub> are the no-load voltage of each module.<fig id="Fig3"><label>Fig. 3</label><caption xml:lang="en"><p>Parallel operation of power converters with droop control and droop curves</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig3_HTML.gif" id="MO4"/></fig></p><p id="Par17">As presented in [<xref ref-type="bibr" rid="CR19">19</xref>], the input current reference <italic>i</italic><sub><italic>SC_ref</italic></sub> for the supercapacitor converter is used to regulate the output voltage (<italic>V</italic><sub><italic>Bus</italic></sub>) at the reference level. From Fig. <xref rid="Fig4" ref-type="fig">4</xref>, the virtual output impedance of the supercapacitor converter is obtained by<disp-formula id="Equ2"><label>2</label><alternatives><mml:math display="block" id="Equ2_Math"><mml:mrow><mml:msub><mml:mi>Z</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>D</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mn>1</mml:mn><mml:mrow><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>c</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>D</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mfrac><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ2_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ Z_{BDC} (s) = \frac{1}{{H_{vBus} (s)G_{vcSC} (s)G_{BDC} (s)\frac{{V_{SC} }}{{V_{Bus} }}}} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ2.gif"/></alternatives></disp-formula><fig id="Fig4"><label>Fig. 4</label><caption xml:lang="en"><p>Control scheme for supercapacitor converter</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig4_HTML.gif" id="MO6"/></fig></p><p id="Par18">In order to realize the <italic>V-I</italic> droop curves as shown in Fig. <xref rid="Fig3" ref-type="fig">3</xref>, the compensator <italic>G</italic><sub><italic>vcSC</italic></sub>(<italic>s</italic>) can be derived as<disp-formula id="Equ3"><label>3</label><alternatives><mml:math display="block" id="Equ3_Math"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>c</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mn>1</mml:mn><mml:mrow><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>D</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mfrac><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:mfrac><mml:mfrac><mml:mn>1</mml:mn><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ3_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ G_{vcSC} (s) = \frac{1}{{H_{vBus} (s)G_{BDC} (s)\frac{{V_{SC} }}{{V_{Bus} }}}}\frac{1}{{R_{d\_SC} }} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ3.gif"/></alternatives></disp-formula></p><p id="Par19">Hence the output impedance <italic>Z</italic><sub><italic>BDC</italic></sub>(<italic>s</italic>) equals to <italic>R</italic><sub><italic>d_SC</italic></sub>.</p><p id="Par20">Considering <italic>n</italic> converter modules in parallel, the open loop transfer function of DC bus voltage <italic>G</italic><sub><italic>vBuspoc</italic></sub>(<italic>s</italic>) is <italic>n</italic> times of <italic>G</italic><sub><italic>vBusoc</italic></sub>(<italic>s</italic>), which is given by<disp-formula id="Equ4"><label>4</label><alternatives><mml:math display="block" id="Equ4_Math"><mml:mrow><mml:mtable columnspacing="0.5ex"><mml:mtr><mml:mtd/><mml:mtd columnalign="left"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>p</mml:mi><mml:mi>o</mml:mi><mml:mi>c</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mi>n</mml:mi><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>o</mml:mi><mml:mi>c</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mi>n</mml:mi><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>c</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>D</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mfrac><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:mfrac><mml:mn>1</mml:mn><mml:mrow><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mrow></mml:mfrac><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mi>n</mml:mi><mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mrow></mml:mfrac></mml:mrow></mml:mtd></mml:mtr></mml:mtable></mml:mrow></mml:math><tex-math id="Equ4_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \begin{aligned} &amp; G_{vBuspoc} (s) = nG_{vBusoc} (s) = nG_{vcSC} (s)G_{BDC} (s)\frac{{V_{SC} }}{{V_{Bus} }} \\ &amp; \frac{1}{{C_{Bus} s}}H_{vBus} (s) = \frac{n}{{R_{d\_SC} C_{Bus} s}} \end{aligned} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ4.gif"/></alternatives></disp-formula></p><p id="Par21">From (<xref rid="Equ4" ref-type="disp-formula">4</xref>), the bandwidth of DC bus voltage loop is decided by the number of branches in parallel <italic>n</italic> and the droop coefficient <italic>R</italic><sub><italic>d_SC</italic></sub>. The bandwidth of DC bus voltage loop is set at 5 Hz with consideration of the supercapacitor response time (in milliseconds). In the case of two converter modules in parallel, the droop coefficient <italic>R</italic><sub><italic>d_SC</italic></sub> is 21.2 Ω. If the voltage difference between <italic>V</italic><sub><italic>Bat1</italic></sub> and <italic>V</italic><sub><italic>Bat2</italic></sub> after calibration is 0.2% of the output voltage, namely 1.6 V, the difference of output current Δ<italic>I</italic><sub><italic>Bus</italic></sub> can be obtained by (<xref rid="Equ1" ref-type="disp-formula">1</xref>), which is 0.075 A and 4% of current in full load case. So the effect in distributing current equally is satisfied.</p><p id="Par22">The open and close loop transfer function after compensation <italic>G</italic><sub><italic>vBuspoc</italic></sub>(<italic>s</italic>), <italic>G</italic><sub><italic>vBuspc</italic></sub>(<italic>s</italic>) are obtained by (<xref rid="Equ5" ref-type="disp-formula">5</xref>) and (<xref rid="Equ6" ref-type="disp-formula">6</xref>), while the current transfer function from battery to supercapacitor <italic>G</italic><sub><italic>iSC_iBatp</italic></sub>(<italic>s</italic>) is given by (<xref rid="Equ7" ref-type="disp-formula">7</xref>).<disp-formula id="Equ5"><label>5</label><alternatives><mml:math display="block" id="Equ5_Math"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>p</mml:mi><mml:mi>o</mml:mi><mml:mi>c</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ5_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ G_{vBuspoc} (s) = \frac{{z_{c\_Bus} }}{s} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ5.gif"/></alternatives></disp-formula><disp-formula id="Equ6"><label>6</label><alternatives><mml:math display="block" id="Equ6_Math"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>p</mml:mi><mml:mi>c</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>p</mml:mi><mml:mi>o</mml:mi><mml:mi>c</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo stretchy="false">/</mml:mo><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow><mml:mrow><mml:mn>1</mml:mn><mml:mo>+</mml:mo><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>p</mml:mi><mml:mi>o</mml:mi><mml:mi>c</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac><mml:mo>≈</mml:mo><mml:mfrac><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:mfrac><mml:mfrac><mml:mn>1</mml:mn><mml:mrow><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ6_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ G_{vBuspc} (s) = \frac{{G_{vBuspoc} (s)/H_{vBus} (s)}}{{1{ + }G_{vBuspoc} (s)}} \approx \frac{{z_{c\_Bus} }}{{s + z_{c\_Bus} }}\frac{1}{{H_{vBus} (s)}} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ6.gif"/></alternatives></disp-formula><disp-formula id="Equ7"><label>7</label><alternatives><mml:math display="block" id="Equ7_Math"><mml:mrow><mml:mtable columnspacing="0.5ex"><mml:mtr><mml:mtd columnalign="right"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi>_</mml:mi><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:mo>=</mml:mo><mml:mo>-</mml:mo><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>p</mml:mi><mml:mi>c</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mfrac><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:mo>≈</mml:mo><mml:mfrac><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:mfrac><mml:mfrac><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd></mml:mtr></mml:mtable></mml:mrow></mml:math><tex-math id="Equ7_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \begin{aligned} G_{{i_{SC} \_i_{Bat} p}} (s)&amp;= - G_{vBuspc} (s)H_{vBus} (s)\frac{{V_{Bat} }}{{V_{SC} }}  \hfill \\&amp;\approx \frac{{z_{c\_Bus} }}{{s + z_{c\_Bus} }}\frac{{V_{Bat} }}{{V_{SC} }} \hfill \\ \end{aligned} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ7.gif"/></alternatives></disp-formula>where <italic>z</italic><sub><italic>c_Bus</italic></sub> equals to <italic>n/</italic>(<italic>R</italic><sub><italic>d_SC</italic></sub><italic>C</italic><sub><italic>Bus</italic></sub>).</p></sec><sec id="Sec4"><title>Control design of power modules for batteries</title><p id="Par23">The equation of droop control for batteries is listed as (<xref rid="Equ8" ref-type="disp-formula">8</xref>), where <italic>V</italic><sub><italic>SC0</italic></sub> is the no-load voltage of each module, <italic>R</italic><sub><italic>d_Bat</italic></sub> is the drop coefficient and <italic>I</italic><sub><italic>Bat</italic></sub> is the battery current. If all the battery converters are controlled under the same droop curve, the batteries with lower SOC will go into over discharge while those with higher SOC will be over charged, which significantly decrease the system reliability. In order to balance SOC of each battery unit, a dual droop control scheme is proposed by introducing battery SOC into droop control scheme, which is shown in Fig. <xref rid="Fig5" ref-type="fig">5</xref>.<disp-formula id="Equ8"><label>8</label><alternatives><mml:math display="block" id="Equ8_Math"><mml:mrow><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mn>0</mml:mn></mml:mrow></mml:msub><mml:mo>-</mml:mo><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:math><tex-math id="Equ8_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ V_{SC} = V_{SC0} - R_{d\_Bat} I_{Bat} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ8.gif"/></alternatives></disp-formula></p><p><italic>V</italic><sub><italic>SC</italic>0<italic>_</italic>1</sub>, <italic>V</italic><sub><italic>SC</italic>0<italic>_</italic>2</sub> are the supercapacitor voltage reference for each battery converter, which are decided with their SOCs as in (<xref rid="Equ9" ref-type="disp-formula">9</xref>)<disp-formula id="Equ9"><label>9</label><alternatives><mml:math display="block" id="Equ9_Math"><mml:mrow><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mn>0</mml:mn></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:msubsup><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mn>0</mml:mn></mml:mrow><mml:mrow><mml:mrow/><mml:mo>∗</mml:mo></mml:mrow></mml:msubsup><mml:mspace width="0.166667em"/><mml:mo>+</mml:mo><mml:mspace width="0.166667em"/><mml:msub><mml:mi>k</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:math><tex-math id="Equ9_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ V_{SC0} = V_{SC0}^{ *} \,{ + }\,k_{v\_SOC} SOC $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ9.gif"/></alternatives></disp-formula>where <inline-formula id="IEq1"><alternatives><mml:math id="IEq1_Math"><mml:msubsup><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mn>0</mml:mn></mml:mrow><mml:mrow><mml:mrow/><mml:mo>∗</mml:mo></mml:mrow></mml:msubsup></mml:math><tex-math id="IEq1_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$   V_{SC0}^{ *} $$\end{document}</tex-math><inline-graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_IEq1.gif"/></alternatives></inline-formula> is the supercapacitor voltage reference under the circumstance of the minimum SOC and <italic>k</italic><sub><italic>v_SOC</italic></sub> is the secondary droop coefficient.<fig id="Fig5"><label>Fig. 5</label><caption xml:lang="en"><p>Dual droop control scheme for battery converters</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig5_HTML.gif" id="MO14"/></fig></p><p id="Par24">Equation (<xref rid="Equ9" ref-type="disp-formula">9</xref>) is drawn in Fig. <xref rid="Fig6" ref-type="fig">6</xref>, which achieves droop curves shifting up and down as presented in Fig. <xref rid="Fig5" ref-type="fig">5</xref>. Thus the battery with higher SOC takes in smaller current and gives out bigger current, which contributes to SOC balancing among the battery units.<fig id="Fig6"><label>Fig. 6</label><caption xml:lang="en"><p>Secondary droop between battery SOC and <inline-formula id="IEq2"><alternatives><mml:math id="IEq2_Math"><mml:msubsup><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mn>0</mml:mn></mml:mrow><mml:mrow><mml:mrow/><mml:mo>∗</mml:mo></mml:mrow></mml:msubsup></mml:math><tex-math id="IEq2_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$   V_{SC0}^{ *} $$\end{document}</tex-math><inline-graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_IEq2.gif"/></alternatives></inline-formula></p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig6_HTML.gif" id="MO15"/></fig></p><p id="Par25">The difference of battery currents Δ<italic>I</italic><sub><italic>Bat</italic></sub> is derived by<disp-formula id="Equ10"><label>10</label><alternatives><mml:math display="block" id="Equ10_Math"><mml:mrow><mml:mi mathvariant="normal">Δ</mml:mi><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:mo>-</mml:mo><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi><mml:mn>2</mml:mn></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mn>0</mml:mn><mml:mi>_</mml:mi><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:mo>-</mml:mo><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mn>0</mml:mn><mml:mi>_</mml:mi><mml:mn>2</mml:mn></mml:mrow></mml:msub></mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ10_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \Delta I_{Bat} = I_{Bat1} - I_{Bat2} = \frac{{V_{SC0\_1} - V_{SC0\_2} }}{{R_{d\_Bat} }} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ10.gif"/></alternatives></disp-formula><disp-formula id="Equ11"><label>11</label><alternatives><mml:math display="block" id="Equ11_Math"><mml:mrow><mml:mtable columnspacing="0.5ex"><mml:mtr><mml:mtd columnalign="right"><mml:mrow><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mn>0</mml:mn><mml:mi>_</mml:mi><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:mo>-</mml:mo><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mn>0</mml:mn><mml:mi>_</mml:mi><mml:mn>2</mml:mn></mml:mrow></mml:msub><mml:mspace width="0.166667em"/><mml:mo>=</mml:mo><mml:mspace width="0.166667em"/></mml:mrow></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:msub><mml:mi>k</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:mn>1</mml:mn></mml:msub><mml:mo>-</mml:mo><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:mn>2</mml:mn></mml:msub><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:msub><mml:mi>k</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi mathvariant="normal">Δ</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd></mml:mtr></mml:mtable></mml:mrow></mml:math><tex-math id="Equ11_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \begin{aligned} V_{SC0\_1} - V_{SC0\_2}\,=\,&amp; k_{v\_SOC} (SOC_{1} - SOC_{2} ) = \hfill \\ &amp; k_{v\_SOC} \Delta SOC \hfill \\ \end{aligned} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ11.gif"/></alternatives></disp-formula></p><p id="Par26">By substituting (<xref rid="Equ11" ref-type="disp-formula">11</xref>) into (<xref rid="Equ12" ref-type="disp-formula">12</xref>), Δ<italic>I</italic><sub><italic>Bat</italic></sub> is expressed as<disp-formula id="Equ12"><label>12</label><alternatives><mml:math display="block" id="Equ12_Math"><mml:mrow><mml:mi mathvariant="normal">Δ</mml:mi><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:msub><mml:mi>k</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi mathvariant="normal">Δ</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ12_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \Delta I_{Bat} = \frac{{k_{v\_SOC} \Delta SOC}}{{R_{d\_Bat} }} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ12.gif"/></alternatives></disp-formula></p><p id="Par27">The battery SOC is related to its initial SOC, i.e. <italic>SOC</italic><sub>0</sub> and the battery current as given by<disp-formula id="Equ13"><label>13</label><alternatives><mml:math display="block" id="Equ13_Math"><mml:mrow><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi><mml:mo>=</mml:mo><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:mn>0</mml:mn></mml:msub><mml:mo>-</mml:mo><mml:mfrac><mml:mrow><mml:mo>∫</mml:mo><mml:mrow><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mtext>d</mml:mtext><mml:mi>t</mml:mi></mml:mrow></mml:mrow><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ13_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ SOC = SOC_{ 0} - \frac{{\int {I_{Bat} {\text{d}}t} }}{{C_{Bat} }} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ13.gif"/></alternatives></disp-formula></p><p id="Par28">So the difference of SOCs can be calculated as following<disp-formula id="Equ14"><label>14</label><alternatives><mml:math display="block" id="Equ14_Math"><mml:mrow><mml:mtable columnspacing="0.5ex"><mml:mtr><mml:mtd columnalign="right"><mml:mrow><mml:mi mathvariant="normal">Δ</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi><mml:mspace width="0.166667em"/><mml:mo>=</mml:mo><mml:mspace width="0.166667em"/></mml:mrow></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:mn>1</mml:mn></mml:msub><mml:mo>-</mml:mo><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:mn>2</mml:mn></mml:msub><mml:mo>=</mml:mo><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:msub><mml:mn>0</mml:mn><mml:mn>1</mml:mn></mml:msub></mml:msub><mml:mo>-</mml:mo><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:msub><mml:mn>0</mml:mn><mml:mn>2</mml:mn></mml:msub></mml:msub><mml:mo>-</mml:mo></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:mfrac><mml:mrow><mml:mo>∫</mml:mo><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:mo>-</mml:mo><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi><mml:mn>2</mml:mn></mml:mrow></mml:msub><mml:mo stretchy="false">)</mml:mo><mml:mtext>d</mml:mtext><mml:mi>t</mml:mi></mml:mrow></mml:mrow><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mfrac><mml:mo>=</mml:mo><mml:mi mathvariant="normal">Δ</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:mn>0</mml:mn></mml:msub><mml:mo>-</mml:mo><mml:mfrac><mml:mrow><mml:mo>∫</mml:mo><mml:mrow><mml:mi mathvariant="normal">Δ</mml:mi><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mtext>d</mml:mtext><mml:mi>t</mml:mi></mml:mrow></mml:mrow><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd></mml:mtr></mml:mtable></mml:mrow></mml:math><tex-math id="Equ14_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \begin{aligned} \Delta SOC\,=\,&amp; SOC_{1} - SOC_{2} = SOC_{{0}_{1}} - SOC_{{0}_{2}} - \hfill \\ &amp; \frac{{\int {(I_{Bat1} - I_{Bat2} ){\text{d}}t} }}{{C_{Bat} }} = \Delta SOC_{0} - \frac{{\int {\Delta I_{Bat} {\text{d}}t} }}{{C_{Bat} }} \hfill \\ \end{aligned} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ14.gif"/></alternatives></disp-formula></p><p id="Par29">Carrying out Laplace transform on (<xref rid="Equ12" ref-type="disp-formula">12</xref>) and (<xref rid="Equ14" ref-type="disp-formula">14</xref>), (<xref rid="Equ15" ref-type="disp-formula">15</xref>) and (<xref rid="Equ16" ref-type="disp-formula">16</xref>) can be derived<disp-formula id="Equ15"><label>15</label><alternatives><mml:math display="block" id="Equ15_Math"><mml:mrow><mml:mi mathvariant="normal">Δ</mml:mi><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:msub><mml:mi>k</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi mathvariant="normal">Δ</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ15_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \Delta I_{Bat} (s) = \frac{{k_{v\_SOC} \Delta SOC(s)}}{{R_{d\_Bat} }} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ15.gif"/></alternatives></disp-formula><disp-formula id="Equ16"><label>16</label><alternatives><mml:math display="block" id="Equ16_Math"><mml:mrow><mml:mi mathvariant="normal">Δ</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mi mathvariant="normal">Δ</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:mn>0</mml:mn></mml:msub><mml:mo>-</mml:mo><mml:mfrac><mml:mrow><mml:mi mathvariant="normal">Δ</mml:mi><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow><mml:mrow><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mrow></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ16_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \Delta SOC(s) = \Delta SOC_{0} - \frac{{\Delta I_{Bat} (s)}}{{C_{Bat} s}} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ16.gif"/></alternatives></disp-formula></p><p id="Par30">By substituting (<xref rid="Equ15" ref-type="disp-formula">15</xref>) into (<xref rid="Equ16" ref-type="disp-formula">16</xref>), the difference of SOCs and battery currents are expressed as<disp-formula id="Equ17"><label>17</label><alternatives><mml:math display="block" id="Equ17_Math"><mml:mrow><mml:mi mathvariant="normal">Δ</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mrow><mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>k</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:mfrac><mml:mi mathvariant="normal">Δ</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:mn>0</mml:mn></mml:msub></mml:mrow></mml:math><tex-math id="Equ17_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \Delta SOC(s) = \frac{{R_{d\_Bat} C_{Bat} s}}{{R_{d\_Bat} C_{Bat} s + k_{v\_SOC} }}\Delta SOC_{0} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ17.gif"/></alternatives></disp-formula><disp-formula id="Equ18"><label>18</label><alternatives><mml:math display="block" id="Equ18_Math"><mml:mrow><mml:mi mathvariant="normal">Δ</mml:mi><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:msub><mml:mi>k</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mrow><mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>k</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:mfrac><mml:mi mathvariant="normal">Δ</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:mn>0</mml:mn></mml:msub></mml:mrow></mml:math><tex-math id="Equ18_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \Delta I_{Bat} (s) = \frac{{k_{v\_SOC} C_{Bat} s}}{{R_{d\_Bat} C_{Bat} s + k_{v\_SOC} }}\Delta SOC_{0} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ18.gif"/></alternatives></disp-formula></p><p id="Par31">According to (<xref rid="Equ17" ref-type="disp-formula">17</xref>), the SOC balance is a first order system so the difference of SOCs gradually deceases to zero with some decay time constant <italic>T</italic><sub><italic>SOC</italic></sub> as given in (<xref rid="Equ19" ref-type="disp-formula">19</xref>). Consequently the difference of battery currents turns to zero, realizing the SOC balancing as demonstrated in (<xref rid="Equ18" ref-type="disp-formula">18</xref>).<disp-formula id="Equ19"><label>19</label><alternatives><mml:math display="block" id="Equ19_Math"><mml:mrow><mml:msub><mml:mi>T</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:msub><mml:mi>k</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ19_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ T_{SOC} = \frac{{R_{d\_Bat} C_{Bat} }}{{k_{v\_SOC} }} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ19.gif"/></alternatives></disp-formula></p></sec></sec><sec id="Sec5"><title>Design considerations of proposed control strategy</title><sec id="Sec6"><title>Primary droop control parameter design</title><p id="Par32">The block diagram of the supercapacitor voltage control loop is depicted in Fig. <xref rid="Fig7" ref-type="fig">7</xref>, where the supercapacitor is modeled as a capacitor <italic>C</italic><sub><italic>SC</italic></sub> and a resistor <italic>R</italic><sub><italic>SC</italic></sub> in series. And the impedance of the supercapacitor <italic>Z</italic><sub><italic>SC</italic></sub>(<italic>s</italic>) = (<italic>R</italic><sub><italic>SC</italic></sub><italic>C</italic><sub><italic>SC</italic></sub><italic>s</italic>+1)/(<italic>C</italic><sub><italic>SC</italic></sub><italic>s</italic>). The relationship between the supercapacitor voltage and the battery current can be derived by<disp-formula id="Equ20"><label>20</label><alternatives><mml:math display="block" id="Equ20_Math"><mml:mrow><mml:msub><mml:mi>v</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:msub><mml:mi>v</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mi>_</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>f</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac><mml:mo>-</mml:mo><mml:mfrac><mml:mn>1</mml:mn><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>c</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>D</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:math><tex-math id="Equ20_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ v_{SC} (s) = \frac{{v_{SC\_ref} }}{{H_{vSC} (s)}} - \frac{1}{{G_{vcBat} (s)G_{BDC} (s)H_{vSC} (s)}}i_{Bat} (s) $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ20.gif"/></alternatives></disp-formula><fig id="Fig7"><label>Fig. 7</label><caption xml:lang="en"><p>Block diagram of supercapacitor voltage control loop</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig7_HTML.gif" id="MO27"/></fig></p><p id="Par33">In order to lower the gain around zero introduced by the supercapacitor impedance so as to suppress the batteries’ response to the power fluctuation around the zero frequency, the compensator <italic>G</italic><sub><italic>vcBat</italic></sub>(<italic>s</italic>) is designed as (20) where <italic>z</italic><sub><italic>SC</italic></sub> = 1/(<italic>R</italic><sub><italic>SC</italic></sub><italic>C</italic><sub><italic>SC</italic></sub>) and the droop equation is derived by (<xref rid="Equ22" ref-type="disp-formula">22</xref>).<disp-formula id="Equ21"><label>21</label><alternatives><mml:math display="block" id="Equ21_Math"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>c</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mn>1</mml:mn><mml:mrow><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>D</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac><mml:mfrac><mml:mn>1</mml:mn><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mfrac><mml:mfrac><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ21_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ G_{vcBat} (s) = \frac{1}{{H_{vSC} (s)G_{BDC} (s)}}\frac{1}{{R_{d\_Bat} }}\frac{{z_{SC} }}{{s + z_{SC} }} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ21.gif"/></alternatives></disp-formula><disp-formula id="Equ22"><label>22</label><alternatives><mml:math display="block" id="Equ22_Math"><mml:mrow><mml:msub><mml:mi>v</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:msub><mml:mi>v</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mi>_</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>f</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac><mml:mo>-</mml:mo><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mfrac><mml:mrow><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mfrac><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:math><tex-math id="Equ22_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ v_{SC} (s) = \frac{{v_{SC\_ref} }}{{H_{vSC} (s)}} - R_{d\_Bat} \frac{{s + z_{SC} }}{{z_{SC} }}i_{Bat} (s) $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ22.gif"/></alternatives></disp-formula></p><p id="Par34">For the DC component, namely <italic>s</italic> = 0, the droop equation is simplified as following<disp-formula id="Equ23"><label>23</label><alternatives><mml:math display="block" id="Equ23_Math"><mml:mrow><mml:msub><mml:mi>v</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mn>0</mml:mn><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:msub><mml:mi>v</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mi>_</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>f</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mn>0</mml:mn><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac><mml:mo>-</mml:mo><mml:msub><mml:mi>R</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mn>0</mml:mn><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:math><tex-math id="Equ23_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ v_{SC} (0) = \frac{{v_{SC\_ref} }}{{H_{vSC} (0)}} - R_{d\_Bat} i_{Bat} (0) $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ23.gif"/></alternatives></disp-formula></p><p id="Par35">The bandwidth of the supercapacitor voltage loop is set at 0.05 Hz considering the batteries response time (in seconds). In the case of two converter modules in parallel, the droop coefficient <italic>R</italic><sub><italic>d_SC</italic></sub> is 0.05 Ω.</p></sec><sec id="Sec7"><title>Secondary droop control parameter design</title><p id="Par36">The secondary droop control between the supercapacitor voltage reference and SOC is achieved by adding a feedforward loop into the supercapacitor voltage control loop, as presented in Fig. <xref rid="Fig8" ref-type="fig">8</xref>. The secondary droop equation in steady state is given by<disp-formula id="Equ24"><label>24</label><alternatives><mml:math display="block" id="Equ24_Math"><mml:mrow><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mfrac><mml:msub><mml:mi>v</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi><mml:mi>_</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>f</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mfrac><mml:mo>+</mml:mo><mml:msub><mml:mi>k</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi>S</mml:mi><mml:mi>O</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:math><tex-math id="Equ24_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ V_{SC} = \frac{{v_{SC\_ref} }}{{H_{vSC} }} + k_{v\_SOC} SOC $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ24.gif"/></alternatives></disp-formula><fig id="Fig8"><label>Fig. 8</label><caption xml:lang="en"><p>Block diagram of dual droop control for battery units</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig8_HTML.gif" id="MO32"/></fig></p><p id="Par37">In order not to influence the stability of the supercapacitor voltage control loop, the SOC balancing time constant <italic>T</italic><sub><italic>SOC</italic></sub> is set as 300 s, far larger than the corresponding time of the cross-over frequency in the supercapacitor voltage control loop (20 s). From (<xref rid="Equ19" ref-type="disp-formula">19</xref>), the secondary droop coefficient <italic>k</italic><sub><italic>v_SOC</italic></sub> can be obtained.</p></sec><sec id="Sec8"><title>System response to power fluctuation</title><p id="Par38">The relationship between the control parameters and frequency response range is analyzed to theoretically verify the proposed control strategy.</p><p id="Par39">The transfer block diagram of response of the supercapacitor current and battery current to power fluctuation is plotted in Fig. <xref rid="Fig9" ref-type="fig">9</xref>.<fig id="Fig9"><label>Fig. 9</label><caption xml:lang="en"><p>Transfer block diagram of response of supercapacitor current and battery current to power fluctuation</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig9_HTML.gif" id="MO33"/></fig></p><p id="Par40">The transfer function from the supercapacitor current to the battery current is obtained by<disp-formula id="Equ25"><label>25</label><alternatives><mml:math display="block" id="Equ25_Math"><mml:mrow><mml:mtable columnspacing="0.5ex"><mml:mtr><mml:mtd columnalign="right"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mi>_</mml:mi><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mspace width="0.166667em"/></mml:mrow></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:mo>=</mml:mo><mml:msub><mml:mi>Z</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>H</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mi>n</mml:mi><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>c</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>D</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:mo>=</mml:mo><mml:mspace width="0.166667em"/><mml:mfrac><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mfrac><mml:mfrac><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd></mml:mtr></mml:mtable></mml:mrow></mml:math><tex-math id="Equ25_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \begin{aligned} G_{{i_{Bat} \_i_{SC} p}} (s)\,&amp;=Z_{SC} (s)H_{vSC} (s)nG_{vcBat} (s)G_{BDC} (s)  \hfill \\ &amp; =\,\frac{{z_{c\_SC} }}{s}\frac{{V_{SC} }}{{V_{Bat} }} \hfill \\ \end{aligned} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ25.gif"/></alternatives></disp-formula>where <italic>z</italic><sub><italic>c_SC</italic></sub> is the crossover frequency of supercapacitor voltage control loop.</p><p id="Par41">From Fig. <xref rid="Fig9" ref-type="fig">9</xref>, the output impedance of HESS can be calculated by<disp-formula id="Equ26"><label>26</label><alternatives><mml:math display="block" id="Equ26_Math"><mml:mrow><mml:mtable columnspacing="0.5ex"><mml:mtr><mml:mtd columnalign="right"><mml:mrow><mml:msub><mml:mi>Z</mml:mi><mml:mrow><mml:mi>o</mml:mi><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:msub><mml:mi>v</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow><mml:mrow><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>b</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac><mml:mo>=</mml:mo><mml:mfrac><mml:mn>1</mml:mn><mml:mrow><mml:mn>1</mml:mn><mml:mo>+</mml:mo><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>p</mml:mi><mml:mi>o</mml:mi><mml:mi>c</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mn>1</mml:mn><mml:mo>+</mml:mo><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mi>_</mml:mi><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mfrac><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub></mml:mfrac><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow><mml:mrow/><mml:mspace width="0.277778em"/><mml:mspace width="0.277778em"/><mml:mspace width="0.277778em"/><mml:mspace width="0.277778em"/><mml:mspace width="0.277778em"/><mml:mspace width="0.277778em"/><mml:mspace width="0.277778em"/><mml:mspace width="0.277778em"/><mml:mspace width="0.277778em"/><mml:mspace width="0.277778em"/><mml:mspace width="0.277778em"/><mml:mfrac><mml:mn>1</mml:mn><mml:mrow><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mrow></mml:mfrac></mml:mrow></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mi>s</mml:mi><mml:mrow><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:mfrac></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd></mml:mtr></mml:mtable></mml:mrow></mml:math><tex-math id="Equ26_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \begin{aligned} Z_{op} (s) &amp;= \frac{{v_{Bus} (s)}}{{i_{bus} (s)}} = \frac{1}{{1 + G_{vBuspoc} (s)(1 + G_{{i_{Bat} \_i_{SC} p}} (s)\frac{{V_{Bat} }}{{V_{SC} }})}}  \hfill \\ \;\;\;\;\;\;\;\;\;\;\;\frac{1}{{C_{Bus} s}}&amp; = \frac{s}{{(s + z_{c\_SC} )(s + z_{c\_Bus} )C_{Bus} }} \hfill \\ \end{aligned} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ26.gif"/></alternatives></disp-formula></p><p id="Par42">Therefore, the transfer function of the DC bus capacitor current, supercapacitor current and batteries current to power fluctuation <italic>G</italic><sub><italic>iCBus_ibusp</italic></sub>(<italic>s</italic>), <italic>G</italic><sub><italic>iBus_SC_ibusp</italic></sub>(<italic>s</italic>) and <italic>G</italic><sub><italic>iBus_Bat_ibusp</italic></sub>(<italic>s</italic>) can be derived by<disp-formula id="Equ27"><label>27</label><alternatives><mml:math display="block" id="Equ27_Math"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>C</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>_</mml:mi><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>b</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:msub><mml:mi>Z</mml:mi><mml:mrow><mml:mi>o</mml:mi><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow><mml:mfrac><mml:mn>1</mml:mn><mml:mrow><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mrow></mml:mfrac></mml:mfrac><mml:mo>=</mml:mo><mml:mfrac><mml:msup><mml:mi>s</mml:mi><mml:mn>2</mml:mn></mml:msup><mml:mrow><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac></mml:mrow></mml:math><tex-math id="Equ27_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ G_{{i_{CBus} \_i_{bus} p}} (s) = \frac{{Z_{op} (s)}}{{\frac{1}{{C_{Bus} s}}}} = \frac{{s^{2} }}{{(s + z_{c\_SC} )(s + z_{c\_Bus} )}} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ27.gif"/></alternatives></disp-formula><disp-formula id="Equ28"><label>28</label><alternatives><mml:math display="block" id="Equ28_Math"><mml:mrow><mml:mtable columnspacing="0.5ex"><mml:mtr><mml:mtd columnalign="right"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi>_</mml:mi><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>b</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mspace width="0.166667em"/><mml:mo>=</mml:mo><mml:mspace width="0.166667em"/></mml:mrow></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:msub><mml:mi>Z</mml:mi><mml:mrow><mml:mi>o</mml:mi><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:mi>v</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>p</mml:mi><mml:mi>o</mml:mi><mml:mi>c</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:msub><mml:mi>C</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow><mml:mrow/><mml:mo>=</mml:mo></mml:mrow></mml:mtd><mml:mtd columnalign="left"><mml:mfrac><mml:mrow><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>s</mml:mi></mml:mrow><mml:mrow><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd></mml:mtr></mml:mtable></mml:mrow></mml:math><tex-math id="Equ28_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \begin{aligned} G_{{i_{Bus\_SC} \_i_{bus} p}} (s)\,=\,&amp; Z_{op} (s)G_{vBuspoc} (s)C_{Bus} s  \hfill \\ =&amp; \frac{{z_{c\_Bus} s}}{{(s + z_{c\_SC} )(s + z_{c\_Bus} )}} \hfill \\ \end{aligned} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ28.gif"/></alternatives></disp-formula><disp-formula id="Equ29"><label>29</label><alternatives><mml:math display="block" id="Equ29_Math"><mml:mrow><mml:mtable columnspacing="0.5ex"><mml:mtr><mml:mtd columnalign="right"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mi>_</mml:mi><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>b</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mspace width="0.166667em"/><mml:mo>=</mml:mo><mml:mspace width="0.166667em"/></mml:mrow></mml:mtd><mml:mtd columnalign="left"><mml:mrow><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi>_</mml:mi><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>b</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mfrac><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mfrac><mml:msub><mml:mi>G</mml:mi><mml:mrow><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mi>_</mml:mi><mml:msub><mml:mi>i</mml:mi><mml:mrow><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mi>p</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mfrac><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>V</mml:mi><mml:mrow><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub></mml:mfrac></mml:mrow></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow><mml:mrow/><mml:mo>=</mml:mo></mml:mrow></mml:mtd><mml:mtd columnalign="left"><mml:mfrac><mml:mrow><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mrow><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>S</mml:mi><mml:mi>C</mml:mi></mml:mrow></mml:msub><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mrow><mml:mo stretchy="false">(</mml:mo><mml:mi>s</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>z</mml:mi><mml:mrow><mml:mi>c</mml:mi><mml:mi>_</mml:mi><mml:mi>B</mml:mi><mml:mi>u</mml:mi><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:mrow></mml:mfrac></mml:mtd></mml:mtr><mml:mtr><mml:mtd columnalign="right"><mml:mrow/></mml:mtd></mml:mtr></mml:mtable></mml:mrow></mml:math><tex-math id="Equ29_TeX">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym}
				\usepackage{amsfonts}
				\usepackage{amssymb}
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \begin{aligned} G_{{i_{Bus\_Bat} \_i_{bus} p}} (s)\,=\, &amp; G_{{i_{Bus\_SC} \_i_{bus} p}} (s)\frac{{V_{Bus} }}{{V_{Bat} }}G_{{i_{Bat} \_i_{SC} p}} (s)\frac{{V_{Bat} }}{{V_{Bus} }} \hfill \\ =  &amp; \frac{{z_{c\_SC} z_{c\_Bus} }}{{(s + z_{c\_SC} )(s + z_{c\_Bus} )}} \hfill \\ \end{aligned} $$\end{document}</tex-math><graphic specific-use="web" mime-subtype="GIF" xlink:href="40565_2015_123_Article_Equ29.gif"/></alternatives></disp-formula></p><p id="Par43">Figure <xref rid="Fig10" ref-type="fig">10</xref> gives the frequency response range of the DC bus capacitors, supercapacitors and batteries to the power fluctuation. It can be seen that the batteries absorb the low frequency power fluctuation while supercapacitors provide the high frequency part and the rest power is supplied by DC bus capacitors. Meanwhile, the diving frequencies are decided by the crossover frequencies of the DC bus voltage control loop and supercapacitor voltage control loop. So the HESS can be fully used through proper controller design.<fig id="Fig10"><label>Fig. 10</label><caption xml:lang="en"><p>Response of energy storage to DC bus power fluctuation</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig10_HTML.gif" id="MO39"/></fig></p></sec></sec><sec id="Sec9"><title>Experimental and simulation verification</title><p id="Par44">In this section, a HESS, comprising two supercapacitor converters and two battery converters with parameters as listed in Table <xref rid="Tab1" ref-type="table">1</xref>, is built to demonstrate the advanced performance of the proposed control strategy.</p><p id="Par45">The current sharing effect and droop character of two supercapacitor converters are displayed in Fig. <xref rid="Fig11" ref-type="fig">11</xref>. The no-load voltage difference before and after calibration are shown in Fig. <xref rid="Fig11" ref-type="fig">11</xref>a, b respectively. And the droop curve and current difference are demonstrated in Fig. <xref rid="Fig11" ref-type="fig">11</xref>c, which presents a good current sharing result.<fig id="Fig11"><label>Fig. 11</label><caption xml:lang="en"><p>Current sharing effect</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig11_HTML.gif" id="MO40"/></fig></p><p id="Par46">The process of SOC balancing and current equalization of batteries is shown in Fig. <xref rid="Fig12" ref-type="fig">12</xref>. The initial SOC difference is set to 5% and the measurement of SOC difference is calculated by the Ah-integration as presented in (<xref rid="Equ14" ref-type="disp-formula">14</xref>). With dual control scheme, the currents of battery units tends to equality and the SOC difference decreases gradually from the initial value 5% to 1.8% in 300 s, which is corresponding to the time constant <italic>T</italic><sub><italic>SOC</italic></sub>.<fig id="Fig12"><label>Fig. 12</label><caption xml:lang="en"><p>Results of battery SOC equilibrium and current sharing</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig12_HTML.gif" id="MO41"/></fig></p><p id="Par47">Figure <xref rid="Fig13" ref-type="fig">13</xref> shows the dynamic power allocation between supercapacitor and batteries when a 1 kW step load is applied to the system. The supercapacitor responses to the high frequency power fluctuation while the batteries response to the rest power. The output voltage is well regulated at DC bus voltage reference without steady state error since the supercapacitor does not response to the dc component. Meanwhile, it can be seen that the current difference in the case of Δ<italic>SOC</italic> = 3% is larger than that in the case of Δ<italic>SOC</italic> = 1.4%. So the current difference is positively correlated to Δ<italic>SOC</italic>, which helps to SOC equalization.<fig id="Fig13"><label>Fig. 13</label><caption xml:lang="en"><p>Dynamic response of supercapacitor and battery current to power fluctuation</p></caption><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/40565_2015_123_Fig13_HTML.gif" id="MO42"/></fig></p></sec><sec id="Sec10" sec-type="conclusion"><title>Conclusion</title><p id="Par48">This paper proposes a dual droop-frequency diving coordinated control strategy for HESS in electric vehicle application. The dynamic power allocation is realized through the voltage cascaded control, where the DC bus voltage control loop and supercapacitor voltage control loop set the frequency range for both supercapacitor and battery, make the most use of hybrid energy storage system. On the other aspect, the dual droop control scheme provides not only current sharing between battery units but also SOC equalization without the necessity of communication, which helps to lengthen the battery cycle life and increase the system reliability and flexibility. The experimental results have proven it to be a viable solution for energy management of HESS.
</p></sec></body><back><ref-list id="Bib1"><title>References</title><ref-list><ref id="CR1"><label>[1]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Cao</surname><given-names>J</given-names></name><name><surname>Emadi</surname><given-names>A</given-names></name></person-group><article-title xml:lang="en">A new battery/ultracapacitor hybrid energy storage system for electric, hybrid, and plug-in hybrid electric vehicles</article-title><source>IEEE Trans Power Electron</source><year>2012</year><volume>27</volume><issue>1</issue><fpage>122</fpage><lpage>132</lpage><pub-id pub-id-type="doi">10.1109/TPEL.2011.2151206</pub-id></mixed-citation></ref><ref id="CR2"><label>[2]</label><mixed-citation publication-type="other">Napoli AD, Crescimbini F, Capponi FG et al (2002) Control strategy for multiple input DC-DC power converters devoted to hybrid vehicle propulsion systems. In: Proceedings of the 2002 IEEE international symposium on industrial electronics, L’Aquila, 8–11 July 2002, pp 1036–1041</mixed-citation></ref><ref id="CR3"><label>[3]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Zhang</surname><given-names>SQ</given-names></name><name><surname>Mishra</surname><given-names>Y</given-names></name><name><surname>Ledwich</surname><given-names>G</given-names></name><etal/></person-group><article-title xml:lang="en">The operating schedule for battery energy storage companies in electricity market</article-title><source>J Mod Power Syst Clean Energy</source><year>2013</year><volume>1</volume><issue>3</issue><fpage>275</fpage><lpage>284</lpage><pub-id pub-id-type="doi">10.1007/s40565-013-0039-6</pub-id></mixed-citation></ref><ref id="CR4"><label>[4]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Venet</surname><given-names>LP</given-names></name><name><surname>Guermazi</surname><given-names>A</given-names></name><name><surname>Troudi</surname><given-names>A</given-names></name></person-group><article-title xml:lang="en">Battery/supercapacitors combination in uninterruptible power supply (UPS)</article-title><source>IEEE Trans Power Electron</source><year>2013</year><volume>28</volume><issue>4</issue><fpage>1509</fpage><lpage>1522</lpage><pub-id pub-id-type="doi">10.1109/TPEL.2012.2210736</pub-id></mixed-citation></ref><ref id="CR5"><label>[5]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Zandi</surname><given-names>M</given-names></name><name><surname>Payman</surname><given-names>A</given-names></name><name><surname>Martin</surname><given-names>JP</given-names></name><etal/></person-group><article-title xml:lang="en">Energy management of a fuel cell/supercapacitor/battery power source for electric vehicular applications</article-title><source>IEEE Trans Veh Technol</source><year>2011</year><volume>60</volume><issue>2</issue><fpage>433</fpage><lpage>443</lpage><pub-id pub-id-type="doi">10.1109/TVT.2010.2091433</pub-id></mixed-citation></ref><ref id="CR6"><label>[6]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Mendis</surname><given-names>N</given-names></name><name><surname>Muttaqi</surname><given-names>KM</given-names></name><name><surname>Perera</surname><given-names>S</given-names></name></person-group><article-title xml:lang="en">Management of battery-supercapacitor hybrid energy storage and synchronous condenser for isolated operation of PMSG based variable-speed wind turbine generating systems</article-title><source>IEEE Trans Smart Grid</source><year>2014</year><volume>5</volume><issue>2</issue><fpage>944</fpage><lpage>953</lpage><pub-id pub-id-type="doi">10.1109/TSG.2013.2287874</pub-id></mixed-citation></ref><ref id="CR7"><label>[7]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Wang</surname><given-names>L</given-names></name><name><surname>Li</surname><given-names>H</given-names></name></person-group><article-title xml:lang="en">Maximum fuel economy-oriented power management design for a fuel cell vehicle using battery and ultracapacitor</article-title><source>IEEE Trans Ind Appl</source><year>2010</year><volume>46</volume><issue>3</issue><fpage>1011</fpage><lpage>1020</lpage><pub-id pub-id-type="doi">10.1109/TIA.2010.2045097</pub-id></mixed-citation></ref><ref id="CR8"><label>[8]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Thounthong</surname><given-names>P</given-names></name><name><surname>Pierfederici</surname><given-names>S</given-names></name><name><surname>Martin</surname><given-names>JP</given-names></name><etal/></person-group><article-title xml:lang="en">Modeling and control of fuel cell/supercapacitor hybrid source based on differential flatness control</article-title><source>IEEE Trans Veh Technol</source><year>2010</year><volume>59</volume><issue>6</issue><fpage>2700</fpage><lpage>2710</lpage><pub-id pub-id-type="doi">10.1109/TVT.2010.2046759</pub-id></mixed-citation></ref><ref id="CR9"><label>[9]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Camara</surname><given-names>MB</given-names></name><name><surname>Dakyo</surname><given-names>B</given-names></name><name><surname>Gualous</surname><given-names>H</given-names></name></person-group><article-title xml:lang="en">Polynomial control method of DC/DC converters for DC-Bus voltage and currents management—battery and supercapacitors</article-title><source>IEEE Trans Power Electron</source><year>2012</year><volume>27</volume><issue>3</issue><fpage>1455</fpage><lpage>1467</lpage><pub-id pub-id-type="doi">10.1109/TPEL.2011.2164581</pub-id></mixed-citation></ref><ref id="CR10"><label>[10]</label><mixed-citation publication-type="other">Lukic SM, Wirasingha SG, Rodriguez F et al (2006) Power management of an ultra-capacitor/battery hybrid energy storage system in an HEV. In: Proceedings of the 2006 IEEE vehicle power and propulsion conference, Windsor, 6–8 Sep 2006, pp 1–6</mixed-citation></ref><ref id="CR11"><label>[11]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Jiang</surname><given-names>W</given-names></name><name><surname>Fahimi</surname><given-names>B</given-names></name></person-group><article-title xml:lang="en">Active current sharing and source management in fuel cell-battery hybrid power system</article-title><source>IEEE Trans Ind Electron</source><year>2010</year><volume>57</volume><issue>2</issue><fpage>752</fpage><lpage>761</lpage><pub-id pub-id-type="doi">10.1109/TIE.2009.2027249</pub-id></mixed-citation></ref><ref id="CR12"><label>[12]</label><mixed-citation publication-type="other">Wang GS, Ciobotaru M, Agelidis VG (2013) Power management of hybrid energy storage system for a MW photovoltaic system. In: Proceedings of the 2013 IEEE industrial electronics society Conference, Vienna, 10–13 Nov 2013, pp 6777–6782</mixed-citation></ref><ref id="CR13"><label>[13]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Mendis</surname><given-names>N</given-names></name><name><surname>Muttaqi</surname><given-names>KM</given-names></name><name><surname>Perera</surname><given-names>S</given-names></name></person-group><article-title xml:lang="en">Management of low- and high-frequency power components in demand-generation fluctuations of a DFIG-based wind-dominated RAPS system using hybrid energy storage</article-title><source>IEEE Trans Ind Appl</source><year>2014</year><volume>50</volume><issue>3</issue><fpage>2558</fpage><lpage>2568</lpage><pub-id pub-id-type="doi">10.1109/TIA.2013.2289973</pub-id></mixed-citation></ref><ref id="CR14"><label>[14]</label><mixed-citation publication-type="other">Zhang Y, Jiang ZH (2009) Dynamic power sharing strategy for active hybrid energy storage systems. In: Proceedings of the 2009 IEEE vehicle power and propulsion conference, Dearborn, Michigan, 7–11 Sep 2009, pp 558–563</mixed-citation></ref><ref id="CR15"><label>[15]</label><mixed-citation publication-type="other">Garcia FS, Ferreira AA, Pomilio JA (2009) Control strategy for battery-ultracapacitor hybrid energy storage system. In: Proceedings of the 2009 IEEE applied power electronics conference and exposition, Washington, DC, 15–19 Feb, pp 826–832</mixed-citation></ref><ref id="CR16"><label>[16]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Zhou</surname><given-names>HH</given-names></name><name><surname>Bhattacharya</surname><given-names>T</given-names></name><name><surname>Tran</surname><given-names>D</given-names></name><etal/></person-group><article-title xml:lang="en">Composite energy storage system involving battery and ultracapacitor with dynamic energy management in microgrid applications</article-title><source>IEEE Trans Power Electron</source><year>2011</year><volume>26</volume><issue>3</issue><fpage>923</fpage><lpage>930</lpage><pub-id pub-id-type="doi">10.1109/TPEL.2010.2095040</pub-id></mixed-citation></ref><ref id="CR17"><label>[17]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Abbey</surname><given-names>C</given-names></name><name><surname>Strunz</surname><given-names>K</given-names></name><name><surname>Joós</surname><given-names>G</given-names></name></person-group><article-title xml:lang="en">A knowledge-based approach for control of two-level energy storage for wind energy systems</article-title><source>IEEE Trans Energy Convers</source><year>2009</year><volume>24</volume><issue>4</issue><fpage>539</fpage><lpage>547</lpage><pub-id pub-id-type="doi">10.1109/TEC.2008.2001453</pub-id></mixed-citation></ref><ref id="CR18"><label>[18]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Tani</surname><given-names>A</given-names></name><name><surname>Camara</surname><given-names>MB</given-names></name><name><surname>Dakyo</surname><given-names>B</given-names></name></person-group><article-title xml:lang="en">Energy management based on frequency approach for hybrid electric vehicle applications: fuel cell/Lithium-battery and ultracapacitors</article-title><source>IEEE Trans Veh Technol</source><year>2012</year><volume>61</volume><issue>8</issue><fpage>3375</fpage><lpage>3386</lpage><pub-id pub-id-type="doi">10.1109/TVT.2012.2206415</pub-id></mixed-citation></ref><ref id="CR19"><label>[19]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Schaltz</surname><given-names>E</given-names></name><name><surname>Khaligh</surname><given-names>A</given-names></name><name><surname>Rasmussen</surname><given-names>PO</given-names></name></person-group><article-title xml:lang="en">Influence of battery/ultracapacitor energy-storage sizing on battery lifetime in a fuel cell hybrid electric vehicle</article-title><source>IEEE Trans Veh Technol</source><year>2009</year><volume>58</volume><issue>8</issue><fpage>3882</fpage><lpage>3891</lpage><pub-id pub-id-type="doi">10.1109/TVT.2009.2027909</pub-id></mixed-citation></ref><ref id="CR20"><label>[20]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Wang</surname><given-names>GS</given-names></name><name><surname>Ciobotaru</surname><given-names>M</given-names></name><name><surname>Agelidis</surname><given-names>VG</given-names></name></person-group><article-title xml:lang="en">Power smoothing of large solar pv plant using hybrid energy storage</article-title><source>IEEE Trans Sustain Energy</source><year>2014</year><volume>5</volume><issue>3</issue><fpage>834</fpage><lpage>842</lpage><pub-id pub-id-type="doi">10.1109/TSTE.2014.2305433</pub-id></mixed-citation></ref><ref id="CR21"><label>[21]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Yoo</surname><given-names>H</given-names></name><name><surname>Sul</surname><given-names>SK</given-names></name><name><surname>Park</surname><given-names>Y</given-names></name><etal/></person-group><article-title xml:lang="en">System integration and power-flow management for a series hybrid electric vehicle using supercapacitors and batterie</article-title><source>IEEE Trans Appl</source><year>2008</year><volume>44</volume><issue>1</issue><fpage>108</fpage><lpage>114</lpage><pub-id pub-id-type="doi">10.1109/TIA.2007.912749</pub-id></mixed-citation></ref><ref id="CR22"><label>[22]</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Dragicevic</surname><given-names>T</given-names></name><name><surname>Guerrero</surname><given-names>JM</given-names></name><name><surname>Vasquez</surname><given-names>JC</given-names></name><etal/></person-group><article-title xml:lang="en">Supervisory control of an adaptive-droop regulated DC microgrid with battery management capability</article-title><source>IEEE Trans Power Electron</source><year>2014</year><volume>29</volume><issue>2</issue><fpage>695</fpage><lpage>706</lpage><pub-id pub-id-type="doi">10.1109/TPEL.2013.2257857</pub-id></mixed-citation></ref><ref id="CR23"><label>[23]</label><mixed-citation publication-type="other">Chen Z, Ding M, Su JH (2011) Modeling and control for large capacity battery energy storage system. In: Proceeding of the 2011 IEEE electric utility deregulation and restructuring and power technologies, Weihai, 6–9 July 2011, pp 1429–1436</mixed-citation></ref></ref-list></ref-list></back></article></records><facets><facet name="subject"><facet-value count="1">Energy</facet-value><facet-value count="1">Energy Systems</facet-value><facet-value count="1">Power Electronics, Electrical Machines and Networks</facet-value><facet-value count="1">Renewable and Green Energy</facet-value></facet><facet name="keyword"><facet-value count="1">Dual droop control</facet-value><facet-value count="1">Electric vehicle</facet-value><facet-value count="1">Frequency diving coordinated control</facet-value><facet-value count="1">Hybrid energy storage system</facet-value></facet><facet name="pub"><facet-value count="1">Journal of Modern Power Systems and Clean Energy</facet-value></facet><facet name="year"><facet-value count="1">2015</facet-value></facet><facet name="country"><facet-value count="1">China</facet-value></facet><facet name="type"><facet-value count="1">Journal</facet-value></facet></facets></response>
