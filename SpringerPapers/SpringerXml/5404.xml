<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="/resources/spdi-openaccess-jats.xsl"?>
<!DOCTYPE response [
	
<!ENTITY % article SYSTEM "http://jats.nlm.nih.gov/archiving/1.2/JATS-archivearticle1.dtd">
<!ENTITY % book-part-wrapper SYSTEM "http://jats.nlm.nih.gov/extensions/bits/2.0/BITS-book2.dtd">
	]><response><apiMessage>This XML was provided by Springer Nature</apiMessage><query>doi:10.1186/1687-3963-2012-8</query><apiKey>87ba7cb21f89ce78154df796840621f4</apiKey><result><total>1</total><start>1</start><pageLength>2</pageLength><recordsDisplayed>1</recordsDisplayed></result><records><article dtd-version="1.2" article-type="research-article" xml:lang="en" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink"><front><journal-meta><journal-id journal-id-type="publisher-id">13639</journal-id><journal-id journal-id-type="doi">10.1007/13639.1687-3963</journal-id><journal-title-group><journal-title>EURASIP Journal on Embedded Systems</journal-title><abbrev-journal-title abbrev-type="publisher">J Embedded Systems</abbrev-journal-title></journal-title-group><issn pub-type="epub">1687-3963</issn><publisher><publisher-name>Springer International Publishing</publisher-name><publisher-loc>Cham</publisher-loc></publisher></journal-meta><article-meta><article-id pub-id-type="publisher-id">BMC1687-3963-2012-8</article-id><article-id pub-id-type="manuscript">9</article-id><article-id pub-id-type="doi">10.1186/1687-3963-2012-8</article-id><article-categories><subj-group subj-group-type="heading"><subject>Research</subject></subj-group><subj-group subj-group-type="article-collection" specific-use="Regular"><subject>Design Techniques and Algorithms for Power Modeling, Estimation, and Optimization in Embedded Systems</subject></subj-group></article-categories><title-group><article-title xml:lang="en">A framework for modeling and simulating energy harvesting WSN nodes with efficient power management policies</article-title></title-group><contrib-group><contrib contrib-type="author" corresp="yes"><name><surname>Castagnetti</surname><given-names>Andrea</given-names></name><address><email>andrea.castagnetti@unice.fr</email></address><xref ref-type="aff" rid="Aff1">1</xref><xref ref-type="corresp" rid="IDBMC1687396320128_cor1">a</xref></contrib><contrib contrib-type="author"><name><surname>Pegatoquet</surname><given-names>Alain</given-names></name><address><email>alain.pegatoquet@unice.fr</email></address><xref ref-type="aff" rid="Aff1">1</xref></contrib><contrib contrib-type="author"><name><surname>Belleudy</surname><given-names>Cécile</given-names></name><address><email>cecile.belleudy@unice.fr</email></address><xref ref-type="aff" rid="Aff1">1</xref></contrib><contrib contrib-type="author"><name><surname>Auguin</surname><given-names>Michel</given-names></name><address><email>michel.auguin@unice.fr</email></address><xref ref-type="aff" rid="Aff1">1</xref></contrib><aff id="Aff1"><label>1</label><institution-wrap><institution-id institution-id-type="GRID">grid.10737.32</institution-id><institution-id institution-id-type="ISNI">0000 0001 2337 2892</institution-id><institution content-type="org-division">Université de Nice Sophia Antipolis</institution><institution content-type="org-name">Laboratoire LEAT-CNRS</institution></institution-wrap><addr-line content-type="street">250 rue Albert Einstein</addr-line><addr-line content-type="postcode">06560</addr-line><addr-line content-type="city">Valbonne</addr-line><country country="FR">France</country></aff></contrib-group><author-notes><corresp id="IDBMC1687396320128_cor1"><label>a</label><email>andrea.castagnetti@unice.fr</email></corresp></author-notes><pub-date date-type="pub" publication-format="electronic"><day>16</day><month>10</month><year>2012</year></pub-date><pub-date date-type="collection" publication-format="electronic"><month>12</month><year>2012</year></pub-date><volume>2012</volume><issue seq="8">1</issue><elocation-id>8</elocation-id><history><date date-type="registration"><day>31</day><month>1</month><year>2012</year></date><date date-type="received"><day>31</day><month>1</month><year>2012</year></date><date date-type="accepted"><day>14</day><month>9</month><year>2012</year></date><date date-type="online"><day>16</day><month>10</month><year>2012</year></date></history><permissions><copyright-statement content-type="compact">© Castagnetti et al.; licensee Springer. 2012</copyright-statement><copyright-statement content-type="comment">This article is published under license to BioMed Central Ltd. This is an Open Access article distributed under the terms of the Creative Commons Attribution License (<ext-link xlink:href="http://creativecommons.org/licenses/by/2.0" ext-link-type="uri">http://creativecommons.org/licenses/by/2.0</ext-link>), which permits unrestricted use, distribution, and reproduction in any medium, provided the original work is properly cited.</copyright-statement><copyright-year>2012</copyright-year><copyright-holder>Castagnetti et al.; licensee Springer.</copyright-holder><license license-type="open-access" xlink:href="https://creativecommons.org/licenses/by/2.0"><license-p><bold>Open Access</bold>This article is distributed under the terms of the Creative Commons Attribution 2.0 International License (<ext-link xlink:href="https://creativecommons.org/licenses/by/2.0" ext-link-type="uri">https://creativecommons.org/licenses/by/2.0</ext-link>), which permits unrestricted use, distribution, and reproduction in any medium, provided the original work is properly cited.</license-p></license></permissions><abstract xml:lang="en" id="Abs1"><title>Abstract</title><sec id="ASec1"><title>Abstract</title><p>Wireless sensor networks (WSNs) require an extremely energy-efficient design. As sensor nodes have limited power sources, the problem of autonomy is crucial. Energy harvesting provides a potential solution to this problem. However, as current energy harvesters produce only a small amount of energy and their storage capacity is limited, efficient power management techniques must also be considered. In this article we address the problem of modeling and simulating energy harvesting WSN nodes with efficient power management policies. We propose furthermore a framework that permits to describe and simulate an energy harvesting sensor node by using a high level modeling approach based on power consumption and energy harvesting. The node architectural parameters as well as the on-line power management techniques will also be specified. Two new power management architectures will be introduced, taking into account energy-neutral and negative-energy conditions. Simulations results show that the throughput of a sensor node can be improved up to 50% when compared to a state of the art power management algorithm for solar harvesting WSN. The simulation framework is then used to find an efficient system sizing for a solar energy harvesting WSN node.</p></sec></abstract><kwd-group xml:lang="en"><title>Keywords</title><kwd>Sensor Node</kwd><kwd>Energy Harvesting</kwd><kwd>Power Manager</kwd><kwd>Solar Panel</kwd><kwd>Clear Channel Assessment</kwd></kwd-group><custom-meta-group><custom-meta><meta-name>publisher-imprint-name</meta-name><meta-value>Springer</meta-value></custom-meta><custom-meta><meta-name>volume-issue-count</meta-name><meta-value>1</meta-value></custom-meta><custom-meta><meta-name>issue-article-count</meta-name><meta-value>10</meta-value></custom-meta><custom-meta><meta-name>issue-toc-levels</meta-name><meta-value>0</meta-value></custom-meta><custom-meta><meta-name>issue-copyright-holder</meta-name><meta-value>The Author(s)</meta-value></custom-meta><custom-meta><meta-name>issue-copyright-year</meta-name><meta-value>2012</meta-value></custom-meta><custom-meta><meta-name>article-contains-esm</meta-name><meta-value>Yes</meta-value></custom-meta><custom-meta><meta-name>article-numbering-style</meta-name><meta-value>Unnumbered</meta-value></custom-meta><custom-meta><meta-name>article-registration-date-year</meta-name><meta-value>2012</meta-value></custom-meta><custom-meta><meta-name>article-registration-date-month</meta-name><meta-value>1</meta-value></custom-meta><custom-meta><meta-name>article-registration-date-day</meta-name><meta-value>31</meta-value></custom-meta><custom-meta><meta-name>article-toc-levels</meta-name><meta-value>0</meta-value></custom-meta><custom-meta><meta-name>toc-levels</meta-name><meta-value>0</meta-value></custom-meta><custom-meta><meta-name>volume-type</meta-name><meta-value>Regular</meta-value></custom-meta><custom-meta><meta-name>journal-product</meta-name><meta-value>ArchiveJournal</meta-value></custom-meta><custom-meta><meta-name>numbering-style</meta-name><meta-value>Unnumbered</meta-value></custom-meta><custom-meta><meta-name>article-grants-type</meta-name><meta-value>OpenChoice</meta-value></custom-meta><custom-meta><meta-name>metadata-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>abstract-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>bodypdf-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>bodyhtml-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>bibliography-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>esm-grant</meta-name><meta-value>OpenAccess</meta-value></custom-meta><custom-meta><meta-name>online-first</meta-name><meta-value>false</meta-value></custom-meta><custom-meta><meta-name>pdf-file-reference</meta-name><meta-value>BodyRef/PDF/13639_2012_Article_9.pdf</meta-value></custom-meta><custom-meta><meta-name>pdf-type</meta-name><meta-value>Typeset</meta-value></custom-meta><custom-meta><meta-name>target-type</meta-name><meta-value>OnlinePDF</meta-value></custom-meta><custom-meta><meta-name>issue-type</meta-name><meta-value>Regular</meta-value></custom-meta><custom-meta><meta-name>article-type</meta-name><meta-value>OriginalPaper</meta-value></custom-meta><custom-meta><meta-name>journal-subject-primary</meta-name><meta-value>Engineering</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Signal,Image and Speech Processing</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Circuits and Systems</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Control Structures and Microprogramming</meta-value></custom-meta><custom-meta><meta-name>journal-subject-secondary</meta-name><meta-value>Electronic Circuits and Devices</meta-value></custom-meta><custom-meta><meta-name>journal-subject-collection</meta-name><meta-value>Engineering</meta-value></custom-meta><custom-meta><meta-name>open-access</meta-name><meta-value>true</meta-value></custom-meta></custom-meta-group></article-meta><notes notes-type="ESMHint"><title>Electronic supplementary material</title><p>The online version of this article (doi:<ext-link xlink:href="10.1186/1687-3963-2012-8" ext-link-type="doi">10.1186/1687-3963-2012-8</ext-link>) contains supplementary material, which is available to authorized users.</p></notes></front><body><sec id="Sec1"><title>Introduction</title><p>Energy supply is still a limiting factor for embedded systems, such as Wireless sensor networks (WSNs). Recent technological progress has helped to decrease the power consumption of electronic devices. However, the gap between the energy that can be stored in current energy storage devices, such as batteries and supercapacitors, and the power consumption of the electronic circuitry limits the system’s lifespan. Moreover the lifespan of a WSN deployments depends on the type of events that are monitored. Published studies dealing with battery powered WSN deployments (e.g.,[<xref ref-type="bibr" rid="CR1">1</xref>]) show that lifetimes can vary from a few days to several years. High data rate applications, like structural monitoring[<xref ref-type="bibr" rid="CR2">2</xref>], can have a lifetime of few days. Environmental sensing applications, like tracking animal movements, forest fire or flood detection[<xref ref-type="bibr" rid="CR3">3</xref>] (as well as several other applications) require lower data rate and can therefore achieve longer lifetimes for an equivalent energy budget.</p><p>Energy harvesting is a promising technology for lifetime extension and it has increasingly been explored in literature. Energy is available in the environment in the form of light (solar), wind, mechanical, or thermal sources. Energy harvesting is the process of capturing energy from one of these sources, converting it into electrical energy and eventually storing it for future use. Technological advances in the design and manufacturing of energy harvesters have made it possible to increase their efficiency and integration level, thus enabling their use in embedded systems such as WSN nodes. The benefit of this technology is invaluable for WSNs. As wireless sensor nodes are often deployed in harsh and inaccessible environments, battery replacing can sometimes be impossible. The only way to overcome this problem is to directly recharge the battery on-site using the energy available from the environment.</p><p>At a first glance, energy harvesting seems to be merely an additional feature of a WSN node. However, research has shown that several aspects of environmental energy sources make them fundamentally different from batteries[<xref ref-type="bibr" rid="CR4">4</xref>]. A common objective in a battery-powered WSN is to maximize the lifetime of the network under a fixed available energy constraint. Power management algorithms try to satisfy application requirements while at the same minimizing power consumption along the network lifetime. On the other hand, energy-harvesting systems can experience a peak of energy availability. During these periods the system can provide a high quality of service (QoS) using only the energy coming from the environment. These periods, however, are interleaved with intervals where the environment provides a reduced amount of energy, or even nothing. When an energy-harvesting node operates purely on battery, the QoS must be adjusted to extend the lifetime of the node until sufficient energy is again provided by the environment.</p><p>From the situations outlined above, it becomes clear that different power management techniques can be used according to different environmental conditions. Let us consider, for example, the case where a sufficient amount of energy is harvested from the environment. The power manager can then decide to operate in energy neutrality, that is balancing the energy consumed (to perform the task) and the harvested energy.</p><p>The aim of our study is primarily to propose high level generic models that allow us to simulate an energy-harvesting node. Traditionally, the simulation of energy harvesting systems has focused on low-level details about the physical design of energy harvesters[<xref ref-type="bibr" rid="CR5">5</xref>] or power supply architectures (power converters, rectifiers, etc.)[<xref ref-type="bibr" rid="CR6">6</xref>]. However, the execution time for these types of simulations is too slow for an effective analysis of power management techniques and the level of details required limits high level design exploration. With our modeling approach, we eliminate low-level design complexity but, at the same time, we do not over-limit the design space, thus enabling early design exploration.</p><p>The resulting models are tested and validated on a recent solar energy harvesting sensor platform from Texas Instruments[<xref ref-type="bibr" rid="CR7">7</xref>]. This platform is based on a low-power microcontroller and RF transceiver and it is very energy efficient. There are other types of WSNs, like Video wireless sensor networks (VSN), that uses more complex microprocessor and sensors and are thus more power consuming. Since our modeling approach is platforms independent, it can take into account both high-end power consuming and low-end platforms. These models are the basic blocks of our simulation framework where a strong emphasis is given to power management. In this article, we propose two new power management architectures, called open-loop and closed-loop energy neutral Power Managers. These power managers have been validated in simulation using a five-day energy harvesting scenario. The power manager presented in[<xref ref-type="bibr" rid="CR8">8</xref>] has been adapted to our models and compared with our power managers.</p><p>Our framework is also used in the last section to determine an efficient system sizing for a solar energy harvesting WSN platform. We carry-out experiments in order to find the energy harvesting system setting that meets the required data throughput.</p><p>The rest of this article is organized as follows: the framework is presented in Section ‘Modeling and simulation framework’ as well as the models that compose the WSN node architecture. Relevant related studies are discussed in Section ‘Related study’. A thorough analysis of the power management strategies is developed in Section ‘Power management for energy harvesting WSN nodes’. Finally, a case study that demonstrates the relevance of our framework is presented in Section ‘Optimal system size for a solar harvesting WSN node’.</p><p>The main contributions of our article are:</p><p><list list-type="bullet"><list-item><p>A modeling framework for energy harvesting WSN, which uses a new high level modeling approach.</p></list-item><list-item><p>Two new system level power management techniques for energy harvesting wireless sensor nodes, OL-PM, and CL-PM.</p></list-item><list-item><p>An optimal system size for a solar harvesting WSN node.</p></list-item></list></p></sec><sec id="Sec2"><title>Modeling and simulation framework</title><p>Our framework for modeling and simulating energy harvesting for wireless sensor nodes is presented in this section. The framework architecture is sketched in Figure<xref rid="Fig1" ref-type="fig">1</xref>.<fig id="Fig1"><label>Figure 1</label><caption xml:lang="en"><p><bold>Architectural exploration framework.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig1_HTML.jpg"/></fig></p><p>The <italic>system specification</italic> contains the user requirements for the sensor node. Specifications may be related to non-functional attributes, such as the quality of service or node reliability. Node reliability is defined in this context as the occurrence (or absence) of service interruptions. Critical applications may require the node to remain continually operational even under stringent energy constraints. However, many WSN applications do not need such stringent constraints. In this case, the node reliability can be specified as a minimum number of hours of service per day. Besides non-functional attributes, the initial specifications may also contain requirements concerning the size and technology of the energy storage element. The technology and type of the different subsystems that compose a node (such as the battery, the energy harvester and the radio front-end) can also be specified. The user can also indicate the performance constraints under the form of average, minimum and maximum data rate. For example, these specifications for a battery may indicate the maximal and minimal discharge capacity (expressed in Ah). The type and technology of the energy harvester can also be specified. It is important to observe that the initial choice of an energy harvester is not mandatory in our framework. However, specifying an energy harvesting technology will reduce the size of the design space, thus speeding up simulations.</p><p>The models of the different subsystems are provided in the <italic>models library</italic>. This library may include different models for energy harvesters (solar panel, piezoelectric, etc.) and different energy storage elements (batteries, supercapacitors, etc.). We start by providing a model for a solar panel and an integrated Li-Ion battery. A detailed description of these models is provided in Section ‘Models library for WSN node’.</p><p>The platform execution model is defined at task level. The number of tasks that a node can execute depends on the type of application. In practice it is common to have a limited number of tasks: one task for CPU computing, one for sensing, one for RF transmissions and, in multi-hop networks, a task for receiving and forwarding messages (routing). A value of power consumption is attached to each task. Details about the task level execution model is given in Section ‘A task level platform load model’.</p><p>The node power management strategy can be specified by selecting one of the power management algorithms provided in the library. As shown later in this article, the power management strategy has a strong impact on the overall performance of the system. We believe that having different on-line power management strategies can improve the efficiency of the overall design. A thorough description of the proposed power management algorithms is given in Section ‘Power management for energy harvesting WSN nodes’.</p><p>The core of the simulator is the <italic>WSN node architecture explorer</italic>. A functional model of a node is built using both the system specifications and the models library. Initial values are assigned to the different models based on the input specifications. A simulation is run for a given configuration. Then, based on one or more figures of merit, the parameters (e.g., the size of the energy storage element) can be repeatedly adjusted in order to converge towards an efficient design. This process has been manually done so far. An example of battery and solar panel sizing for a wireless sensor node is discussed in Section ‘Optimal system size for a solar harvesting WSN node’.</p></sec><sec id="Sec3"><title>Related study</title><sec id="Sec4"><title>Energy harvesting systems</title><p>Many sources of energy and conversion devices have been considered for energy harvesting. Those systems can be classified based on the type of energy source. Photovoltaic (PV) cells[<xref ref-type="bibr" rid="CR9">9</xref>] convert electromagnetic radiation in the visible part of the spectrum into electrical power. PV devices are typically low-cost and provide relatively high efficiency. Typical values of efficiency for PV cells range from 5% to more than 25% depending on the technology. For example, silicon multicrystalline solar cells have about 20% efficiency[<xref ref-type="bibr" rid="CR10">10</xref>]. Emerging technologies such as organic polymer solar cells[<xref ref-type="bibr" rid="CR11">11</xref>] have lower efficiency—in the order of 5%. Electromagnetic converters[<xref ref-type="bibr" rid="CR12">12</xref>] which harvest radio frequency (RF) energy are typically used to power passive electronic devices such as RFID tags. However, ambient levels of RF energy are very low and spread over a wide spectrum. Harvesting a useful amount of energy using this kind of harvester for powering a typical WSN node would require large broadband antennas. Thermal-to-electricity converters[<xref ref-type="bibr" rid="CR13">13</xref>] exploit a thermal gradient to extract energy from a thermal source. The conversion efficiency is limited by the difference in the absolute temperature from the <italic>cold</italic> side to the <italic>hot</italic> side. For example, using the human body heat as a source of energy and considering an ambient temperature of 20°C would give an approximated conversion efficiency of only 5.5<italic>%</italic>[<xref ref-type="bibr" rid="CR14">14</xref>]. Mechanical energy sources can be classified in steady state, intermittent and vibration[<xref ref-type="bibr" rid="CR15">15</xref>]. Steady state sources are based on fluid flow (such as wind and air currents) and water flow. This sources are mainly used for macro scale electrical power generation as in wind turbines and hydroelectric plants. Wind generators have also been adapted for WSN nodes[<xref ref-type="bibr" rid="CR6">6</xref>]. For example Jointiff’s wind generator (Windlab Junior) can generate 500mW maximum at 2000 rpm[<xref ref-type="bibr" rid="CR16">16</xref>]. Examples of intermittent mechanical sources are vehicles passing over an energy harvesting device or human activity such as walking or typing. Mechanical vibrations sources such as heating, ventilation, and air conditioning (HVAC) ducts, manufacturing and assembly equipment can be easily found in household and industrial environments. Piezoelectric generators (PEG) exploit the piezoelectric effect to harvest energy from such mechanical energy sources. It has been shown[<xref ref-type="bibr" rid="CR5">5</xref>] that they can provide a non negligible amount of energy: about 250 <italic>μ</italic> W/cm<sup>3</sup> at 120 Hz and 2.5 m/s<sup>2</sup> for vibration based generators.</p><p>Table<xref rid="Tab1" ref-type="table">1</xref> summarizes the main parameters for the energy sources and harvesters discussed above. Considering that the peak power consumption of a recent WSN node[<xref ref-type="bibr" rid="CR7">7</xref>] is in the order of tens of mW, only the solar energy (outdoor conditions) can provide a sufficient amount of power to the platform. In reality the WSN node operates at a relatively low duty cycle. The average power consumption will then be lower than the peak value. A more precise analysis, as well as numerical examples, will be given in the following sections.<table-wrap id="Tab1"><label>Table 1</label><caption xml:lang="en"><p><bold>Common harvesting energy sources</bold>[<xref ref-type="bibr" rid="CR7">7</xref>]</p></caption><table frame="hsides" rules="groups"><thead><tr><th align="center"><p>Energy source</p></th><th align="center"><p>Power density</p></th><th align="center"><p>Conditions</p></th></tr></thead><tbody><tr><td align="center"><p>Light</p></td><td align="center"><p>15 mW/cm<sup>3</sup></p></td><td align="center"><p>Outdoor</p></td></tr><tr><td align="center"><p>Light</p></td><td align="center"><p>10 <italic>μ</italic> W/cm<sup>3</sup></p></td><td align="center"><p>Indoor</p></td></tr><tr><td align="center"><p>Electromagnetic</p></td><td align="center"><p>143 <italic>μ</italic> W/cm<sup>3</sup></p></td><td align="center"><p>4 W 900 MHz RFID @ 1 m</p></td></tr><tr><td align="center"><p>Thermal</p></td><td align="center"><p>40 <italic>μ</italic> W/cm<sup>3</sup></p></td><td align="center"><p><italic>Δ</italic> T = 5 °C</p></td></tr><tr><td align="center"><p>Mechanical vibration</p></td><td align="center"><p>200 <italic>μ</italic> W/cm<sup>3</sup></p></td><td align="center"/></tr></tbody></table></table-wrap></p></sec><sec id="Sec5"><title>Power management for energy harvesting WSN</title><p>Besides the problem of designing an energy harvesting system that effectively extracts and stores energy, an efficient power management policy must also be considered. Research on energy harvesting power management has recently gained lot of attention, especially in the field of WSNs[<xref ref-type="bibr" rid="CR8">8</xref>, <xref ref-type="bibr" rid="CR18">18</xref>–<xref ref-type="bibr" rid="CR21">21</xref>]. One of the earliest studies on energy harvesting power management can be found in reference[<xref ref-type="bibr" rid="CR22">22</xref>]. Duty-cycling is used to adjust the power consumption of a WSN node. During the initial phase the characteristics of the energy source are learned by the node. Then a fixed duty-cycle is applied. The effectiveness of this solution depends on the variability of the energy source. A more principled algorithm for dynamically adapting the duty-cycle of a sensor node is discussed in[<xref ref-type="bibr" rid="CR8">8</xref>]. The authors assume that the energy source is periodic. A period is then divided into intervals of equal duration. An estimate of the energy input, that is assumed to be constant over the course of a single block, is computed from historical data. A duty-cycle is then set for each block based on an initial estimate. Online changes are applied if there is a mismatch between the actual energy received and the energy estimated by the model. The effectiveness of this power management solution, that is the ability to adapt to environmental variations, mainly depends on the initial choice of the size of the intervals. In[<xref ref-type="bibr" rid="CR8">8</xref>], this duration was fixed to 30 min. The authors also present the notion of energy neutral operation, which is the ability to operate in a way that the energy used is always less or equal to the energy harvested. This concept is then used to develop the energy neutral power manager discussed above.</p><p>The energy neutral concept defined in[<xref ref-type="bibr" rid="CR8">8</xref>] is extended in[<xref ref-type="bibr" rid="CR19">19</xref>]. Here the authors use techniques from the adaptive control theory to increase the adaptivity of an energy harvesting power manager. This power manager relies solely on the current state of charge of the battery to make duty-cycling decisions. This approach is thus model-free with respect to the energy source. The effectiveness of the power manager is validated in simulation. Experimental results show that an average 16% performance improvement can be achieved when compared to the power manager proposed by[<xref ref-type="bibr" rid="CR8">8</xref>].</p></sec></sec><sec id="Sec6"><title>Models library for WSN node</title><sec id="Sec7"><title>A task level platform load model</title><p>Figure<xref rid="Fig2" ref-type="fig">2</xref> represents a formalization of the platform load. As shown, the platform load is first characterized by a wake-up period represented by <italic>T</italic><sub><italic>wi</italic></sub>. During this period, the platform is first active, then inactive. An active period may be composed of several activities that correspond to different levels of current consumption. A typical active period is composed of Sensor, CPU and RF activities. However, in order to get as general platform model as possible, different activities having their own individual period, sometimes differing from the wake-up period, can be defined.<fig id="Fig2"><label>Figure 2</label><caption xml:lang="en"><p><bold>Formalization of the platform load.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig2_HTML.jpg"/></fig></p><p>For example, in Figure<xref rid="Fig2" ref-type="fig">2</xref> three different kinds of activities have been defined: sensing, transmission and forwarding.</p><p>The sensing activity is executed every wake-up period (<italic>T</italic><sub>wi</sub>), the transmission occurs with a period <italic>T</italic><sub>Tx</sub> and the forwarding with a period <italic>T</italic><sub>fwd</sub>. For cooperative WSNs, each node in the network is in charge of forwarding messages they receive from other nodes in order to reach the sink. For this reason, we have also included a forwarding mode in our model. In this mode, the node first listens to the radio, and if a message from another node is received, it will forward it to the next hop in the network.</p><p>During the inactive period the system enters a sleep state for power saving. <italic>Q</italic><sub>sense</sub> is the charge delivered by the battery when the sensing task is executed, which accounts for the current consumed by the microcontroller and the sensor.</p><p>When either the transmission or the reception task are also executed, there is an increase in the current consumption and the battery delivers a supplementary <italic>Q</italic><sub>Tx</sub>or (<italic>Q</italic><sub>Tx</sub> + <italic>Q</italic><sub>RX</sub>) Ampere-hour of charge compared to the previous case.</p><p>The rate at which the battery is discharged depends on the average discharge current. This parameter can be computed using our model and is represented by the <italic>α</italic> factor that is defined as follows:<disp-formula id="Equ1"><label>1</label><alternatives><mml:math id="Equ1_Math"><mml:mi>α</mml:mi><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:mi>Q</mml:mi></mml:mrow><mml:mrow><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">wi</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:mfrac></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ1_HTML.gif"/></alternatives></disp-formula></p><p><italic>α</italic> denotes the charge consumed by the platform over a wake-up period (<italic>T</italic><sub>wi</sub>). In other words <italic>α</italic> is the average current delivered by the battery during a wake-up period. This parameter can be computed independently for each activity (e.g., sensing, RF transmission and RF reception) enabling a modular and accurate characterization of the application.</p></sec><sec id="Sec8"><title>Energy harvesting and battery recharge circuit integrated model</title><p>The energy harvester and recharge circuit are modeled using a parameter, called <italic>β</italic>, which is a function of the energy that is available from the environment. For example, for a solar panel, <italic>β</italic> will be a function of light intensity. The <italic>β</italic> parameter models both the efficiency of the energy harvester and the efficiency of the voltage regulator, as well as the circuit used to recharge the battery. This parameter is expressed in Ampere and indicates the rate at which the energy harvester can recharge the battery under a fixed amount of energy available from the environment.</p><p>Figure<xref rid="Fig3" ref-type="fig">3</xref> shows the <italic>β</italic> parameter as a function of light intensity (expressed in Lux) for a solar-harvesting system. The curve was extracted through experiments on a 2.25in × 2.25in solar panel and a 100 <italic>μ</italic> Ah Li-Ion battery[<xref ref-type="bibr" rid="CR7">7</xref>]. More parameters can also be taken into account in order to refine the model, such as the type of light (fluorescent, incandescent, sun light) and its spectral characteristics, the quantum efficiency of the solar cell, etc.<fig id="Fig3"><label>Figure 3</label><caption xml:lang="en"><p><bold><italic>β</italic></bold><bold>for different light conditions.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig3_HTML.jpg"/></fig></p><p>Although simple, our model provides a good approximation of the energy that can be harvested by the system and helps define the application load requirements and power management policies. A detailed description of the procedure used to characterize the <italic>β</italic> parameter can be found in[<xref ref-type="bibr" rid="CR23">23</xref>].</p></sec><sec id="Sec9"><title>A battery state of charge model for periodic workload</title><p>Using the <italic>α</italic> and <italic>β</italic> parameters introduced in Sections ‘A task level platform load model’ and ‘Energy harvesting and battery recharge circuit integrated model’, the state of charge (SoC) of a battery for the next <italic>n</italic> wake-up periods (Twi) can be computed using Equation (<xref rid="Equ2" ref-type="disp-formula">2</xref>):<disp-formula id="Equ2"><label>2</label><alternatives><mml:math id="Equ2_Math"><mml:mtable><mml:mtr><mml:mtd><mml:mtext mathvariant="normal">SoC</mml:mtext><mml:mo>(</mml:mo><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mi>n</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">wi</mml:mtext></mml:mrow></mml:msub><mml:mo>)</mml:mo><mml:mo>=</mml:mo><mml:mtext mathvariant="normal">SoC</mml:mtext><mml:mo>(</mml:mo><mml:mi>t</mml:mi><mml:mo>)</mml:mo><mml:mo>+</mml:mo><mml:mo>[</mml:mo><mml:mi>β</mml:mi><mml:mo>−</mml:mo><mml:mo>(</mml:mo><mml:msub><mml:mrow><mml:mi>α</mml:mi></mml:mrow><mml:mrow><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mrow><mml:mi>α</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">Tx</mml:mtext></mml:mrow></mml:msub><mml:mspace width="0.3em"/><mml:mfrac><mml:mrow><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">wi</mml:mtext></mml:mrow></mml:msub></mml:mrow><mml:mrow><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">Tx</mml:mtext></mml:mrow></mml:msub></mml:mrow></mml:mfrac><mml:mo>+</mml:mo></mml:mtd></mml:mtr><mml:mtr><mml:mtd><mml:mspace width="8.5em"/><mml:mo>+</mml:mo><mml:msub><mml:mrow><mml:mi>α</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">fwd</mml:mtext></mml:mrow></mml:msub><mml:mspace width="0.3em"/><mml:mfrac><mml:mrow><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">wi</mml:mtext></mml:mrow></mml:msub></mml:mrow><mml:mrow><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">fwd</mml:mtext></mml:mrow></mml:msub></mml:mrow></mml:mfrac><mml:mo>)</mml:mo><mml:mo>]</mml:mo><mml:mspace width="0.3em"/><mml:mi>n</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">wi</mml:mtext></mml:mrow></mml:msub><mml:mo>−</mml:mo><mml:msub><mml:mrow><mml:mi>K</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">leak</mml:mtext></mml:mrow></mml:msub><mml:mspace width="0.3em"/><mml:mi>n</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">wi</mml:mtext></mml:mrow></mml:msub></mml:mtd></mml:mtr></mml:mtable></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ2_HTML.gif"/></alternatives></disp-formula></p><p>In this equation, <italic>α</italic><sub><italic>s</italic></sub>, <italic>α</italic><sub>Tx</sub>, and <italic>α</italic><sub>fwd</sub> are the current consumption for sensing, transmission and forwarding (reception and transmission), respectively. Equation (<xref rid="Equ2" ref-type="disp-formula">2</xref>) is only true if the conditions (3), (4), and (5) are respected.<disp-formula id="Equ3"><label>3</label><alternatives><mml:math id="Equ3_Math"><mml:mtable class="align" columnalign="left"><mml:mtr><mml:mtd class="align-1"><mml:mspace width="4em"/><mml:mtext mathvariant="normal">SoC</mml:mtext><mml:mo>(</mml:mo><mml:mi>t</mml:mi><mml:mo>=</mml:mo><mml:mn>0</mml:mn><mml:mo>)</mml:mo><mml:mo>=</mml:mo><mml:msub><mml:mrow><mml:mtext mathvariant="normal">SoC</mml:mtext></mml:mrow><mml:mrow><mml:mtext>max</mml:mtext></mml:mrow></mml:msub></mml:mtd></mml:mtr></mml:mtable></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ3_HTML.gif"/></alternatives></disp-formula></p><p><disp-formula id="Equ4"><label>4</label><alternatives><mml:math id="Equ4_Math"><mml:mtable class="align" columnalign="left"><mml:mtr><mml:mtd class="align-1"><mml:msub><mml:mrow><mml:mtext mathvariant="normal">SoC</mml:mtext></mml:mrow><mml:mrow><mml:mtext>min</mml:mtext></mml:mrow></mml:msub><mml:mo>≤</mml:mo><mml:mtext mathvariant="normal">SoC</mml:mtext><mml:mo>(</mml:mo><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mi>n</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">wi</mml:mtext></mml:mrow></mml:msub><mml:mo>)</mml:mo><mml:mo>≤</mml:mo><mml:msub><mml:mrow><mml:mtext mathvariant="normal">SoC</mml:mtext></mml:mrow><mml:mrow><mml:mtext>max</mml:mtext></mml:mrow></mml:msub></mml:mtd></mml:mtr></mml:mtable></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ4_HTML.gif"/></alternatives></disp-formula></p><p><disp-formula id="Equ5"><label>5</label><alternatives><mml:math id="Equ5_Math"><mml:mtable class="align" columnalign="left"><mml:mtr><mml:mtd class="align-1"><mml:mi>β</mml:mi><mml:mo>,</mml:mo><mml:mspace width="0.3em"/><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>α</mml:mi></mml:mrow><mml:mrow><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mo>,</mml:mo><mml:mspace width="0.3em"/><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>α</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">Tx</mml:mi></mml:mrow></mml:msub><mml:mspace width="0.3em"/><mml:mspace width="0.3em"/><mml:mtext>and</mml:mtext><mml:mspace width="0.3em"/><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>α</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">fwd</mml:mi></mml:mrow></mml:msub><mml:mspace width="0.3em"/><mml:mspace width="0.3em"/><mml:mtext>are constants on</mml:mtext><mml:mspace width="0.3em"/><mml:mspace width="0.3em"/><mml:mo>[</mml:mo><mml:mi>t</mml:mi><mml:mo>,</mml:mo><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mi>n</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">wi</mml:mi></mml:mrow></mml:msub><mml:mo>]</mml:mo></mml:mtd></mml:mtr></mml:mtable></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ5_HTML.gif"/></alternatives></disp-formula></p><p>SoC<sub>max</sub>represents the capacity of the battery. We consider that the battery is fully charged at <italic>t</italic>=0 (3). As the battery can neither store more charge than its capacity nor be discharged more than its limit, its SoC is bounded between SoC<sub>max</sub>and SoC<sub>min</sub>(4). Finally, and for sake of simplicity, Equation (<xref rid="Equ2" ref-type="disp-formula">2</xref>) is true if the luminosity (<italic>β</italic>) and the average discharge current over a wake-up period (<italic>α</italic>) are constants (5). If these parameters fluctuate during this period, Equation (<xref rid="Equ2" ref-type="disp-formula">2</xref>) can be easily divided into smaller period intervals. The leakage current is modeled with the <italic>K</italic><sub>leak</sub>parameter. This parameter represents two effects: the battery self-discharge and the current drawn by the platform during inactive periods (e.g., the current consumption of the low-power mode).</p></sec><sec id="Sec10"><title>Model validation using the TI EZ430 platform</title><p>We have conducted a series of tests in order to validate our SoC estimation approach. The Texas Instruments EZ430 solar energy harvesting platform[<xref ref-type="bibr" rid="CR7">7</xref>] was used as experimental platform. Its solar panel is optimized for operating indoor under low-intensity fluorescent light. Figure<xref rid="Fig4" ref-type="fig">4</xref> demonstrates the power supply architecture of the EZ430 solar energy harvesting platform. The output of the 2.25in × 2.25in solar panel is connected to a boost converter that raises the voltage to the necessary level needed to recharge the battery, or power the system.<fig id="Fig4"><label>Figure 4</label><caption xml:lang="en"><p><bold>EZ430 power supply architecture.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig4_HTML.jpg"/></fig></p><p>The charger circuit is controlled by a control circuit that can disconnect it from the boost converter if the output voltage falls below the level needed to recharge the battery. A protection circuit is placed at the output of the two Lithium thin-film 50 <italic>μ</italic> Ah rechargeable batteries, in order to protect them from fully discharging. Finally, a 1000 <italic>μ</italic> F capacitor is connected to the output of the batteries to mitigate the effect of the pulse discharge current. The application board is also equipped with an MSP430 microcontroller and a CC2500 RF transceiver. The board is programmed with an End Device (ED) application that periodically sends a packet through the air to a base station. During the idle period both the microcontroller and the radio chip are put into a sleep state. The platform load characterization is performed by measuring the current consumed for RF transmission tasks of an end-device. Measures of current levels are depicted in Figure<xref rid="Fig5" ref-type="fig">5</xref>.<fig id="Fig5"><label>Figure 5</label><caption xml:lang="en"><p><bold>Measured current for the EZ430 platform.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig5_HTML.jpg"/></fig></p><p>As shown, two activities are performed by the node for each individual wake-up period: an RF transmission and a CPU task. Equation (<xref rid="Equ2" ref-type="disp-formula">2</xref>) was used to predict the SoC, then the lifetime (LT) of the system under different light conditions. The estimated and measured lifetimes (LT) are compared for different wake-up periods. The results are shown in Table<xref rid="Tab2" ref-type="table">2</xref>.<table-wrap id="Tab2"><label>Table 2</label><caption xml:lang="en"><p><bold>Validation of the SoC estimation technique (LT in minutes)</bold></p></caption><table frame="hsides" rules="groups"><thead><tr><th align="left"/><th align="left"/><th align="center" colspan="2"><p>0 lux</p></th><th align="center" colspan="2"><p>≃ 200 lux</p></th><th align="center" colspan="2"><p>≃ 700 lux</p></th></tr></thead><tbody><tr><td align="center"><p><bold><italic>T</italic></bold><sub><bold>wi</bold></sub><bold>[sec]</bold></p></td><td align="center"><p><bold><italic>α</italic></bold><bold>[</bold><bold><italic>μ</italic></bold><bold>A</bold><bold>]</bold></p></td><td align="center"><p><bold>LT</bold></p></td><td align="center"><p><bold>LT</bold></p></td><td align="center"><p><bold>LT</bold></p></td><td align="center"><p><bold>LT</bold></p></td><td align="center"><p><bold>LT</bold></p></td><td align="center"><p><bold>LT</bold></p></td></tr><tr><td align="center"/><td align="center"/><td align="center"><p><bold>(exp)</bold></p></td><td align="center"><p><bold>(model)</bold></p></td><td align="center"><p><bold>(exp)</bold></p></td><td align="center"><p><bold>(model)</bold></p></td><td align="center"><p><bold>(exp)</bold></p></td><td align="center"><p><bold>(model)</bold></p></td></tr><tr><td align="center"><p>1</p></td><td align="center"><p>128.52</p></td><td align="center"><p>28</p></td><td align="center"><p>29</p></td><td align="center"><p>50</p></td><td align="center"><p>38</p></td><td align="center"><p>88</p></td><td align="center"><p>78</p></td></tr><tr><td align="center"><p>2</p></td><td align="center"><p>64.26</p></td><td align="center"><p>54</p></td><td align="center"><p>59</p></td><td align="center"><p>140</p></td><td align="center"><p>112</p></td><td align="center"><p>/</p></td><td align="center"><p>+ <italic>∞</italic></p></td></tr><tr><td align="center"><p>3</p></td><td align="center"><p>42.84</p></td><td align="center"><p>83</p></td><td align="center"><p>88</p></td><td align="center"><p>312</p></td><td align="center"><p>332</p></td><td align="center"><p>/</p></td><td align="center"><p>+ <italic>∞</italic></p></td></tr><tr><td align="center"><p>4</p></td><td align="center"><p>32.13</p></td><td align="center"><p>107</p></td><td align="center"><p>117</p></td><td align="center"><p>/</p></td><td align="center"><p>+ <italic>∞</italic></p></td><td align="center"><p>/</p></td><td align="center"><p>+ <italic>∞</italic></p></td></tr><tr><td align="center"><p>6</p></td><td align="center"><p>21.42</p></td><td align="center"><p>162</p></td><td align="center"><p>176</p></td><td align="center"><p>/</p></td><td align="center"><p>+ <italic>∞</italic></p></td><td align="center"><p>/</p></td><td align="center"><p>+ <italic>∞</italic></p></td></tr><tr><td align="center"><p>10</p></td><td align="center"><p>12.85</p></td><td align="center"><p>290</p></td><td align="center"><p>294</p></td><td align="center"><p>/</p></td><td align="center"><p>+ <italic>∞</italic></p></td><td align="center"><p>/</p></td><td align="center"><p>+ <italic>∞</italic></p></td></tr><tr><td align="center"><p>20</p></td><td align="center"><p>6.43</p></td><td align="center"><p>585</p></td><td align="center"><p>587</p></td><td align="center"><p>/</p></td><td align="center"><p>+ <italic>∞</italic></p></td><td align="center"><p>/</p></td><td align="center"><p>+ <italic>∞</italic></p></td></tr></tbody></table></table-wrap></p><p>As can be observed, the model is accurate as the error always remains below 10% for 0 lux. It is interesting to note that with a <italic>T</italic><sub>wi</sub>of 20 s the tests lasts for 10 h while the lifetime prediction error is only 2 min. The prediction error slightly increases for 200 and 700 lux, but the model still gives accurate results. In fact, during experiments the luminosity fluctuates around these values. This is why we observe a higher deviation of the model than without energy harvesting (<italic>β</italic>=0). At 200 lux (respectively, 700 lux) and for a <italic>T</italic><sub>wi</sub> higher or equal to 4 s (respectively, 2 s) the energy harvested (<italic>β</italic>) is higher than the energy consumed (<italic>α</italic>), such that the system functions in energy neutral conditions. Therefore the LT is theoretically infinite (<italic>∞</italic>). In Spite of the fact that our model has been validated on the TI EZ430 platform, we believe it is applicable to a wide range of platforms.</p></sec><sec id="Sec11"><title>Range of applicability of the models</title><p>We first analyze the platform load model (<italic>α</italic>) proposed in Section ‘A task level platform load model’. The power consumption usually changes according to the voltage supply. Current electronics systems can be powered with a wide voltage range. If a switching regulator (e.g., a buck regulator) is used to provide regulated power to the load, then the current that it draws from the battery will change according to its input and output voltage. In this case, the <italic>α</italic> parameter must be rescaled by a factor that takes into account the efficiency of the switching regulator. On the other hand, if a linear regulator is used, as in our case, it is reasonable to consider <italic>α</italic> to be independent from the battery voltage.</p><p>In Section ‘Energy harvesting and battery recharge circuit integrated model’, we proposed to model the battery recharge process with a <italic>β</italic> parameter, which is a function of the light intensity. The solar cell and recharge circuit are then modeled as a simple current generator. Some assumptions must be made in order for this model to be valid. Firstly, the operating point of a solar panel must be forced by a proper circuit (i.e., MPPT control circuit). Moreover, the efficiency of the recharge circuit will vary greatly depending on the output voltage of the solar cell. The capacity of the battery will also have a huge impact on the recharge process. In our model, all the variables having an impact on the efficiency of the recharge process are implicitly included in the <italic>β</italic> parameter.</p><p>Moreover, the energy harvesting and battery recharge model can also be extended to other energy harvesting systems. The characterization procedure described in Section ‘Energy harvesting and battery recharge circuit integrated model’, is not associated with a specific energy harvester. The function plotted in Figure<xref rid="Fig3" ref-type="fig">3</xref>, represents the relation between the battery recharge current and the intensity of the external source (the light intensity in our case). If the same function would have to be computed for a thermoelectric harvester, then it will represent the relation between the temperature gradient and the <italic>β</italic> parameter.</p></sec></sec><sec id="Sec12"><title>Power management for energy harvesting WSN nodes</title><p>In this section, we consider the problem of adapting the performance and power consumption of the system to the available energy. Performance scaling is achieved by varying the wake-up period (<italic>T</italic><sub>wi</sub>) of the sensor node. Duty-cycling between active and low power states is very effective for reducing the power consumption. Moreover, almost all of the WSN nodes features one or more low-power states.</p><p>A generic power management system is shown in Figure<xref rid="Fig6" ref-type="fig">6</xref>. The system is composed of three main blocks: the energy harvesting sensor, one or more power management algorithms and a SoC predictor. An energy harvesting sensor is used to estimate the current level of harvested energy. This value is then used to compute the recharge rate (<italic>β</italic>) based on the battery recharge model. The harvesting sensor can be made into a current meter that measures the output current of the energy harvester. The power management algorithms are in charge of setting the <italic>T</italic><sub>wi</sub>of the platform. Different algorithms can be used depending on the energy availability and the present state of charge of the battery. Three types of operations are considered:</p><p><list list-type="bullet"><list-item><p>Energy-neutral: the system works only with the energy coming from the environment. However a portion of the harvested energy can also be used to recharge the battery.</p></list-item></list><fig id="Fig6"><label>Figure 6</label><caption xml:lang="en"><p><bold>A generic power management architecture.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig6_HTML.jpg"/></fig></p><p><list list-type="bullet"><list-item><p>Negative-energy: as soon as there is no energy to harvest, the operation is only supported by the energy stored in the battery.</p></list-item><list-item><p>Positive-energy: if the harvested energy exceeds the required energy to operate at peak performance, the recharge rate of the battery can be improved.</p></list-item></list></p><p>Those algorithms are detailed in Sections ‘An open-loop energy neutral power manager (OL-PM)’ and ‘Closed-loop energy neutral power manager’.</p><sec id="Sec13"><title>An open-loop energy neutral power manager (OL-PM)</title><p>Figure<xref rid="Fig7" ref-type="fig">7</xref> shows the architecture of our Open-loop power manager (OL-PM). We use the term open-loop to underline the fact that the decision of the power manager is based solely on the current value of <italic>β</italic>. As a result, the power manager does not use the SoC prediction to compute the current value of <italic>T</italic><sub>wi</sub>. The system is composed of four main blocks:<fig id="Fig7"><label>Figure 7</label><caption xml:lang="en"><p><bold>Open-loop power manager architecture.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig7_HTML.jpg"/></fig></p><p><italic>Power manager software timer</italic>: The power manager is periodically executed, with a period that is a multiple of the wake-up period <italic>T</italic><sub>wi</sub>. Every time <italic>T</italic><sub>wi</sub> changes, the power manager wake-up period (<italic>T</italic><sub>pm</sub>) is set to <italic>n</italic> times <italic>T</italic><sub>wi</sub>.<disp-formula id="Equ6"><label>6</label><alternatives><mml:math id="Equ6_Math"><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">pm</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mi>n</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">wi</mml:mi></mml:mrow></mml:msub></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ6_HTML.gif"/></alternatives></disp-formula></p><p>Limiting the execution of the power manager reduces its CPU overhead but limits its reactiveness. The trade-off between overhead and reactivity can be tuned by adjusting the <italic>n</italic> parameter.</p><p><italic>Energy harvesting sensor and battery recharge model</italic>: this block estimates the recharge rate of the battery (<italic>β</italic>).</p><p><italic>System parameters database (AppDB)</italic>: different values for the wake-up period <italic>T</italic><sub>wi</sub> as well as the task level platform loads (<italic>α</italic><sub><italic>i</italic></sub>) are stored in a database.</p><p><italic>Energy neutral power manager</italic>: this block implements the power management strategy. By balancing the harvested and consumed energy (i.e., <italic>α</italic> and <italic>β</italic>), the system works only with the energy coming from the environment. As a results, the SoC of the battery should remain constant over the time. Its value relies on the way the system has functioned, i.e., how much time the system has worked in both negative and positive energy conditions. Using Equation (<xref rid="Equ2" ref-type="disp-formula">2</xref>) the condition for energy neutrality for the next <italic>n</italic><italic>T</italic><sub>wi</sub>periods can be expressed as follows:<disp-formula id="Equ7"><label>7</label><alternatives><mml:math id="Equ7_Math"><mml:mi mathvariant="normal">SoC</mml:mi><mml:mo>(</mml:mo><mml:mi>t</mml:mi><mml:mo>)</mml:mo><mml:mo>=</mml:mo><mml:mi mathvariant="normal">SoC</mml:mi><mml:mo>(</mml:mo><mml:mi>t</mml:mi><mml:mo>+</mml:mo><mml:mi>n</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">wi</mml:mi></mml:mrow></mml:msub><mml:mo>)</mml:mo><mml:mo>−</mml:mo><mml:msub><mml:mrow><mml:mi>Q</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">pm</mml:mi></mml:mrow></mml:msub><mml:mo>,</mml:mo></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ7_HTML.gif"/></alternatives></disp-formula></p><p>where <italic>Q</italic><sub>pm</sub> is the charge consumed by the power manager. Replacing SoC(<italic>t</italic> + <italic>n</italic><italic>T</italic><sub>wi</sub>) using Equation (<xref rid="Equ2" ref-type="disp-formula">2</xref>) gives:<disp-formula id="Equ8"><label>8</label><alternatives><mml:math id="Equ8_Math"><mml:mo>(</mml:mo><mml:mi>β</mml:mi><mml:mo>−</mml:mo><mml:mi>α</mml:mi><mml:mo>)</mml:mo><mml:mspace width="0.3em"/><mml:mi>n</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">wi</mml:mi></mml:mrow></mml:msub><mml:mo>−</mml:mo><mml:msub><mml:mrow><mml:mi>K</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">leak</mml:mi></mml:mrow></mml:msub><mml:mspace width="0.3em"/><mml:mi>n</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">wi</mml:mi></mml:mrow></mml:msub><mml:mo>−</mml:mo><mml:msub><mml:mrow><mml:mi>Q</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">pm</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mn>0</mml:mn></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ8_HTML.gif"/></alternatives></disp-formula></p><p>By replacing <italic>α</italic> with Equation (<xref rid="Equ1" ref-type="disp-formula">1</xref>), the energy neutral wake-up period can then be expressed as a function of the following parameters:<disp-formula id="Equ9"><label>9</label><alternatives><mml:math id="Equ9_Math"><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">wi</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mstyle mathsize="1.61em"><mml:mfenced close="" open="⌈" separators=""/></mml:mstyle><mml:mfrac><mml:mrow><mml:mi>Q</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mrow><mml:mi>Q</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">pm</mml:mi></mml:mrow></mml:msub><mml:mo>/</mml:mo><mml:mi>n</mml:mi></mml:mrow><mml:mrow><mml:mi>β</mml:mi><mml:mo>−</mml:mo><mml:msub><mml:mrow><mml:mi>K</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">leak</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:mfrac><mml:mstyle mathsize="1.61em"><mml:mfenced close="" open="⌉" separators=""/></mml:mstyle></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ9_HTML.gif"/></alternatives></disp-formula></p><p>As <italic>T</italic><sub>wi</sub> is an integer, the result of Equation (<xref rid="Equ9" ref-type="disp-formula">9</xref>) is approximated (the decimal part is removed). The ceil function returns the smallest integer not less than its argument. So Equation (<xref rid="Equ9" ref-type="disp-formula">9</xref>) is used to round toward the nearest energy neutral. Note that returning the nearest integer value (i.e., rounding function) can also be used. However, with the ceil operation the <italic>T</italic><sub>wi</sub> will always be greater than the real energy neutral value. The residual energy that is not consumed is used to recharge the battery. Using the ceil function is therefore equivalent to operate the system in positive-energy condition.</p></sec><sec id="Sec14"><title>Closed-loop energy neutral power manager</title><p>The architecture of our Closed-Loop power manager (CL-PM) is depicted in Figure<xref rid="Fig8" ref-type="fig">8</xref>. The CL-PM is composed of same building blocks as the OL-PM, plus the negative-energy power manager, the zero-energy-interval (ZEI) predictor and the SoC predictor. As a result, two power management strategies are available: the energy-neutral and the negative-energy technique. The name <italic>closed-loop</italic> is used to emphasize the fact that an output signal (SoC(<italic>t</italic> + <italic>n</italic><italic>T</italic><sub>wi</sub>)) is fed back into the input of the negative-energy power manager block. The Zero-Energy-Interval or ZEI, defines the periods during which the energy harvested from the environment is approximatively nil. As the duration of those periods is generally unknown, the power manager uses a predictor to estimate the ZEIs durations. A simplified block diagram of the ZEI predictor is shown in Figure<xref rid="Fig9" ref-type="fig">9</xref>.<fig id="Fig8"><label>Figure 8</label><caption xml:lang="en"><p><bold>Closed-loop power manager architecture.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig8_HTML.jpg"/></fig><fig id="Fig9"><label>Figure 9</label><caption xml:lang="en"><p><bold>The zero-energy-interval predictor.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig9_HTML.jpg"/></fig></p><p>When the harvested energy drops under a given threshold (<italic>β</italic><sub><italic>th</italic></sub>) a <italic>ZEI</italic> flag is set to indicate to the power manager that an energyless period has begun. As soon as this flag is set, a timer is started. This timer is stopped when the harvested energy rises up again the same threshold. The ZEI predictor provides two output signals:</p><p><list list-type="bullet"><list-item><p><italic>ZEI</italic>: a boolean that indicates if the incoming <italic>β</italic> is lower than <italic>β</italic><sub><italic>th</italic></sub>. An hysteresis comparator is used to prevent oscillation.</p></list-item><list-item><p><italic>D</italic><sub>ZEI</sub>: an integer value expressed in seconds used to estimate the ZEI duration. As shown in Figure<xref rid="Fig9" ref-type="fig">9</xref>, this value is computed as the average of the last four measured <italic>D</italic><sub>ZEI</sub>. If less than four measures are available, a default value of 14 h (50400 s) is used.</p></list-item></list></p><p>Figure<xref rid="Fig9" ref-type="fig">9</xref> shows the behavior of the ZEI predictor during five days for a solar energy harvesting system. The hysteresis of the comparator prevents undesired oscillation of the ZEI signal and thus provides an accurate estimation of the ZEI duration.</p><p><italic>Negative-Energy</italic> strategy: During a ZEI, <italic>β</italic> is under the threshold <italic>β</italic><sub><italic>th</italic></sub>, so the energy-neutral power management can not respect the equality given in Equation (<xref rid="Equ7" ref-type="disp-formula">7</xref>). Another strategy must be used in order to find a <italic>T</italic><sub>wi</sub> period that prevents a complete discharge of the battery. If we call <italic>t</italic><sup>∗</sup>the start of a ZEI, the condition that must be respected is:<disp-formula id="Equ10"><label>10</label><alternatives><mml:math id="Equ10_Math"><mml:mi mathvariant="normal">SoC</mml:mi><mml:mo>(</mml:mo><mml:msup><mml:mrow><mml:mi>t</mml:mi></mml:mrow><mml:mrow><mml:mo>∗</mml:mo></mml:mrow></mml:msup><mml:mo>)</mml:mo><mml:mo>+</mml:mo><mml:mi>α</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>D</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">ZEI</mml:mi></mml:mrow></mml:msub><mml:mo>−</mml:mo><mml:msub><mml:mrow><mml:mi>K</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">leak</mml:mi></mml:mrow></mml:msub><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>D</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">ZEI</mml:mi></mml:mrow></mml:msub><mml:mo>≥</mml:mo><mml:msub><mml:mrow><mml:mi mathvariant="normal">SoC</mml:mi></mml:mrow><mml:mrow><mml:mo>min</mml:mo></mml:mrow></mml:msub><mml:mo>+</mml:mo><mml:mi>M</mml:mi><mml:mo>,</mml:mo></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ10_HTML.gif"/></alternatives></disp-formula></p><p>where SoC(<italic>t</italic><sup>∗</sup>) is the state of charge of the battery at the beginning of the ZEI, <italic>D</italic><sub>ZEI</sub>is an estimation of the duration of the ZEI and <italic>M</italic> is the battery discharge margin. This safety margin <italic>M</italic> is used to counterbalance the inaccuracies in the SoC and <italic>D</italic><sub>ZEI</sub> estimations. By replacing <italic>α</italic> with Equation (<xref rid="Equ1" ref-type="disp-formula">1</xref>), the constraint for <italic>T</italic><sub>wi</sub>can be expressed as follows:<disp-formula id="Equ11"><label>11</label><alternatives><mml:math id="Equ11_Math"><mml:msub><mml:mrow><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">wi</mml:mi></mml:mrow></mml:msub><mml:mo>≥</mml:mo><mml:mfrac><mml:mrow><mml:mi>Q</mml:mi><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>D</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">ZEI</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mrow><mml:mi mathvariant="normal">SoC</mml:mi><mml:mo>(</mml:mo><mml:msup><mml:mrow><mml:mi>t</mml:mi></mml:mrow><mml:mrow><mml:mo>∗</mml:mo></mml:mrow></mml:msup><mml:mo>)</mml:mo><mml:mo>−</mml:mo><mml:msub><mml:mrow><mml:mi>K</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">leak</mml:mi></mml:mrow></mml:msub><mml:mspace width="0.3em"/><mml:msub><mml:mrow><mml:mi>D</mml:mi></mml:mrow><mml:mrow><mml:mi mathvariant="normal">ZEI</mml:mi></mml:mrow></mml:msub><mml:mo>−</mml:mo><mml:mo>(</mml:mo><mml:msub><mml:mrow><mml:mi mathvariant="normal">SoC</mml:mi></mml:mrow><mml:mrow><mml:mo>min</mml:mo></mml:mrow></mml:msub><mml:mo>+</mml:mo><mml:mi>M</mml:mi><mml:mo>)</mml:mo></mml:mrow></mml:mfrac></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ11_HTML.gif"/></alternatives></disp-formula></p><p>As we can see the <italic>T</italic><sub>wi</sub> is inversely proportional to SoC(<italic>t</italic><sup>∗</sup>). Therefore the more the charge stored in the battery the lower the <italic>T</italic><sub>wi</sub>and thus the higher the data-rate during the energy-less period. The power consumption (<italic>Q</italic>) and the leakage (<italic>K</italic><sub>leak</sub>) act in the opposite sense increasing the constraint on the wake-up period, and thus lowering the data-rate. Simulation results presented in Section ‘Effect of the safety margin (M) on the CL-PM performance’ will show that a 5% margin of the discharge capacity of the battery is a good system trade-off.</p></sec></sec><sec id="Sec15"><title>Simulation results for a solar energy harvesting WSN platform</title><p>In this section, we will present a case study used to validate our power management strategies. This case study is based on the TI EZ430[<xref ref-type="bibr" rid="CR7">7</xref>] solar energy harvesting platform equipped with 2.25in × 2.25in solar panel and a 100 <italic>μ</italic> Ah Li-Ion battery. The OL-PM and CL-PM are compared with the power manager presented in[<xref ref-type="bibr" rid="CR8">8</xref>]. Note that this power manager has been adapted to the <italic>α</italic> and <italic>β</italic> models discussed in Section ‘Models library for WSN node’. We simulated these three power managers using a five-day solar energy data set. The battery and solar panel models as well as the power managers are implemented in Matlab. We ran the simulations on a laptop PC equipped with an Intel Core-i5 CPU cadenced at 2.5 GHz and 3.8 GB of RAM. The duration for simulating five days of node operation is about 2 min. Therefore, many simulations can be run for different types of power managers and system parameters, thus allowing a comprehensive exploration of the design space in a reduced amount of time. The following section presents the simulation setup.</p><sec id="Sec16"><title>Simulation setup and energy data set profile</title><p>The values for the platform power consumption model (<italic>α</italic> parameters) were measured for the TI EZ430 platform. The corresponding measured current consumption for a sensing and an RF transmission is shown in Figure<xref rid="Fig5" ref-type="fig">5</xref>. The values of the <italic>α</italic> parameter for different wake-up periods are reported in Table<xref rid="Tab2" ref-type="table">2</xref>.</p><p>In order to get realistic values for the harvested energy (<italic>β</italic> parameter), we measured the light intensity in an office close to a window, i.e., with a direct light source. We connected a luxmeter to a PC and measured the light intensity with an interval of 5 s during five days. We repeated the same procedure to obtain the two data-set, that are shown in Figure<xref rid="Fig10" ref-type="fig">10</xref>. The data-set 1, is composed of measures collected during autumn, while the measures of data-set 2 were collected during spring. The values for the <italic>β</italic> parameter were then computed using the function given in Figure<xref rid="Fig3" ref-type="fig">3</xref>. The statistical informations about the two data-set are shown in Table<xref rid="Tab3" ref-type="table">3</xref>.<fig id="Fig10"><label>Figure 10</label><caption xml:lang="en"><p><bold>The values of</bold><bold><italic>β</italic></bold><bold>during five days in an office.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig10_HTML.jpg"/></fig></p><table-wrap id="Tab3"><label>Table 3</label><caption xml:lang="en"><p><bold><italic>β</italic></bold><bold>statistical informations</bold></p></caption><table frame="hsides" rules="groups"><thead><tr><th align="left"/><th align="center"><p>Mean [<bold><italic>μ</italic></bold> A]</p></th><th align="center"><p>Standard Deviation [<bold><italic>μ</italic></bold> A]</p></th></tr></thead><tbody><tr><td align="left"><p>Data-set 1</p></td><td align="center"><p>26.29</p></td><td align="center"><p>35.28</p></td></tr><tr><td align="left"><p>Data-set 2</p></td><td align="center"><p>21.31</p></td><td align="center"><p>27.81</p></td></tr></tbody></table></table-wrap><p>The system parameters are detailed in Table<xref rid="Tab4" ref-type="table">4</xref>. The wake-up period <italic>T</italic><sub>wi</sub>goes from 1 to 120 s within a 1 s interval. The power management execution overhead (<italic>Q</italic><sub>pm</sub>) has been considered equivalent to the charge consumed by a sensing task followed by a RF transmission. Given the low complexity of our power managers, this overhead can be considered as a worst case scenario.<table-wrap id="Tab4"><label>Table 4</label><caption xml:lang="en"><p><bold>System parameters</bold></p></caption><table frame="hsides" rules="groups"><thead><tr><th align="left"/><th align="center"><p><bold><italic>T</italic></bold><sub><italic>wi</italic></sub> [min, max]</p></th><th align="center"><p><bold><italic>Q</italic></bold><sub><italic>tx</italic></sub></p></th><th align="center"><p><bold><italic>Q</italic></bold><sub><italic>pm</italic></sub></p></th><th align="center"><p><bold><italic>n</italic></bold></p></th></tr><tr><th align="left"/><th align="center"><p>[sec]</p></th><th align="center"><p>[<bold><italic>μ</italic></bold> As]</p></th><th align="center"><p>[<bold><italic>μ</italic></bold> As]</p></th><th align="center"/></tr></thead><tbody><tr><td align="left"><p>OL-PM</p></td><td align="center"><p>[1, 120]</p></td><td align="center"><p>128.52</p></td><td align="center"><p>128.52</p></td><td align="center"><p>10</p></td></tr><tr><td align="left"><p>CL-PM</p></td><td align="center"><p>[1, + <italic>∞</italic>]</p></td><td align="center"><p>128.52</p></td><td align="center"><p>128.52</p></td><td align="center"><p>10</p></td></tr></tbody></table></table-wrap></p><p>The battery parameters are reported in Table<xref rid="Tab5" ref-type="table">5</xref>. The depth of discharge of the battery is limited by SoC<sub>min</sub>, which is imposed by the protection circuit discussed in Section ‘Model validation using the TI EZ430 platform’. As a result, the effective battery discharge capacity <italic>C</italic><sub><italic>d</italic></sub>is 63 <italic>μ</italic> Ah, thus lower than the SoC<sub>max</sub>.<table-wrap id="Tab5"><label>Table 5</label><caption xml:lang="en"><p><bold>Battery parameters</bold></p></caption><table frame="hsides" rules="groups"><thead><tr><th align="left"><p><bold><italic>SoC</italic></bold><sub><italic>min</italic></sub></p></th><th align="center"><p><bold><italic>SoC</italic></bold><sub><italic>max</italic></sub></p></th><th align="center"><p><bold><italic>C</italic></bold><sub><italic>d</italic></sub></p></th></tr><tr><th align="left"><p> [<bold><italic>μ</italic></bold> Ah]</p></th><th align="center"><p>[<bold><italic>μ</italic></bold> Ah]</p></th><th align="center"><p>[<bold><italic>μ</italic></bold> Ah]</p></th></tr></thead><tbody><tr><td align="left"><p> 37</p></td><td align="center"><p>100</p></td><td align="center"><p>63</p></td></tr></tbody></table></table-wrap></p></sec><sec id="Sec17"><title>Evaluation metrics</title><p>Here are the metrics used to evaluate the performance of the different power managers:</p><p><list list-type="bullet"><list-item><p>Average data-Rate (〈<italic>Rd</italic>〉): It is defined as the ratio between the size of a packet that is sent (a payload of 33 bytes is used) and the wake-up period, <italic>T</italic><sub>wi</sub>. The average throughput is computed over the five days, including the periods of time where the battery is fully discharged (in this case the data-rate is null).</p></list-item><list-item><p>Maximum and minimum data-rate (<italic>R</italic><italic>d</italic><sub>max</sub>, <italic>R</italic><italic>d</italic><sub>min</sub>): These metrics give an indication of the peak and minimal achievable performance of a node using a given power manager.</p></list-item><list-item><p>Average SoC (〈SoC〉): This metric is used to assess if the power management algorithm drifts away from an energy-neutral condition. In other words, the average SoC is used to determine how far the decisions of the power manager stray from the energy neutral condition (Equation (<xref rid="Equ7" ref-type="disp-formula">7</xref>)).</p></list-item><list-item><p>Battery failures (<italic>B</italic><sub><italic>f</italic></sub>) : This metric gives a measure of the correctness and reliability of the power manager’s choices. A value of ‘zero’ means that the battery is never fully discharged and the node is always operational.</p></list-item></list></p></sec><sec id="Sec18"><title>Performance comparison</title><p>Simulation results for the power managers (for the energy data set shown in Table<xref rid="Tab3" ref-type="table">3</xref>) are reported in Table<xref rid="Tab6" ref-type="table">6</xref>.<table-wrap id="Tab6"><label>Table 6</label><caption xml:lang="en"><p><bold>Performance comparison between the Kansal algorithm</bold> [[<xref ref-type="bibr" rid="CR8">8</xref>]]<bold>, the OL-PM and the CL-PM</bold></p></caption><table frame="hsides" rules="groups"><thead><tr><th align="left"/><th align="center" colspan="2"><p>〈<bold><italic>Rd</italic></bold>〉</p></th><th align="center" colspan="2"><p><bold><italic>R</italic></bold><bold><italic>d</italic></bold><sub><italic>max</italic></sub></p></th><th align="center" colspan="2"><p><bold><italic>R</italic></bold><bold><italic>d</italic></bold><sub><italic>min</italic></sub></p></th><th align="center" colspan="2"><p>〈SoC〉</p></th><th align="center" colspan="2"><p><bold><italic>B</italic></bold><sub><italic>f</italic></sub></p></th></tr><tr><th align="left"/><th align="center"><p>[bits/s]</p></th><th align="center"><p>[bits/s]</p></th><th align="center"><p>[bits/s]</p></th><th align="center"><p>[bits/s]</p></th><th align="center"><p>[bits/s]</p></th><th align="center"><p>[bits/s]</p></th><th align="center"><p>[<bold><italic>μ</italic></bold> Ah]</p></th><th align="center"><p>[<bold><italic>μ</italic></bold> Ah]</p></th><th align="left"/><th align="left"/></tr></thead><tbody><tr><td align="center"/><td align="center"><p>D1</p></td><td align="center"><p>D2</p></td><td align="center"><p>D1</p></td><td align="center"><p>D2</p></td><td align="center"><p>D1</p></td><td align="center"><p>D2</p></td><td align="center"><p>D1</p></td><td align="center"><p>D2</p></td><td align="center"><p>D1</p></td><td align="center"><p>D2</p></td></tr><tr><td align="center"><p>Kansal[<xref ref-type="bibr" rid="CR8">8</xref>]</p></td><td align="center"><p>29.55</p></td><td align="center"><p>36.5</p></td><td align="center"><p>132</p></td><td align="center"><p>264</p></td><td align="center"><p>0</p></td><td align="center"><p>0.66</p></td><td align="center"><p>65.81</p></td><td align="center"><p>88.79</p></td><td align="center"><p>9</p></td><td align="center"><p>0</p></td></tr><tr><td align="center"><p>OL-PM</p></td><td align="center"><p>44.61</p></td><td align="center"><p>36.7</p></td><td align="center"><p>132</p></td><td align="center"><p>132</p></td><td align="center"><p>2.2</p></td><td align="center"><p>2.2</p></td><td align="center"><p>88.8</p></td><td align="center"><p>92.67</p></td><td align="center"><p>0</p></td><td align="center"><p>0</p></td></tr><tr><td align="center"><p>CL-PM</p></td><td align="center"><p>45.87</p></td><td align="center"><p>36.7</p></td><td align="center"><p>132</p></td><td align="center"><p>132</p></td><td align="center"><p>0.37</p></td><td align="center"><p>0.73</p></td><td align="center"><p>69.27</p></td><td align="center"><p>75.57</p></td><td align="center"><p>0</p></td><td align="center"><p>0</p></td></tr></tbody></table></table-wrap></p><sec id="Sec19"><title>Data-set 1 (D1)</title><p>As can be observed, both the OL-PM and the CL-PM improve the average data-rate (〈<italic>Rd</italic>〉) by more than 50% compared to the algorithm proposed in[<xref ref-type="bibr" rid="CR8">8</xref>], using the data-set 1. The CL-PM produces a better <italic>Rd</italic> compared to the OL-PM. This slight difference is caused by the fact that during zero energy intervals (ZEIs) the CL-PM uses the negative-energy strategy while the OL-PM uses a fixed <italic>T</italic><sub>wi</sub>(<italic>T</italic><sub>wi,max</sub>). It can therefore better exploit the energy stored in the battery to produce a higher data-rate. As an example, from Figure<xref rid="Fig11" ref-type="fig">11</xref> it can be observed that from the 25th to the 38th hour the OL-PM produces a constant data-rate of 2.2 bits/s even if, at the beginning, its battery is fully charged. During the same period, the CL-PM uses an estimate of both the SoC and the duration of the ZEI to control the data-rate. As a result, it can increase the data-rate to about 10 bits/s, thus improving the quality of service. At the end of the ZEI (i.e., the 38th hour) the battery is more discharged (about 45 <italic>μ</italic> Ah) compared to the OL-PM case (80 <italic>μ</italic> Ah). This can also be observed by comparing the SoC slopes of the two power managers (the CL-PM has a steeper slope). However, as shown, the CL-PM can partially recharge the battery during the next few days and once again provide a better data-rate during the following ZEIs.<fig id="Fig11"><label>Figure 11</label><caption xml:lang="en"><p><bold>Execution traces of the OL-PM (</bold><bold><italic>n</italic></bold><bold>= 10) and CL-PM (</bold><bold><italic>n</italic></bold><bold>= 10,</bold><bold><italic>M</italic></bold><bold>= 3.15</bold><bold><italic>μ</italic></bold><bold>Ah) during four days of the data-set 1.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig11_HTML.jpg"/></fig></p><p>The improvement in the average data-rate 〈<italic>Rd</italic>〉 compared to[<xref ref-type="bibr" rid="CR8">8</xref>] can be mainly explained by the fact that the energy harvested has a high variability as it can be observed from Table<xref rid="Tab3" ref-type="table">3</xref>. Both the OL-PM and the CL-PM are able to exploit this variability thanks to their reactivity which can be efficiently tuned using the <italic>n</italic> parameter. The activation period of those power managers falls in the order of tens of seconds. So, as shown in Figure<xref rid="Fig11" ref-type="fig">11</xref>, both the OL-PM and the CL-PM can effectively control the data-rate in order to follow the <italic>β</italic> energy harvested profile. The algorithm proposed by[<xref ref-type="bibr" rid="CR8">8</xref>] takes a different approach. It samples the energy source every 30 min and it also uses an EWMA filter to predict the energy availability for the next 24 h. However, this algorithm excessively filters the data from the energy harvester (<italic>β</italic>). As a result, the power manager cannot exploit the peak of energy availability to increase the data-rate (<italic>Rd</italic>). Moreover, the <italic>Rd</italic> produced by the Kansal algorithm has a higher variance compared to both the OL-PM and the CL-PM. These behaviors can be easily observed in Figure<xref rid="Fig12" ref-type="fig">12</xref> during the second, third and fourth days. Data-rate stability may be an important feature in applications such as event monitoring. Those types of applications can thus benefit from power managers such as OL-PM and CL-PM that produce a stable data-rate.<fig id="Fig12"><label>Figure 12</label><caption xml:lang="en"><p><bold>Execution traces of the Kansal power manager during four days of the data-set 1.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig12_HTML.jpg"/></fig></p><p><italic>R</italic><italic>d</italic><sub>max</sub> is the same for all three algorithms, as it is dependent upon the peak energy harvested by the solar panel, which is the same in all cases. Nevertheless, the differences in reactivity also account for the fact that the battery is never fully discharged for the OL-PM and the CL-PM (<italic>B</italic><sub><italic>f</italic></sub> = 0), while it happens nine times in five days for Kansal. As shown in Figure<xref rid="Fig12" ref-type="fig">12</xref>, the node stops sending data (i.e., <italic>R</italic><italic>d</italic><sub>min</sub> = 0) for a variable amount of time, on average two times a day.</p><p>The <italic>R</italic><italic>d</italic><sub>min</sub>of the OL-PM is bounded by the maximum value of the wake-up period (<italic>T</italic><sub>wi,max</sub> = 120 s) defined in Table<xref rid="Tab4" ref-type="table">4</xref>. This corresponds to a 2.2 bits/s data-rate as shown in Table<xref rid="Tab6" ref-type="table">6</xref> and in Figure<xref rid="Fig11" ref-type="fig">11</xref>. The CL-PM has an unbounded maximum wake-up period. Its <italic>R</italic><italic>d</italic><sub>min</sub>can therefore approach lower values depending on the SoC of the battery during the ZEIs. It is interesting to note that the goal of both the OL-PM and the power manager proposed in[<xref ref-type="bibr" rid="CR8">8</xref>] is to operate the system in energy neutrality. In perfect conditions the average SoC of the battery should be equal to the initial SoC (in our case SoC<sub>max</sub>). Inaccuracies in <italic>β</italic> estimation and lack of reactivity cause a SoC drift. The SoC drift is defined as the difference between the SoC<sub>max</sub> and the average SoC (〈SoC〉). As it can be observed from Table<xref rid="Tab6" ref-type="table">6</xref>, the drift is only 11.2 <italic>μ</italic> Ah, otherwise stated 17.7% of the discharge capacity (<italic>C</italic><sub><italic>d</italic></sub>) for the OL-PM. It can accurately track the variation of <italic>β</italic> and it can operate the system to an almost energy-neutral state. In the meantime, the Kansal algorithm produces a drift of 34.19 <italic>μ</italic> Ah, which is 54% of the discharge capacity <italic>C</italic><sub><italic>d</italic></sub>. This is due to the assumption made by the authors that the energy harvested is constant over a period of 30 min. However this assumption is violated many times within our data set. We can therefore conclude that considering the harvested energy constant over a long period (e.g., 30 min) can lead to inaccuracies and performance degradation. The goal of the CL-PM is to maximize the efficiency of the energy utilization during ZEIs. It uses the negative-energy technique that draws the energy from the battery to increase the <italic>Rd</italic>. This behavior can be observed in Figure<xref rid="Fig11" ref-type="fig">11</xref>. During ZEIs (<italic>β</italic>=0), the CL-PM adapts the data-rate according to the energy stored in the battery while the OL-PM produces a constant <italic>Rd</italic>. As a result, the battery is better exploited by the CL-PM, which explains its lower average SoC.</p></sec><sec id="Sec20"><title>Data-set 2 (D2)</title><p>As can be observed from Table<xref rid="Tab6" ref-type="table">6</xref>, the three power managers have about the same performance using the data-set 2. The average energy available in the data-set 2 is lower compared to the energy available in the data-set 1, this explains why the average data-rate for the three power managers is lower compared to the data-set 1. Moreover, as the data-set 2 has a lower variance, the Kansal power manager, which is accurate for consistent weather conditions, produces about the same data-rate compared to both the CL-PM and the OL-PM. In the previous section, we observed that the prediction approach of Kansal do not work very well on a data-set that has a high variance, like the data-set 1. In the data-set 1, the OL-PM and the CL-PM, that do not use a predictive approach, can exploit the peak of energy availability to increase the data-rate (<italic>Rd</italic>). In conclusion, we have shown that our CL-PM and OL-PM power managers provide good performance both for constant and variable (cloudy and sunny days are mixed) weather conditions, while the Kansal approach is accurate only for constant or slow varying weather conditions.</p><p>Finally, in order to show the benefit of using an energy harvesting system, we compare the simulation results that we have obtained with our power managers to a battery powered system. We use the battery characteristics and platform power consumption shown in Tables<xref rid="Tab5" ref-type="table">5</xref> and<xref rid="Tab4" ref-type="table">4</xref>, respectively, and we consider that the node uses a constant wake-up period. The worst-case scenario for the lifetime occurs when the node wakes-up with a period of 1 s, in this case the lifetime is 29 min. If a period of 120 s is used, the lifespan is extended to 58 h and 52 min, which is approximately two and half days.</p><p>Experimental results have shown that reactivity is an important feature of a power manager. For our two power managers the reactivity can be tuned by adjusting the <italic>n</italic> parameter. A value of 10 has been used for the experiments carried out in this section. However, other choices are possible and we will investigate their effects on the system performance in the following section.</p></sec></sec><sec id="Sec21"><title>Power manager’s reactivity analysis</title><p>We have conducted some experiments to investigate the impact of varying the reactivity of the power manager, the <italic>n</italic> parameter, on the overall performance of the OL-PM. Figure<xref rid="Fig13" ref-type="fig">13</xref> shows the average SoC, the average data rate and the lowest value of the SoC (SoC<sub><italic>l</italic></sub>) obtained for different values of <italic>n</italic>.<fig id="Fig13"><label>Figure 13</label><caption xml:lang="en"><p><bold>The effects of varying the power manager reactivity (</bold><bold><italic>n</italic></bold><bold>) on the</bold><bold><italic>〈</italic></bold><bold>SoC</bold><bold><italic>〉</italic></bold><bold>,</bold><bold>SoC</bold><sub><bold><italic>l</italic></bold></sub><bold>and</bold><bold><italic>〈Rd〉</italic></bold><bold>using our OL-PM.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig13_HTML.jpg"/></fig></p><p>As previously discussed, the more the SoC diverges from the SoC<sub>max</sub> the more the energy neutrality condition is violated. Experimental results show that for a <italic>n</italic> smaller than 10 the system tends to perform poorly for the 〈SoC〉 and SoC<sub><italic>l</italic></sub>. In reality, the gain induced by the increased reactivity is counterbalanced by the OL-PM overhead. The impact of the power management overhead is higher when <italic>β</italic> is lower (and even more when <italic>β</italic> is null). During those periods the system cannot actually work in energy neutrality even with the biggest value of <italic>T</italic><sub>wi</sub>. As it can be seen from Figure<xref rid="Fig13" ref-type="fig">13</xref>, the average SoC tends to become stable for a <italic>n</italic> between 10 and 20, while the best values for the average data-rate are between 6 and 20. For values greater than 20 the lack of reactivity of the power manager deteriorates the global performance.</p></sec><sec id="Sec22"><title>Effect of the safety margin (M) on the CL-PM performance</title><p>The CL-PM behavior during ZEIs (where the negative-energy strategy is used) can be tuned through the adaptation of the safety margin (M) parameter. This parameter prevents the battery from fully discharging, thus avoiding battery failures. As discussed in Section ‘Closed-loop energy neutral power manager’, this parameter counterbalances the inaccuracies on the SoC and <italic>D</italic><sub>ZEI</sub>estimations. As it can be observed from Equation (<xref rid="Equ11" ref-type="disp-formula">11</xref>), the higher the value of M, the higher the wake-up period <italic>T</italic><sub>wi</sub> during ZEI and thus a lower <italic>R</italic><sub><italic>d</italic></sub>.</p><p>Experimental results are summarized in Table<xref rid="Tab7" ref-type="table">7</xref>. Four different values of the safety margin were considered for the experiments. Those values are expressed as a percentage of the discharge capacity (<italic>C</italic><sub><italic>d</italic></sub>) of the battery described in Table<xref rid="Tab5" ref-type="table">5</xref>. Values ranging from 3.17 to 20% of <italic>C</italic><sub><italic>d</italic></sub>were used. We can see that M is more correlated to the average and minimum SoC (〈SoC〉 and SoC<sub><italic>l</italic></sub>, respectively) than to the average data-rate 〈<italic>Rd</italic>〉. Since M is used in the negative-energy strategy, only the data-rate during ZEIs is affected by this parameter. As it can be observed in Figure<xref rid="Fig11" ref-type="fig">11</xref>, the data-rate resulting from the CL-PM during ZEIs (<italic>β</italic>=0) is almost ten times lower than the data-rate produced when energy is available from the environment (<italic>β</italic> &gt; 0). This explains why a variation of 17% of M produces a variation of only 2.5% in the 〈<italic>Rd</italic>〉. In the meantime, the variation of the 〈SoC〉 and the SoC<sub><italic>l</italic></sub> are 12.2 and 17% of <italic>C</italic><sub><italic>d</italic></sub>, respectively. Increasing M lowers the data-rate as well as the power consumption during ZEIs. As a results, the SoC decreases more slowly when M is higher, thus both the 〈SoC〉 and the SoC<sub><italic>l</italic></sub> tend to increase. For the input data set used in this study, the CL-PM does not experience battery failures even with a margin of 2 <italic>μ</italic> Ah (Table<xref rid="Tab7" ref-type="table">7</xref>). However, with this value of M the SoC<sub><italic>l</italic></sub>gets as close as 0.5 <italic>μ</italic> Ah from the SoC<sub>min</sub>. Considering that secondary effects, like the battery discharge capacity fading[<xref ref-type="bibr" rid="CR24">24</xref>, <xref ref-type="bibr" rid="CR25">25</xref>], can provoke variations on the SoC<sub>min</sub>, a greater margin should be used. The margin M can therefore be adjusted depending on the battery technology, ambient conditions (temperature, humidity, etc.) and battery ageing.<table-wrap id="Tab7"><label>Table 7</label><caption xml:lang="en"><p><bold>Effect of the safety margin (M) on the CL-PM performance</bold></p></caption><table frame="hsides" rules="groups"><tbody><tr><td align="left"><p>M [<italic>μ</italic> Ah]</p></td><td align="left"><p>2</p></td><td align="left"><p>3.15</p></td><td align="left"><p>6.3</p></td><td align="left"><p>12.6</p></td></tr><tr><td align="left"><p><italic>C</italic><sub><italic>d</italic></sub><italic>%</italic></p></td><td align="left"><p>3.17<italic>%</italic></p></td><td align="left"><p>5<italic>%</italic></p></td><td align="left"><p>10<italic>%</italic></p></td><td align="left"><p>20<italic>%</italic></p></td></tr><tr><td align="left"><p>〈SoC〉 [<italic>μ</italic> Ah]</p></td><td align="left"><p>69.27</p></td><td align="left"><p>70.37</p></td><td align="left"><p>71.89</p></td><td align="left"><p>78.94</p></td></tr><tr><td align="left"><p>SoC<sub><italic>l</italic></sub> [<italic>μ</italic> Ah]</p></td><td align="left"><p>37.5</p></td><td align="left"><p>38.99</p></td><td align="left"><p>41.82</p></td><td align="left"><p>48.45</p></td></tr><tr><td align="left"><p>〈<italic>Rd</italic>〉 [bits/s]</p></td><td align="left"><p>45.87</p></td><td align="left"><p>45.82</p></td><td align="left"><p>45.73</p></td><td align="left"><p>44.73</p></td></tr></tbody></table></table-wrap></p><p>During these experiments the average data-rate obtained is about 45 bits/s for both the OL-PM and CL-PM. Let us imagine that the objective is to increase the data-rate up to 100 bits/s. To achieve this goal, we must either consider increasing the size of the energy harvester or the battery capacity. In the following section, we demonstrate the benefit of using our simulation framework to address the problem of finding the optimal system size for a solar harvesting WSN node.</p></sec></sec><sec id="Sec23"><title>Energy harvesting networks</title><p>Sensor networks are often cooperative, so that almost all the sensors do sense, transmit and relay (receive and forward packets). In this latter case, nodes send messages received by other nodes so that the information can reach the sink.</p><p>In real life cooperative sensor network scheme, nodes can spend a high percent of their energy for relaying packets from other nodes. We now consider a sensor network in which nodes have energy harvesting capabilities. Although nodes are equipped with the same energy harvesting hardware, they can have different wake-up periods (<italic>T</italic><sub>wi</sub>) because the environmental energy is different at each location.</p><p>We consider the cluster-tree topology shown in Figure<xref rid="Fig14" ref-type="fig">14</xref>. The cluster-tree topology is a special case of a mesh network where there is a single routing path between any pair of nodes and there is a distributed synchronization mechanism. In this kind of network there is a unique coordinator (i.e., the sink), and one router per cluster, the nodes <italic>C</italic> and <italic>N</italic><sub>2</sub>, respectively, in the example shown in Figure<xref rid="Fig14" ref-type="fig">14</xref>. The node <italic>N</italic><sub>2</sub>(i.e., the router) provides synchronization services to its child nodes (<italic>N</italic><sub>0</sub> and <italic>N</italic><sub>1</sub>). <italic>N</italic><sub>2</sub>can send its own messages to the sink, but it can also forward messages coming from nodes <italic>N</italic><sub>0</sub> and <italic>N</italic><sub>1</sub>.<fig id="Fig14"><label>Figure 14</label><caption xml:lang="en"><p><bold>Cluster-tree network topology.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig14_HTML.jpg"/></fig></p><p>We base our study on an extension of the IEEE 802.15.4 protocol with beacon-enabled mode using slotted CSMA/CA medium access protocol[<xref ref-type="bibr" rid="CR26">26</xref>]. In beacon-enabled mode, the coordinator <italic>C</italic> and the router <italic>N</italic><sub>2</sub>periodically send beacons to synchronize nodes that are associated with them. Figure<xref rid="Fig15" ref-type="fig">15</xref> shows the timing diagram of the MAC algorithm for the network example of Figure<xref rid="Fig14" ref-type="fig">14</xref>. In beacon-enabled mode, the coordinator defines a superframe structure which is characterized by a beacon interval (BI) and a superframe duration (SD). The BI defines the time between two consecutive beacons, while the SD defines the active portion of the BI. If BI &gt; SD, there is an inactive period during which the node can enter a low power mode to save energy. In the IEEE 802.15.4 protocol, BI and SD are determined by two parameters, the beacon order (BO) and the superframe order (SO), as follows:<disp-formula id="Equ12"><label>12</label><alternatives><mml:math id="Equ12_Math"><mml:mrow><mml:mtable columnalign="left"><mml:mtr><mml:mtd><mml:mspace width="0.3em"/><mml:mtext mathvariant="normal">BI</mml:mtext><mml:mo>=</mml:mo><mml:mtext>aBaseSuperframeDuration</mml:mtext><mml:mo>·</mml:mo><mml:msup><mml:mrow><mml:mn>2</mml:mn></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">BO</mml:mtext></mml:mrow></mml:msup></mml:mtd></mml:mtr><mml:mtr columnalign="left"><mml:mtd><mml:mtext mathvariant="normal">SD</mml:mtext><mml:mo>=</mml:mo><mml:mtext>aBaseSuperframeDuration</mml:mtext><mml:mo>·</mml:mo><mml:msup><mml:mrow><mml:mn>2</mml:mn></mml:mrow><mml:mrow><mml:mtext mathvariant="normal">SO</mml:mtext></mml:mrow></mml:msup></mml:mtd></mml:mtr><mml:mtr columnalign="left"><mml:mtd><mml:mspace width="3em"/><mml:mtext>where</mml:mtext><mml:mspace width="2.77695pt"/><mml:mn>0</mml:mn><mml:mo>≤</mml:mo><mml:mtext mathvariant="normal">SO</mml:mtext><mml:mo>≤</mml:mo><mml:mtext mathvariant="normal">BO</mml:mtext><mml:mo>≤</mml:mo><mml:mn>14</mml:mn></mml:mtd></mml:mtr></mml:mtable></mml:mrow></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ12_HTML.gif"/></alternatives></disp-formula></p><p><fig id="Fig15"><label>Figure 15</label><caption xml:lang="en"><p><bold>Timing diagram of the MAC algorithm.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig15_HTML.jpg"/></fig></p><p>The <italic>aBaseSuperframeDuration</italic> parameter defines the minimum active period duration and is equal to 15.36 ms for the 2.4 GHz physical layer at 250 kbps. During the active period (<italic>SD</italic>), nodes use CSMA/CA to access the medium. Since we consider low power nodes with limited energy storage capabilities, we choose a low duty-cycle configuration by setting <italic>SO</italic>=0. In this case the duration of the active period corresponds to 15.36 ms. Each node chooses its beacon interval (BI), based on the energy harvesting level, using the power managers presented in Sections ‘An open-loop energy neutral power manager (OL-PM)’ and ‘Closed-loop energy neutral power manager’. As a consequence we consider that <italic>BI</italic> ≡ <italic>T</italic><sub>wi</sub>. As the BO parameter belongs to the [0,14] interval, the wake-up period (or beacon interval) of the nodes can vary in the range [15.36 ms, ∼250 s]. In order to have the same configurations shown in Table<xref rid="Tab4" ref-type="table">4</xref> for both power managers, we choose values greater or equal to six for the BO parameter. According to that, we thus have a wake-up period comprised in the [1 s, ∼250 s] interval.</p><p>Figure<xref rid="Fig15" ref-type="fig">15</xref> shows the timing diagram of the MAC algorithm. At the beginning of the <italic>W</italic> 1 window, the coordinator (<italic>C</italic>) sends a beacon (<italic>B</italic><sub><italic>c</italic></sub>) containing information related to its superframe structure, including BI and SD parameters. Since the router <italic>N</italic><sub>2</sub> is synchronized with <italic>C</italic>, it receives the coordinator’s beacon. <italic>N</italic><sub>2</sub>can send its own data (<italic>D</italic><sub><italic>N</italic> 2</sub>) to <italic>C</italic> using the CSMA/CA access technique. For that, two clear channel assessments (CCA) are first performed to check if the radio channel is free. In that case the two CCAs are followed by a transmission (<italic>Tx</italic>(<italic>D</italic><sub><italic>N</italic> 2</sub>) in Figure<xref rid="Fig15" ref-type="fig">15</xref>). As the node <italic>N</italic><sub>2</sub> acts as a router, it periodically sends a beacon (<italic>B</italic><sub><italic>N</italic> 2</sub>) to synchronize its child. This beacon is sent during the inactive period of the coordinator in order to avoid collisions. Then, any end device (<italic>N</italic><sub>0</sub> or <italic>N</italic><sub>1</sub> in our case) that wants to transmit data to the router (<italic>N</italic><sub>2</sub>) uses the CSMA/CA technique as well (<italic>W</italic> 2 window). In the next beacon interval (<italic>W</italic> 4 window), the node <italic>N</italic><sub>2</sub> first forwards the packet of <italic>N</italic><sub>0</sub>(<italic>D</italic><sub><italic>N</italic> 0</sub>) and then sends its own data <italic>D</italic><sub><italic>N</italic> 2</sub>. This process is repeated every wake-up period.</p><p>As nodes can have different wake-up periods, the nodes having the shortest ones must buffer packets as long as the router is ready to receive. This would be the case for <italic>N</italic><sub>0</sub> in our example (e.g., <italic>W</italic> 3 window).</p><p>Although we do not simulate MAC protocols in our framework, we have performed a study based on the protocol described above. This study aims at evaluating the impact of forwarding packets on data-rate. For that, we analyzed the node <italic>N</italic><sub>2</sub>behavior. Based on power consumption measures for the different activities (cf. Table<xref rid="Tab8" ref-type="table">8</xref>) we have simulated the CL-PM power manager.<table-wrap id="Tab8"><label>Table 8</label><caption xml:lang="en"><p><bold>MAC power consumption parameters</bold></p></caption><table frame="hsides" rules="groups"><thead><tr><th align="left"><p> <bold><italic>Q</italic></bold><sub><italic>tx</italic></sub></p></th><th align="center"><p><bold><italic>Q</italic></bold><sub><italic>rx</italic></sub></p></th><th align="center"><p><bold><italic>Q</italic></bold><sub><italic>CCA</italic></sub></p></th><th align="center"><p><bold><italic>Q</italic></bold><sub><italic>listen</italic></sub></p></th></tr><tr><th align="left"><p>[<bold><italic>μ</italic></bold> As]</p></th><th align="center"><p>[<bold><italic>μ</italic></bold> As]</p></th><th align="center"><p>[<bold><italic>μ</italic></bold> As]</p></th><th align="center"><p>[<bold><italic>μ</italic></bold> As]</p></th></tr></thead><tbody><tr><td align="left"><p>128.52</p></td><td align="center"><p>77.192</p></td><td align="center"><p>68.82</p></td><td align="center"><p>118.6</p></td></tr></tbody></table></table-wrap></p><p>The simulation results are shown in Table<xref rid="Tab9" ref-type="table">9</xref>.<table-wrap id="Tab9"><label>Table 9</label><caption xml:lang="en"><p><bold>Impact of the forwarding activity on the data-rate</bold></p></caption><table frame="hsides" rules="groups"><thead><tr><th align="center"><p>Percentage of forwarded packets (%)</p></th><th align="center"><p>Data-rate (〈<bold><italic>R</italic></bold><sub><italic>d</italic></sub>〉)</p></th></tr><tr><th align="left"/><th align="center"><p>[bits/s]</p></th></tr></thead><tbody><tr><td align="center"><p>100</p></td><td align="center"><p>7.25</p></td></tr><tr><td align="center"><p>50</p></td><td align="center"><p>8.4</p></td></tr></tbody></table></table-wrap></p><p>As it can be observed, the impact on the data-rate is about 80% compared to the results given in Table<xref rid="Tab6" ref-type="table">6</xref>. This decrease is due to synchronisation and listening activities of the router.</p></sec><sec id="Sec24"><title>Optimal system size for a solar harvesting WSN node</title><sec id="Sec25"><title>System specifications</title><p>In this section, we consider the solar energy harvesting platform model discussed in Section ‘Model validation using the TI EZ430 platform’. In order to limit the design space explored, we only use the CL-PM power manager. In accordance with the assumptions made before, the parameters that can be tuned to find the optimal sizing are both the size of the battery and the solar panel. A range of values for the battery discharge capacity (<italic>C</italic><sub><italic>d</italic></sub>) and for the solar panel average output current (〈<italic>β</italic>〉) are fixed as follows:</p><p><list list-type="bullet"><list-item><p>Battery: 63<italic>μ</italic> Ah ≤ <italic>C</italic><sub><italic>d</italic></sub> ≤ 1260<italic>μ</italic> Ah.</p></list-item><list-item><p>Solar panel: 26<italic>μ</italic> A ≤ 〈<italic>β</italic>〉 ≤ 78<italic>μ</italic> A.</p></list-item></list></p><p>The lowest values for the battery discharge capacity (<italic>C</italic><sub><italic>d</italic></sub>) and the solar panel parameters 〈<italic>β</italic>〉 are those of the EZ430 platform presented in Section ‘Model validation using the TI EZ430 platform’. For the discharge capacity, four values are considered, all of which are multiples of 63<italic>μ</italic> Ah: 63<italic>μ</italic> Ah, 315<italic>μ</italic> Ah, 630<italic>μ</italic> Ah, and 1260<italic>μ</italic> Ah. The maximum value of <italic>C</italic><sub><italic>d</italic></sub>is twenty times higher than the minimum. This range of values is realistic for small size Lithium batteries[<xref ref-type="bibr" rid="CR27">27</xref>, <xref ref-type="bibr" rid="CR28">28</xref>]. The same technology, thus the same efficiency, has been considered for the solar panels. The values of 〈<italic>β</italic>〉 are obtained by scaling the output of the 26 <italic>μ</italic> A solar panel. Three values are considered: 26 <italic>μ</italic> A, 52 <italic>μ</italic> A, and 78 <italic>μ</italic> A Since the light conditions are the same for all cases (e.g., Table<xref rid="Tab3" ref-type="table">3</xref>), the different values of 〈<italic>β</italic>〉 can be obtained by increasing the solar panel size. However, the representation of the relationship between 〈<italic>β</italic>〉 and the solar panel size is beyond the scope of this article.</p></sec><sec id="Sec26"><title>Analysis of the throughput for different size system</title><p>Experimental results for the CL-PM, discussed in Section ‘Simulation results for a solar energy harvesting WSN platform’, have shown that an average data-rate of about 45 bits/s can be obtained using the configuration of the EZ430 platform. We can then run different simulations increasing both the battery size and the solar panel 〈<italic>β</italic>〉 parameter in order to find a configuration that satisfies a 100 bits/s requirement. The average data-rate as a function of both the battery and the solar panel size is shown in Figure<xref rid="Fig16" ref-type="fig">16</xref>. These values were obtained in simulations that lasted about 30 min (2 min per configuration).<fig id="Fig16"><label>Figure 16</label><caption xml:lang="en"><p><bold>The average data-rate (</bold><bold><italic>〈Rd〉</italic></bold><bold>) for different batteries and solar panels.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig16_HTML.jpg"/></fig></p><p>As can be observed, for large batteries (<italic>C</italic><sub><italic>d</italic></sub> &gt; 1000 <italic>μ</italic> Ah), increasing the solar panel size (then the 〈<italic>β</italic>〉) from the lowest to the highest value increases the data-rate from 58 to 138 bits/s (a ratio of 2.38). In the meantime, a compression effect on the data-rate appears for smaller batteries when the solar panel size exceeds a given threshold (〈<italic>β</italic>〉 &gt; 50 <italic>μ</italic> A in our case). For a 63 <italic>μ</italic> Ah battery, the 〈<italic>Rd</italic>〉 varies from 45.87 to 94.4 bits/s (a ratio of 2). It is important to notice that using our CL-PM, the size of the battery only affects the data-rate during ZEIs. By looking at Equation (<xref rid="Equ11" ref-type="disp-formula">11</xref>), we see that the wake-up period during ZEI is inversely proportional to the SoC of the battery, namely SoC(<italic>t</italic><sup>∗</sup>). The maximum value of SoC(<italic>t</italic><sup>∗</sup>) is bounded by the battery SoC<sub>max</sub>. So, the condition that must be fulfilled to maximize the data-rate during ZEIs can be expressed as follows:<disp-formula id="Equ13"><label>13</label><alternatives><mml:math id="Equ13_Math"><mml:mtext mathvariant="normal">SoC</mml:mtext><mml:mo>(</mml:mo><mml:msup><mml:mrow><mml:mi>t</mml:mi></mml:mrow><mml:mrow><mml:mo>∗</mml:mo></mml:mrow></mml:msup><mml:mo>)</mml:mo><mml:mo>≃</mml:mo><mml:msub><mml:mrow><mml:mtext mathvariant="normal">SoC</mml:mtext></mml:mrow><mml:mrow><mml:mtext>max</mml:mtext></mml:mrow></mml:msub></mml:math><graphic specific-use="web" mime-subtype="GIF" xlink:href="MediaObjects/13639_2012_Article_9_Equ13_HTML.gif"/></alternatives></disp-formula></p><p>Once this condition is met for a given battery-solar panel pair, the data-rate has reached its compression point. An optimal sized solar panel must thus provide a sufficient amount of energy (constrained by the light conditions) to completely recharge the battery at the end of the day. Even if further energy is harvested, it could not be stored in the battery. For instance, for a solar panel with a 〈<italic>β</italic>〉 of 26 <italic>μ</italic> A, increasing the battery 20 times its size (from 63 to 1260 <italic>μ</italic> Ah) will only boost the data-rate by a factor of 1.4 (from 45.8 to 64.86 bits/s). In more general terms, from Figure<xref rid="Fig16" ref-type="fig">16</xref> we can observe that increasing the solar panel size is more effective than increasing the battery size for improving the data-rate. Since the maximum data-rate is achieved when the energy is available from the environment (as it can be observed from Figure<xref rid="Fig11" ref-type="fig">11</xref>) the harvesting capability (i.e., the solar panel size) has a major impact on performance.</p><p>In order to find an optimized battery/solar panel configuration from Figure<xref rid="Fig16" ref-type="fig">16</xref>, we follow the curve along which the data-rate has a constant value (isoline) of 100 bits/s which is plotted in Figure<xref rid="Fig17" ref-type="fig">17</xref>.<fig id="Fig17"><label>Figure 17</label><caption xml:lang="en"><p><bold>Isoline for an average data-rate (</bold><bold><italic>〈Rd〉</italic></bold><bold>) of 100 bits/s.</bold></p></caption><graphic specific-use="web" mime-subtype="JPEG" xlink:href="MediaObjects/13639_2012_Article_9_Fig17_HTML.jpg"/></fig></p><p>As it can be observed with a battery of 63 <italic>μ</italic> Ah, we cannot achieve the requirement of 100 bits/s regardless the value of the 〈<italic>β</italic>〉 parameter of the solar panel. Similarly, with a 〈<italic>β</italic>〉 of 26 <italic>μ</italic> A there is no configuration that satisfies this data-rate constraint. To meet the requirement we must thus increase both the solar panel and the battery size. Moreover, in order to respect the data-rate constraint, the design must be located either onto or above the isoline. The battery/solar panel pairs that respect these conditions are marked with a triangle on Figure<xref rid="Fig17" ref-type="fig">17</xref>. As we can see, there are four configurations above the isoline. Those configurations provide a data-rate higher than 100 bits/s and are thus oversized with respect to our requirement. Finally, the configuration {〈<italic>β</italic>〉,<italic>C</italic><sub><italic>d</italic></sub>}={52 <italic>μ</italic> A,630 <italic>μ</italic> Ah} exactly matches the data-rate constraint. It is therefore the most efficient sizing for our system.</p></sec></sec><sec id="Sec27" sec-type="conclusions"><title>Conclusion</title><p>In this article, we presented a framework for modeling and simulating energy harvesting WSN nodes. We have presented a high level modeling approach, based on the <italic>α</italic> and <italic>β</italic> parameters, used to describe a generic energy harvesting system. The accuracy of the models have been validated through experiments carried out on real hardware.</p><p>Two novel power management architectures for on-line duty-cycle adaptation have been proposed. The OL-PM is centered on an energy-neutral approach while the objective of the CL-PM is to optimize system operation in both energy-neutral and negative-energy conditions. These power managers were evaluated in simulation using a real energy data set from a recent solar energy harvesting platform. The comparison with a state-of-the-art power management algorithm shows that our power managers provide a significant performance improvement (50%) as well as continuous operation. Further analysis has shown that an efficient setting of the power management tunable parameters, such as the reactivity and the safety margin, can improve the performance and the reliability of the system when using a solar energy harvester.</p><p>A case study of system sizing for a solar energy harvesting platform has thus been outlined in our article. We have shown that both the battery and the solar panel size impact the performance of the system, i.e., the data-rate. Using our simulation framework, we were able to rapidly find a configuration that exactly matches the data-rate constraint.</p><p>In future studies we first plan to extend the models presented in this study to other types of energy harvesting systems and energy storage devices. For instance, we plan to add to our framework piezoelectric harvesting systems as well as supercapacitor models. The power manager architectures would also need to be improved to make them more adaptive and thus applicable to a wider range of energy harvesting systems. We will also focus on improving our simulation environment. Our main objective is to improve the automation of our tool to facilitate the exploration of different architectures.</p></sec></body><back><ack><title>Acknowledgment</title><p>This study was supported by the French National Research Agency (ANR) project GRECO bearing reference ANR-2010-SEGI-004-04.</p></ack><ref-list id="Bib1"><title>References</title><ref-list><ref id="CR1"><label>1.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Akyildiz</surname><given-names>IF</given-names></name><name><surname>Vuran</surname><given-names>MC</given-names></name></person-group><source>Wireless Sensor Networks</source><year>2010</year><publisher-loc>New York, NY, USA</publisher-loc><publisher-name>John Wiley &amp; Sons, Inc.</publisher-name><pub-id pub-id-type="doi">10.1002/9780470515181</pub-id></mixed-citation></ref><ref id="CR2"><label>2.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Pakzad</surname><given-names>SN</given-names></name><name><surname>Fenves</surname><given-names>GL</given-names></name><name><surname>Kim</surname><given-names>S</given-names></name><name><surname>Culler</surname><given-names>DE</given-names></name></person-group><article-title xml:lang="en">Design and implementation of scalable wireless sensor network for structural monitoring</article-title><source>J. Infrastruct. Systs</source><year>2008</year><volume>14</volume><fpage>89</fpage><lpage>101</lpage><pub-id pub-id-type="doi">10.1061/(ASCE)1076-0342(2008)14:1(89)</pub-id><comment>March</comment></mixed-citation></ref><ref id="CR3"><label>3.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Basha</surname><given-names>E</given-names></name><name><surname>Rus</surname><given-names>D</given-names></name></person-group><article-title xml:lang="en">Design of early warning flood detection systems for developing countries</article-title><source>Proceedings of the Conference on Information and Communication Technologies and Development</source><year>2007</year><publisher-loc>India</publisher-loc><publisher-name>Bangalore</publisher-name></mixed-citation></ref><ref id="CR4"><label>4.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Kansal</surname><given-names>A</given-names></name><name><surname>Hsu</surname><given-names>J</given-names></name><name><surname>Srivastava</surname><given-names>M</given-names></name><name><surname>Raghunathan</surname><given-names>V</given-names></name></person-group><article-title xml:lang="en">Harvesting aware power management for sensor networks</article-title><source>Proceedings of the 43rd annual Design Automation Conference, DAC’06</source><year>2006</year><publisher-loc>New York</publisher-loc><publisher-name>ACM</publisher-name></mixed-citation></ref><ref id="CR5"><label>5.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Roundy</surname><given-names>S</given-names></name><name><surname>Wright</surname><given-names>PK</given-names></name></person-group><article-title xml:lang="en">A piezoelectric vibration based generator for wireless electronics</article-title><source>Smart Mater. Struct</source><year>2004</year><volume>13</volume><issue>5</issue><fpage>1131</fpage><lpage>1142</lpage><pub-id pub-id-type="doi">10.1088/0964-1726/13/5/018</pub-id></mixed-citation></ref><ref id="CR6"><label>6.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Park</surname><given-names>C</given-names></name><name><surname>Chou</surname><given-names>P</given-names></name></person-group><source>Ambimax: Autonomous energy harvesting platform for multi-supply wireless sensor nodes</source><year>2006</year><publisher-loc>VA, USA</publisher-loc><publisher-name>Reston</publisher-name></mixed-citation></ref><ref id="CR7"><label>7.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><collab>T Instrument</collab></person-group><source>eZ430-RF2500 Solar Energy Harvesting Kit</source><year>2011</year><comment>http://focus.ti.com/docs/toolsw/folders/print/ez430-rf2500-seh.html</comment></mixed-citation></ref><ref id="CR8"><label>8.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Kansal</surname><given-names>A</given-names></name><name><surname>Hsu</surname><given-names>J</given-names></name><name><surname>Zahedi</surname><given-names>S</given-names></name><name><surname>Srivastava</surname><given-names>M</given-names></name></person-group><article-title xml:lang="en">Power management in energy harvesting sensor networks</article-title><source>ACM Trans. Embedded Comput. Systs (TECS)</source><year>2007</year><volume>6</volume><issue>4</issue><fpage>32</fpage><lpage>es</lpage><pub-id pub-id-type="doi">10.1145/1274858.1274870</pub-id></mixed-citation></ref><ref id="CR9"><label>9.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Nelson</surname><given-names>J</given-names></name></person-group><source>The Physics of Solar Cells</source><year>2003</year><publisher-loc>London</publisher-loc><publisher-name>Imperial College Press</publisher-name><pub-id pub-id-type="doi">10.1142/p276</pub-id></mixed-citation></ref><ref id="CR10"><label>10.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Green</surname><given-names>MA</given-names></name><name><surname>Emery</surname><given-names>K</given-names></name><name><surname>Hishikawa</surname><given-names>Y</given-names></name><name><surname>Warta</surname><given-names>W</given-names></name></person-group><article-title xml:lang="en">Solar cell efficiency tables (version 37)</article-title><source>Prog. Photovolt: Res. Appl</source><year>2011</year><volume>19</volume><fpage>84</fpage><lpage>92</lpage><pub-id pub-id-type="doi">10.1002/pip.1088</pub-id></mixed-citation></ref><ref id="CR11"><label>11.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Li</surname><given-names>G</given-names></name><name><surname>Shrotriya</surname><given-names>V</given-names></name><name><surname>Huang</surname><given-names>J</given-names></name><name><surname>Yao</surname><given-names>Y</given-names></name><name><surname>Moriarty</surname><given-names>T</given-names></name><name><surname>Emery</surname><given-names>K</given-names></name><name><surname>Yang</surname><given-names>Y</given-names></name></person-group><article-title xml:lang="en">High-efficiency solution processable polymer photovoltaic cells by self-organization of polymer blends</article-title><source>Nat. Mater</source><year>2005</year><volume>4</volume><issue>11</issue><fpage>864</fpage><lpage>868</lpage><pub-id pub-id-type="doi">10.1038/nmat1500</pub-id></mixed-citation></ref><ref id="CR12"><label>12.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Yi</surname><given-names>J</given-names></name><name><surname>Ki</surname><given-names>W</given-names></name><name><surname>Tsui</surname><given-names>C</given-names></name></person-group><article-title xml:lang="en">Analysis and design strategy of UHF micro-power CMOS rectifiers for micro-sensor and RFID applications</article-title><source>IEEE Trans. Circ. Systs. I Regular Papers</source><year>2007</year><volume>54</volume><fpage>153</fpage><lpage>166</lpage><pub-id pub-id-type="doi">10.1109/TCSI.2006.887974</pub-id></mixed-citation></ref><ref id="CR13"><label>13.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Toriyama</surname><given-names>T</given-names></name><name><surname>Yajima</surname><given-names>M</given-names></name><name><surname>Sugiyama</surname><given-names>S</given-names></name></person-group><article-title xml:lang="en">Thermoelectric micro power generator utilizing self-standing polysilicon-metal thermopile</article-title><source>The 14th IEEE International Conference on Micro Electro Mechanical Systems, 2001. MEMS vol. 1</source><year>2001</year><publisher-loc>Switzerland</publisher-loc><publisher-name>Interlaken</publisher-name></mixed-citation></ref><ref id="CR14"><label>14.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Starner</surname><given-names>T</given-names></name><name><surname>Rhodes</surname><given-names>B</given-names></name><name><surname>Weaver</surname><given-names>J</given-names></name><name><surname>Pentland</surname><given-names>A</given-names></name></person-group><article-title xml:lang="en">Human-powered wearable computing</article-title><source>IBM Systs. J</source><year>1996</year><volume>35</volume><fpage>618</fpage><lpage>629</lpage><pub-id pub-id-type="doi">10.1147/sj.353.0618</pub-id></mixed-citation></ref><ref id="CR15"><label>15.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Gilbert</surname><given-names>J</given-names></name><name><surname>Balouchi</surname><given-names>F</given-names></name></person-group><article-title xml:lang="en">Comparison of energy harvesting systems for wireless sensor networks</article-title><source>Int. J. Autom. Comput</source><year>2008</year><volume>5</volume><issue>4</issue><fpage>334</fpage><lpage>347</lpage><pub-id pub-id-type="doi">10.1007/s11633-008-0334-2</pub-id></mixed-citation></ref><ref id="CR16"><label>16.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><collab>Jointiff</collab></person-group><source>Windlab Junior</source><year>2011</year><comment>http://www.jointiff.com</comment></mixed-citation></ref><ref id="CR17"><label>17.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Roundy</surname><given-names>S</given-names></name><name><surname>Steingart</surname><given-names>D</given-names></name><name><surname>Frechette</surname><given-names>L</given-names></name><name><surname>Wright</surname><given-names>PK</given-names></name><name><surname>Rabaey</surname><given-names>JM</given-names></name></person-group><article-title xml:lang="en">Power sources for wireless sensor networks</article-title><source>EWSN’04</source><year>2004</year><publisher-loc>Germany</publisher-loc><publisher-name>Berlin</publisher-name></mixed-citation></ref><ref id="CR18"><label>18.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Ferry</surname><given-names>N</given-names></name><name><surname>Ducloyer</surname><given-names>S</given-names></name><name><surname>Julien</surname><given-names>N</given-names></name><name><surname>Jutel</surname><given-names>D</given-names></name></person-group><article-title xml:lang="en">Power/energy estimator for designing WSN nodes with ambient energy harvesting feature</article-title><source>EURASIP J. Embedded Syst</source><year>2011</year><volume>2011</volume><fpage>1</fpage><lpage>17</lpage><comment>Article No. 6</comment></mixed-citation></ref><ref id="CR19"><label>19.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Vigorito</surname><given-names>C</given-names></name><name><surname>Ganesan</surname><given-names>D</given-names></name><name><surname>Barto</surname><given-names>A</given-names></name></person-group><article-title xml:lang="en">Adaptive control of duty cycling in energy-harvesting wireless sensor networks</article-title><source>4th Annual IEEE Communications Society Conference on Sensor, Mesh and Ad Hoc Communications and Networks, 2007. SECON’07</source><year>2007</year><comment>San Diego, California, USA</comment></mixed-citation></ref><ref id="CR20"><label>20.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Moser</surname><given-names>C</given-names></name><name><surname>Thiele</surname><given-names>L</given-names></name><name><surname>Brunelli</surname><given-names>D</given-names></name><name><surname>Benini</surname><given-names>L</given-names></name></person-group><article-title xml:lang="en">Adaptive power management in energy harvesting systems</article-title><source>2007 IEEE Design, Automation &amp; Test in Europe Conference &amp; Exhibition</source><year>2007</year><publisher-loc>Nice</publisher-loc><publisher-name>France</publisher-name></mixed-citation></ref><ref id="CR21"><label>21.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Murthy</surname><given-names>C</given-names></name></person-group><article-title xml:lang="en">Power management and data rate maximization in wireless energy harvesting sensors</article-title><source>Int. J. Wirel. Inf. Netws</source><year>2009</year><volume>16</volume><fpage>102</fpage><lpage>117</lpage><pub-id pub-id-type="doi">10.1007/s10776-009-0104-2</pub-id><comment>http://dx.doi.org/10.1007/s10776-009-0104-2</comment></mixed-citation></ref><ref id="CR22"><label>22.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Kansal</surname><given-names>A</given-names></name><name><surname>Potter</surname><given-names>D</given-names></name><name><surname>Srivastava</surname><given-names>MB</given-names></name></person-group><article-title xml:lang="en">Performance aware tasking for environmentally powered sensor networks</article-title><source>SIGMETRICS Perform. Eval. Rev</source><year>2004</year><volume>32</volume><fpage>223</fpage><lpage>234</lpage><pub-id pub-id-type="doi">10.1145/1012888.1005714</pub-id></mixed-citation></ref><ref id="CR23"><label>23.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Castagnetti</surname><given-names>A</given-names></name><name><surname>Pegatoquet</surname><given-names>A</given-names></name><name><surname>Belleudy</surname><given-names>C</given-names></name><name><surname>Auguin</surname><given-names>M</given-names></name></person-group><article-title xml:lang="en">An efficient state of charge prediction model for solar harvesting WSN platforms</article-title><source>Proceedings of the IWSSIP Internation Conference on Systems, Signals and Image Processing</source><year>2012</year><publisher-loc>Austria</publisher-loc><publisher-name>Vienna</publisher-name></mixed-citation></ref><ref id="CR24"><label>24.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Ning</surname><given-names>G</given-names></name><name><surname>Haran</surname><given-names>B</given-names></name><name><surname>Popov</surname><given-names>B</given-names></name></person-group><article-title xml:lang="en">Capacity fade study of lithium-ion batteries cycled at high discharge rates</article-title><source>J. Power Sources</source><year>2003</year><volume>117</volume><issue>1-2</issue><fpage>160</fpage><lpage>169</lpage><pub-id pub-id-type="doi">10.1016/S0378-7753(03)00029-6</pub-id></mixed-citation></ref><ref id="CR25"><label>25.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Rong</surname><given-names>P</given-names></name><name><surname>Pedram</surname><given-names>M</given-names></name></person-group><article-title xml:lang="en">An analytical model for predicting the remaining battery capacity of lithium-ion batteries</article-title><source>IEEE Trans. Very Large Scale Integrat. (VLSI) Systs</source><year>2006</year><volume>14</volume><issue>5</issue><fpage>441</fpage><lpage>451</lpage><pub-id pub-id-type="doi">10.1109/TVLSI.2006.876094</pub-id></mixed-citation></ref><ref id="CR26"><label>26.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Koubâa</surname><given-names>A</given-names></name><name><surname>Cunha</surname><given-names>A</given-names></name><name><surname>Alves</surname><given-names>M</given-names></name><name><surname>Tovar</surname><given-names>E</given-names></name></person-group><article-title xml:lang="en">TDBS: a time division beacon scheduling mechanism for ZigBee cluster-tree wireless sensor networks</article-title><source>Real-Time Syst</source><year>2008</year><volume>40</volume><issue>3</issue><fpage>321</fpage><lpage>354</lpage><pub-id pub-id-type="other" assigning-authority="Zentralblatt MATH">1194.68087</pub-id><pub-id pub-id-type="doi">10.1007/s11241-008-9063-4</pub-id></mixed-citation></ref><ref id="CR27"><label>27.</label><mixed-citation publication-type="book"><person-group person-group-type="author"><collab>C Corporation</collab></person-group><source>Rechargeable Solid State Energy Storage Enerchip CBC050</source><year>2011</year><comment>http://www.cymbet.com</comment></mixed-citation></ref><ref id="CR28"><label>28.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Patil</surname><given-names>A</given-names></name><name><surname>Patil</surname><given-names>V</given-names></name><name><surname>Shin</surname><given-names>DW</given-names></name><name><surname>Choi</surname><given-names>JW</given-names></name><name><surname>Paik</surname><given-names>DS</given-names></name><name><surname>Yoon</surname><given-names>SJ</given-names></name></person-group><article-title xml:lang="en">Issue and challenges facing rechargeable thin film lithium batteries</article-title><source>Mater. Res. Bull</source><year>2008</year><volume>43</volume><issue>8-9</issue><fpage>1913</fpage><lpage>1942</lpage><pub-id pub-id-type="doi">10.1016/j.materresbull.2007.08.031</pub-id></mixed-citation></ref></ref-list></ref-list><app-group><app id="App1" specific-use="web-only"><sec id="Sec28"><title>Authors’ original submitted files for images</title><p>Below are the links to the authors’ original submitted files for images.<supplementary-material content-type="local-data" id="MOESM1" xlink:title="Authors’ original submitted files for images"><media mimetype="image" mime-subtype="tiff" xlink:href="MediaObjects/13639_2012_9_MOESM1_ESM.tiff" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 1</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM2" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM2_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 2</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM3" xlink:title="Authors’ original submitted files for images"><media mimetype="image" mime-subtype="tiff" xlink:href="MediaObjects/13639_2012_9_MOESM3_ESM.tiff" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 3</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM4" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM4_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 4</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM5" xlink:title="Authors’ original submitted files for images"><media mimetype="image" mime-subtype="tiff" xlink:href="MediaObjects/13639_2012_9_MOESM5_ESM.tiff" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 5</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM6" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM6_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 6</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM7" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM7_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 7</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM8" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM8_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 8</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM9" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM9_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 9</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM10" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM10_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 10</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM11" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM11_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 11</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM12" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM12_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 12</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM13" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM13_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 13</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM14" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM14_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 14</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM15" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM15_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 15</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM16" xlink:title="Authors’ original submitted files for images"><media mimetype="application" mime-subtype="pdf" xlink:href="MediaObjects/13639_2012_9_MOESM16_ESM.pdf" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 16</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="MOESM17" xlink:title="Authors’ original submitted files for images"><media mimetype="image" mime-subtype="tiff" xlink:href="MediaObjects/13639_2012_9_MOESM17_ESM.tiff" position="anchor"><caption xml:lang="en"><p>Authors’ original file for figure 17</p></caption></media></supplementary-material></p></sec></app></app-group><notes notes-type="Misc"><title>Competing interests</title><p>The authors declare that they have no competing interests.</p></notes></back></article></records><facets><facet name="subject"><facet-value count="1">Circuits and Systems</facet-value><facet-value count="1">Control Structures and Microprogramming</facet-value><facet-value count="1">Electronic Circuits and Devices</facet-value><facet-value count="1">Engineering</facet-value><facet-value count="1">Signal,Image and Speech Processing</facet-value></facet><facet name="keyword"><facet-value count="1">Clear Channel Assessment</facet-value><facet-value count="1">Energy Harvesting</facet-value><facet-value count="1">Power Manager</facet-value><facet-value count="1">Sensor Node</facet-value><facet-value count="1">Solar Panel</facet-value></facet><facet name="pub"><facet-value count="1">EURASIP Journal on Embedded Systems</facet-value></facet><facet name="year"><facet-value count="1">2012</facet-value></facet><facet name="country"><facet-value count="1">France</facet-value></facet><facet name="type"><facet-value count="1">Journal</facet-value></facet></facets></response>
